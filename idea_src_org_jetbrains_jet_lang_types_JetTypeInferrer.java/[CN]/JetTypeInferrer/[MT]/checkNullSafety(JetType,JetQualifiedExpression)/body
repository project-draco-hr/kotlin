{
  if (receiverType != null) {
    boolean namespaceType=receiverType instanceof NamespaceType;
    boolean nullable=!namespaceType && receiverType.isNullable();
    if (nullable && expression.getOperationSign() == JetTokens.DOT) {
      semanticServices.getErrorHandler().genericError(expression.getOperationTokenNode(),"Only safe calls (?.) are allowed on a nullable receiver of type " + receiverType);
    }
 else     if (!nullable && expression.getOperationSign() == JetTokens.SAFE_ACCESS) {
      if (namespaceType) {
        semanticServices.getErrorHandler().genericError(expression.getOperationTokenNode(),"Safe calls are not allowed on namespaces");
      }
 else {
        semanticServices.getErrorHandler().genericWarning(expression.getOperationTokenNode(),"Unnecessary safe call on a non-null receiver of type  " + receiverType);
      }
    }
  }
}
