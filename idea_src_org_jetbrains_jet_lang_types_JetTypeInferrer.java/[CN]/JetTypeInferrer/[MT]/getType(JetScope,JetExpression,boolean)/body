{
  TypeInferrerVisitor visitor=new TypeInferrerVisitor(scope,preferBlock);
  expression.accept(visitor);
  JetType result=visitor.getResult();
  if (result != null) {
    trace.recordExpressionType(expression,result);
  }
  return result;
}
