{
  TypeInferrerVisitor visitor;
  if (this.scope == scope && this.preferBlock == preferBlock && result == null) {
    visitor=this;
  }
 else {
    visitor=new TypeInferrerVisitor(scope,preferBlock);
  }
  JetType type=visitor.getType(expression);
  visitor.result=null;
  return type;
}
