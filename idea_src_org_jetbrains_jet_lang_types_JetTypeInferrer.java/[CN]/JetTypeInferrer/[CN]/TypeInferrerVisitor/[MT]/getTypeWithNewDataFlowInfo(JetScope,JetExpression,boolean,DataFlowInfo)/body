{
  TypeInferrerVisitor visitor;
  if (this.scope == scope && this.preferBlock == preferBlock && result == null && dataFlowInfo == this.dataFlowInfo) {
    visitor=this;
  }
 else {
    visitor=createNew(scope,preferBlock,dataFlowInfo,expectedType,expectedReturnType);
  }
  JetType type=visitor.getType(expression);
  visitor.result=null;
  return type;
}
