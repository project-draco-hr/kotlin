{
  String referencedName=expression.getReferencedName();
  if (referencedName != null) {
    VariableDescriptor variable=scope.getVariable(referencedName);
    if (variable != null) {
      trace.recordReferenceResolution(expression,variable);
      result=variable.getOutType();
      if (result == null) {
        semanticServices.getErrorHandler().genericError(expression.getNode(),"This variable is not readable in this context");
      }
      return;
    }
 else {
      NamespaceDescriptor namespace=scope.getNamespace(referencedName);
      if (namespace != null) {
        trace.recordReferenceResolution(expression,namespace);
        result=namespace.getNamespaceType();
        return;
      }
    }
    semanticServices.getErrorHandler().unresolvedReference(expression);
  }
}
