{
  checkCondition(scope,expression.getCondition());
  JetExpression elseBranch=expression.getElse();
  JetExpression thenBranch=expression.getThen();
  JetType thenType=null;
  if (thenBranch != null) {
    thenType=getType(scope,thenBranch,true);
  }
  if (elseBranch != null) {
    JetType elseType=getType(scope,elseBranch,true);
    if (thenType == null) {
      result=elseType;
    }
 else     if (elseType == null) {
      result=thenType;
    }
 else {
      result=semanticServices.getTypeChecker().commonSupertype(Arrays.asList(thenType,elseType));
    }
  }
 else {
    result=JetStandardClasses.getUnitType();
  }
}
