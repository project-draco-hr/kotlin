{
  JetExpression body=expression.getBody();
  JetScope conditionScope=scope;
  if (body instanceof JetFunctionLiteralExpression) {
    JetFunctionLiteralExpression function=(JetFunctionLiteralExpression)body;
    if (!function.hasParameterSpecification()) {
      WritableScope writableScope=semanticServices.createWritableScope(scope,scope.getContainingDeclaration());
      conditionScope=writableScope;
      getBlockReturnedTypeWithWritableScope(writableScope,function.getBody(),LabeledJumpDomain.ERROR);
      trace.recordBlock(function);
    }
 else {
      getType(scope,body,true);
    }
  }
 else   if (body != null) {
    WritableScope writableScope=semanticServices.createWritableScope(scope,scope.getContainingDeclaration());
    conditionScope=writableScope;
    getBlockReturnedTypeWithWritableScope(writableScope,Collections.singletonList(body),LabeledJumpDomain.ERROR);
  }
  checkCondition(conditionScope,expression.getCondition());
  result=JetStandardClasses.getUnitType();
}
