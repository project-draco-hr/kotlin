{
  if (!endsWithReturn(bodyExpression)) {
    final JetType expressionType=bindingContext.getExpressionType(bodyExpression);
    if (expressionType == null || expressionType.equals(JetStandardClasses.getUnitType())) {
      mv.visitInsn(Opcodes.RETURN);
    }
 else {
      codegen.returnTopOfStack();
    }
  }
}
