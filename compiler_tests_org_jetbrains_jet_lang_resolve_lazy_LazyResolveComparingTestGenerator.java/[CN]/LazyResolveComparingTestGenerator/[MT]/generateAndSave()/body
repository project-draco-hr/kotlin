{
  StringBuilder out=new StringBuilder();
  Printer p=new Printer(out);
  p.print(FileUtil.loadFile(new File("injector-generator/copyright.txt")));
  p.println("package ",testClassPackage,";");
  p.println();
  p.println("import org.junit.Assert;");
  p.println("import org.junit.Test;");
  p.println();
  p.println("import java.io.File;");
  p.println("import java.io.FileFilter;");
  p.println("import java.lang.reflect.Method;");
  p.println("import java.util.HashSet;");
  p.println("import java.util.Set;");
  p.println();
  p.println("import ",baseTestClassPackage,".",baseTestClassName,";");
  p.println();
  p.println("/* This class is generated by " + generatorName + ". DO NOT MODIFY MANUALLY */");
  p.println("public class ",testClassName," extends ",baseTestClassName," {");
  p.pushIndent();
  Collection<TestDataFile> files=Lists.newArrayList();
  for (  TestDataSource testDataSource : testDataSources) {
    files.addAll(testDataSource.getFiles());
  }
  for (  TestDataFile file : files) {
    p.println("@Test");
    p.println("public void ",file.getTestMethodName(),"() throws Exception {");
    p.pushIndent();
    p.println(file.getTestCall());
    p.popIndent();
    p.println("}");
    p.println();
  }
  generateAllTestsPresent(p);
  p.popIndent();
  p.println("}");
  String testSourceFilePath=baseDir + testClassPackage.replace(".","/") + "/"+ testClassName+ ".java";
  FileUtil.writeToFile(new File(testSourceFilePath),out.toString());
}
