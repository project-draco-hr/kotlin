{
  if (receiverType != null && callee != null) {
    boolean namespaceType=receiverType instanceof NamespaceType;
    JetType calleeReceiverType=callee.getReceiverType();
    boolean nullableReceiver=!namespaceType && receiverType.isNullable();
    boolean calleeForbidsNullableReceiver=calleeReceiverType == null || !calleeReceiverType.isNullable();
    IElementType operationSign=operationTokenNode.getElementType();
    if (nullableReceiver && calleeForbidsNullableReceiver && operationSign == JetTokens.DOT) {
      trace.report(UNSAFE_CALL.on(operationTokenNode,receiverType));
    }
 else     if ((!nullableReceiver || !calleeForbidsNullableReceiver) && operationSign == JetTokens.SAFE_ACCESS) {
      if (namespaceType) {
        trace.report(SAFE_CALLS_ARE_NOT_ALLOWED_ON_NAMESPACES.on(operationTokenNode));
      }
 else {
        trace.report(UNNECESSARY_SAFE_CALL.on(operationTokenNode,receiverType));
      }
    }
  }
}
