{
  if (selectorExpression instanceof JetCallExpression) {
    JetCallExpression callExpression=(JetCallExpression)selectorExpression;
    return context.resolveCall(receiver,callExpression);
  }
 else   if (selectorExpression instanceof JetSimpleNameExpression) {
    JetSimpleNameExpression nameExpression=(JetSimpleNameExpression)selectorExpression;
    TemporaryBindingTrace temporaryTrace=TemporaryBindingTrace.create(context.trace);
    VariableDescriptor variableDescriptor=context.replaceBindingTrace(temporaryTrace).resolveSimpleProperty(receiver,nameExpression);
    if (variableDescriptor != null) {
      temporaryTrace.commit();
      return context.services.checkType(variableDescriptor.getOutType(),nameExpression,context);
    }
    TypeInferenceContext newContext=receiver.exists() ? context.replaceScope(receiver.getType().getMemberScope()) : context;
    JetType jetType=lookupNamespaceOrClassObject(nameExpression,nameExpression.getReferencedName(),newContext);
    if (jetType == null) {
      context.trace.report(UNRESOLVED_REFERENCE.on(nameExpression));
    }
    return context.services.checkType(jetType,nameExpression,context);
  }
 else   if (selectorExpression instanceof JetQualifiedExpression) {
    JetQualifiedExpression qualifiedExpression=(JetQualifiedExpression)selectorExpression;
    JetExpression newReceiverExpression=qualifiedExpression.getReceiverExpression();
    JetType newReceiverType=getSelectorReturnType(receiver,newReceiverExpression,context.replaceExpectedType(NO_EXPECTED_TYPE));
    JetExpression newSelectorExpression=qualifiedExpression.getSelectorExpression();
    if (newReceiverType != null && newSelectorExpression != null) {
      return getSelectorReturnType(new ExpressionReceiver(newReceiverExpression,newReceiverType),newSelectorExpression,context);
    }
  }
 else {
    context.trace.report(UNSUPPORTED.on(selectorExpression,"getSelectorReturnType"));
  }
  return null;
}
