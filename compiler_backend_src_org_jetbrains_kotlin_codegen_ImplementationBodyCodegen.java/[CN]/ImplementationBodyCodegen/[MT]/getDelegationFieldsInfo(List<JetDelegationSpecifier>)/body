{
  DelegationFieldsInfo result=new DelegationFieldsInfo();
  int n=0;
  for (  JetDelegationSpecifier specifier : delegationSpecifiers) {
    if (specifier instanceof JetDelegatorByExpressionSpecifier) {
      JetExpression expression=((JetDelegatorByExpressionSpecifier)specifier).getDelegateExpression();
      PropertyDescriptor propertyDescriptor=CodegenUtil.getDelegatePropertyIfAny(expression,descriptor,bindingContext);
      if (CodegenUtil.isFinalPropertyWithBackingField(propertyDescriptor,bindingContext)) {
        result.addField((JetDelegatorByExpressionSpecifier)specifier,propertyDescriptor);
      }
 else {
        JetType expressionType=bindingContext.getType(expression);
        Type asmType=expressionType != null ? typeMapper.mapType(expressionType) : typeMapper.mapType(getSuperClass(specifier));
        result.addField((JetDelegatorByExpressionSpecifier)specifier,asmType,"$delegate_" + n);
      }
      n++;
    }
  }
  return result;
}
