{
  if (!isTopLevelOrInnerClass(descriptor)) {
    AnnotationVisitor av=v.getVisitor().visitAnnotation(asmDescByFqNameWithoutInnerClasses(JvmAnnotationNames.KOTLIN_LOCAL_CLASS),true);
    av.visit(JvmAnnotationNames.VERSION_FIELD_NAME,JvmAbi.VERSION.toArray());
    av.visitEnd();
  }
  DescriptorSerializer serializer=DescriptorSerializer.create(descriptor,new JvmSerializerExtension(v.getSerializationBindings(),typeMapper));
  ProtoBuf.Class classProto=serializer.classProto(descriptor).build();
  AnnotationVisitor av=v.getVisitor().visitAnnotation(asmDescByFqNameWithoutInnerClasses(JvmAnnotationNames.KOTLIN_CLASS),true);
  writeAnnotationData(av,serializer,classProto);
  av.visitEnd();
}
