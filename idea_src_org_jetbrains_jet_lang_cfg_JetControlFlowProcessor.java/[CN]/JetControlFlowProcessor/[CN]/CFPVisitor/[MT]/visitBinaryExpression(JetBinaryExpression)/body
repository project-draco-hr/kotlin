{
  IElementType operationType=expression.getOperationReference().getReferencedNameElementType();
  JetExpression right=expression.getRight();
  if (operationType == JetTokens.ANDAND) {
    value(expression.getLeft(),false);
    Label resultLabel=builder.createUnboundLabel();
    builder.jumpOnFalse(resultLabel);
    if (right != null) {
      value(right,false);
    }
    builder.bindLabel(resultLabel);
  }
 else   if (operationType == JetTokens.OROR) {
    value(expression.getLeft(),false);
    Label resultLabel=builder.createUnboundLabel();
    builder.jumpOnTrue(resultLabel);
    if (right != null) {
      value(right,false);
    }
    builder.bindLabel(resultLabel);
  }
 else   if (operationType == JetTokens.EQ) {
    JetExpression left=expression.getLeft();
    if (right != null) {
      value(right,false);
    }
    if (left instanceof JetSimpleNameExpression) {
      builder.writeNode(expression,left);
    }
 else {
      throw new UnsupportedOperationException("Assignments to " + left + " are not supported yet");
    }
  }
 else {
    value(expression.getLeft(),false);
    if (right != null) {
      value(right,false);
    }
    value(expression.getOperationReference(),false);
    builder.readNode(expression);
  }
}
