{
  loadText("fun box() : Int { var l = IntArray(1); l[0.long] = 4; l[0.long] += 6; return l[0.long];}\n" + "fun IntArray.set(index: Long, elem: Int) { this[index.int] = elem }\n" + "fun IntArray.get(index: Long) = this[index.int]");
  Method foo=generateFunction("box");
  assertTrue((Integer)foo.invoke(null) == 10);
}
