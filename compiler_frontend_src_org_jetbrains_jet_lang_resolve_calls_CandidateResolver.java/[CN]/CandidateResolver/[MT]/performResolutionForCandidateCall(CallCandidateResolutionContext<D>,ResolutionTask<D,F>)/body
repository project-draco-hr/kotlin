{
  ProgressIndicatorProvider.checkCanceled();
  MutableResolvedCall<D> candidateCall=context.candidateCall;
  D candidate=candidateCall.getCandidateDescriptor();
  candidateCall.addStatus(checkReceiverTypeError(context));
  if (ErrorUtils.isError(candidate)) {
    candidateCall.addStatus(SUCCESS);
    markAllArgumentsAsUnmapped(context);
    return;
  }
  if (!checkOuterClassMemberIsAccessible(context)) {
    candidateCall.addStatus(OTHER_ERROR);
    markAllArgumentsAsUnmapped(context);
    return;
  }
  DeclarationDescriptorWithVisibility invisibleMember=Visibilities.findInvisibleMember(candidate,context.scope.getContainingDeclaration());
  if (invisibleMember != null) {
    candidateCall.addStatus(OTHER_ERROR);
    context.tracing.invisibleMember(context.trace,invisibleMember);
    markAllArgumentsAsUnmapped(context);
    return;
  }
  if (task.checkArguments == CheckValueArgumentsMode.ENABLED) {
    Set<ValueArgument> unmappedArguments=Sets.newLinkedHashSet();
    ValueArgumentsToParametersMapper.Status argumentMappingStatus=ValueArgumentsToParametersMapper.mapValueArgumentsToParameters(context.call,context.tracing,candidateCall,unmappedArguments);
    if (!argumentMappingStatus.isSuccess()) {
      candidateCall.addUnmappedArguments(unmappedArguments);
      if (argumentMappingStatus == ValueArgumentsToParametersMapper.Status.STRONG_ERROR && !CallResolverUtil.isInvokeCallOnExpressionWithBothReceivers(context.call)) {
        candidateCall.addStatus(RECEIVER_PRESENCE_ERROR);
        return;
      }
 else {
        candidateCall.addStatus(OTHER_ERROR);
      }
    }
  }
  List<JetTypeProjection> jetTypeArguments=context.call.getTypeArguments();
  if (jetTypeArguments.isEmpty()) {
    if (!candidate.getTypeParameters().isEmpty()) {
      ResolutionStatus status=inferTypeArguments(context);
      candidateCall.addStatus(status);
    }
 else {
      candidateCall.addStatus(checkAllValueArguments(context,SHAPE_FUNCTION_ARGUMENTS).status);
    }
  }
 else {
    List<JetType> typeArguments=new ArrayList<JetType>();
    for (    JetTypeProjection projection : jetTypeArguments) {
      if (projection.getProjectionKind() != JetProjectionKind.NONE) {
        context.trace.report(PROJECTION_ON_NON_CLASS_TYPE_ARGUMENT.on(projection));
      }
      typeArguments.add(argumentTypeResolver.resolveTypeRefWithDefault(projection.getTypeReference(),context.scope,context.trace,ErrorUtils.createErrorType("Star projection in a call")));
    }
    int expectedTypeArgumentCount=candidate.getTypeParameters().size();
    if (expectedTypeArgumentCount == jetTypeArguments.size()) {
      checkGenericBoundsInAFunctionCall(jetTypeArguments,typeArguments,candidate,context.trace);
      Map<TypeConstructor,TypeProjection> substitutionContext=FunctionDescriptorUtil.createSubstitutionContext((FunctionDescriptor)candidate,typeArguments);
      TypeSubstitutor substitutor=TypeSubstitutor.create(substitutionContext);
      candidateCall.setResultingSubstitutor(substitutor);
      candidateCall.addStatus(checkAllValueArguments(context,SHAPE_FUNCTION_ARGUMENTS).status);
    }
 else {
      candidateCall.addStatus(OTHER_ERROR);
      context.tracing.wrongNumberOfTypeArguments(context.trace,expectedTypeArgumentCount);
    }
  }
  task.performAdvancedChecks(candidate,context.trace,context.tracing);
  JetSuperExpression superExpression=TaskPrioritizer.getReceiverSuper(candidateCall.getReceiverArgument());
  if (superExpression != null) {
    context.trace.report(SUPER_IS_NOT_AN_EXPRESSION.on(superExpression,superExpression.getText()));
    candidateCall.addStatus(OTHER_ERROR);
  }
}
