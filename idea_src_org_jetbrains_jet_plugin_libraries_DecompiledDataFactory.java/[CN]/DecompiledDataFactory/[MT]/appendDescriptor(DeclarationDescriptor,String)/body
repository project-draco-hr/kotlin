{
  int startOffset=builder.length();
  String renderedDescriptor=DescriptorRendererImpl.COMPACT_WITH_MODIFIERS.render(descriptor);
  renderedDescriptor=renderedDescriptor.replace("= ...","= " + DECOMPILED_COMMENT);
  builder.append(renderedDescriptor);
  int endOffset=builder.length();
  if (descriptor instanceof FunctionDescriptor || descriptor instanceof PropertyDescriptor) {
    if (((CallableMemberDescriptor)descriptor).getModality() != Modality.ABSTRACT) {
      if (descriptor instanceof FunctionDescriptor) {
        builder.append(" { ").append(DECOMPILED_COMMENT).append(" }");
        endOffset=builder.length();
      }
 else {
        if (((PropertyDescriptor)descriptor).getModality() != Modality.ABSTRACT) {
          builder.append(" ").append(DECOMPILED_COMMENT);
        }
      }
    }
  }
 else   if (descriptor instanceof ClassDescriptor) {
    builder.append(" {\n");
    ClassDescriptor classDescriptor=(ClassDescriptor)descriptor;
    boolean firstPassed=false;
    String subindent=indent + "    ";
    if (classDescriptor.getClassObjectDescriptor() != null) {
      firstPassed=true;
      builder.append(subindent);
      appendDescriptor(classDescriptor.getClassObjectDescriptor(),subindent);
    }
    for (    DeclarationDescriptor member : sortDeclarations(classDescriptor.getDefaultType().getMemberScope().getAllDescriptors())) {
      if (member.getContainingDeclaration() != descriptor) {
        continue;
      }
      if (member instanceof CallableMemberDescriptor && ((CallableMemberDescriptor)member).getKind() != CallableMemberDescriptor.Kind.DECLARATION) {
        continue;
      }
      if (firstPassed) {
        builder.append("\n");
      }
 else {
        firstPassed=true;
      }
      builder.append(subindent);
      appendDescriptor(member,subindent);
    }
    builder.append(indent).append("}");
    endOffset=builder.length();
  }
  builder.append("\n");
  PsiElement clsMember=BindingContextUtils.descriptorToDeclaration(bindingContext,descriptor);
  if (clsMember != null) {
    clsMembersToRanges.put(clsMember,new TextRange(startOffset,endOffset));
  }
}
