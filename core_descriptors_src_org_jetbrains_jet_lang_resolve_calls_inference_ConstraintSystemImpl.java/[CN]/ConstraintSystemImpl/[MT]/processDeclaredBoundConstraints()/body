{
  for (  Map.Entry<TypeParameterDescriptor,TypeBoundsImpl> entry : typeParameterBounds.entrySet()) {
    TypeParameterDescriptor typeParameterDescriptor=entry.getKey();
    TypeBoundsImpl typeBounds=entry.getValue();
    for (    JetType declaredUpperBound : typeParameterDescriptor.getUpperBounds()) {
      Collection<Bound> bounds=new ArrayList<Bound>(typeBounds.getBounds());
      for (      Bound bound : bounds) {
        if (bound.kind == LOWER_BOUND || bound.kind == EXACT_BOUND) {
          ConstraintPosition position=ConstraintPosition.getCompoundConstraintPosition(ConstraintPosition.getTypeBoundPosition(typeParameterDescriptor.getIndex()),bound.position);
          addSubtypeConstraint(bound.type,declaredUpperBound,position);
        }
      }
      ClassifierDescriptor declarationDescriptor=declaredUpperBound.getConstructor().getDeclarationDescriptor();
      if (declarationDescriptor instanceof TypeParameterDescriptor && typeParameterBounds.containsKey(declarationDescriptor)) {
        TypeBoundsImpl typeBoundsForUpperBound=typeParameterBounds.get(declarationDescriptor);
        for (        Bound bound : typeBoundsForUpperBound.getBounds()) {
          if (bound.kind == UPPER_BOUND || bound.kind == EXACT_BOUND) {
            ConstraintPosition position=ConstraintPosition.getCompoundConstraintPosition(ConstraintPosition.getTypeBoundPosition(typeParameterDescriptor.getIndex()),bound.position);
            typeBounds.addBound(UPPER_BOUND,bound.type,position);
          }
        }
      }
    }
  }
}
