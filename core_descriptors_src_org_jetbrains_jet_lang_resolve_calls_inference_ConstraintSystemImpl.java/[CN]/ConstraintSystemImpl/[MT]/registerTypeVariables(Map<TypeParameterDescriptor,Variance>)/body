{
  for (  Map.Entry<TypeParameterDescriptor,Variance> entry : typeVariables.entrySet()) {
    TypeParameterDescriptor typeVariable=entry.getKey();
    Variance positionVariance=entry.getValue();
    typeParameterConstraints.put(typeVariable,new TypeConstraintsImpl(typeVariable,positionVariance));
  }
  TypeSubstitutor constantSubstitutor=TypeUtils.makeConstantSubstitutor(typeParameterConstraints.keySet(),DONT_CARE);
  for (  Map.Entry<TypeParameterDescriptor,TypeConstraintsImpl> entry : typeParameterConstraints.entrySet()) {
    TypeParameterDescriptor typeVariable=entry.getKey();
    TypeConstraintsImpl typeConstraints=entry.getValue();
    for (    JetType declaredUpperBound : typeVariable.getUpperBounds()) {
      if (KotlinBuiltIns.getInstance().getNullableAnyType().equals(declaredUpperBound))       continue;
      JetType substitutedBound=constantSubstitutor.substitute(declaredUpperBound,Variance.INVARIANT);
      if (substitutedBound != null) {
        typeConstraints.addConstraint(UPPER_BOUND,substitutedBound,ConstraintPosition.getTypeBoundPosition(typeVariable.getIndex()));
      }
    }
  }
}
