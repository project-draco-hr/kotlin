{
  if (psiReference != null) {
    PsiElement resolvedTo=psiReference.resolve();
    if (resolvedTo != null) {
      String resolvedToElementStr=ReferenceUtils.renderAsGotoImplementation(resolvedTo);
      String notEqualMessage=String.format("Found reference to '%s', but '%s' was expected",resolvedToElementStr,expectedResolveData.getReferenceString());
      assertEquals(notEqualMessage,expectedResolveData.getReferenceString(),resolvedToElementStr);
    }
 else {
      if (!expectedResolveData.shouldBeUnresolved()) {
        Assert.assertNull(String.format("Element %s wasn't resolved to anything, but %s was expected",psiReference,expectedResolveData.getReferenceString()),expectedResolveData.getReferenceString());
      }
    }
  }
 else {
    Assert.assertNull(String.format("No reference found at offset: %s, but one resolved to %s was expected",offset,expectedResolveData.getReferenceString()),expectedResolveData.getReferenceString());
  }
}
