{
  ClassDescriptor lastClassDescriptor=null;
  boolean declaredVar=false;
  List<JetNamedFunction> functions=JetTestFunctionDetector.findTestFunctions(context.bindingContext(),files);
  for (  JetNamedFunction function : functions) {
    FunctionDescriptor functionDescriptor=getFunctionDescriptor(context.bindingContext(),function);
    String funName=functionDescriptor.getName().getName();
    DeclarationDescriptor containingDeclaration=functionDescriptor.getContainingDeclaration();
    if (containingDeclaration instanceof ClassDescriptor) {
      ClassDescriptor classDescriptor=(ClassDescriptor)containingDeclaration;
      String className=getQualifiedName(classDescriptor);
      if (lastClassDescriptor != classDescriptor) {
        lastClassDescriptor=classDescriptor;
        String prefix="";
        if (!declaredVar) {
          prefix="var ";
          declaredVar=true;
        }
        rawStatements.add(prefix + "_testCase = new Kotlin.main." + className+ "();");
      }
      rawStatements.add("QUnit.test( \"" + className + "."+ funName+ "()\" , function() {");
      rawStatements.add("    _testCase." + funName + "();");
    }
 else {
      rawStatements.add("QUnit.test( \"" + funName + "()\", function() {");
      rawStatements.add("    " + funName + "();");
    }
    rawStatements.add("});");
  }
}
