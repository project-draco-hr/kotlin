{
  String before=null;
  if (trace && v instanceof JsModVisitor) {
    before=this.toSource();
    if (traceFirst) {
      traceFirst=false;
      trace("SCRIPT INITIAL",before);
    }
  }
  if (v.visit(this,ctx)) {
    v.acceptWithInsertRemove(params);
    body=v.accept(body);
  }
  v.endVisit(this,ctx);
  if (trace && v instanceof JsModVisitor) {
    String after=this.toSource();
    if (!after.equals(before)) {
      String title=v.getClass().getSimpleName();
      trace(title,after);
    }
  }
}
