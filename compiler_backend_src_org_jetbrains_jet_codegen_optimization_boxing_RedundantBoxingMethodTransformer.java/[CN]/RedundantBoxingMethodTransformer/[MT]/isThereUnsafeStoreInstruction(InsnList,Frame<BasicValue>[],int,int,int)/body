{
  Type usedAsType=null;
  for (int i=from; i <= to; i++) {
    AbstractInsnNode insn=insnList.get(i);
    if (insn.getOpcode() == Opcodes.ASTORE && ((VarInsnNode)insn).var == varIndex) {
      if (frames[i] == null) {
        return true;
      }
      BasicValue top=frames[i].getStack(frames[i].getStackSize() - 1);
      if (!(top instanceof BoxedBasicValue) || !((BoxedBasicValue)top).isSafeToRemove()) {
        return true;
      }
      if (usedAsType == null) {
        usedAsType=((BoxedBasicValue)top).getPrimitiveType();
      }
      if (!usedAsType.equals(((BoxedBasicValue)top).getPrimitiveType())) {
        return true;
      }
    }
  }
  return false;
}
