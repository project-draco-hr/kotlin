{
  Collection<DeclarationDescriptor> allDescriptors=Sets.newHashSet();
  if (resolverScopeData.psiClass != null) {
    if (predicate.includeKind(DescriptorPredicate.DescriptorKind.CALLABLE_MEMBER)) {
      allDescriptors.addAll(semanticServices.getDescriptorResolver().resolveMethods(resolverScopeData,predicate.asNamePredicate()));
      allDescriptors.addAll(semanticServices.getDescriptorResolver().resolveFieldGroup(resolverScopeData,predicate.asNamePredicate()));
    }
    if (predicate.includeKind(DescriptorPredicate.DescriptorKind.CLASS)) {
      if (getContainingDeclaration() instanceof JavaNamespaceDescriptor) {
        allDescriptors.addAll(semanticServices.getDescriptorResolver().resolveInnerClasses(resolverScopeData.classOrNamespaceDescriptor,resolverScopeData.psiClass,false));
      }
 else {
        allDescriptors.addAll(semanticServices.getDescriptorResolver().resolveInnerClasses(resolverScopeData.classOrNamespaceDescriptor,resolverScopeData.psiClass,resolverScopeData.staticMembers));
      }
    }
  }
  if (resolverScopeData.psiPackage != null) {
    boolean isKotlinNamespace=semanticServices.getKotlinNamespaceDescriptor(resolverScopeData.fqName) != null;
    final JavaDescriptorResolver descriptorResolver=semanticServices.getDescriptorResolver();
    if (predicate.includeKind(DescriptorPredicate.DescriptorKind.NAMESPACE)) {
      for (      PsiPackage psiSubPackage : resolverScopeData.psiPackage.getSubPackages()) {
        NamespaceDescriptor childNs=descriptorResolver.resolveNamespace(new FqName(psiSubPackage.getQualifiedName()),DescriptorSearchRule.IGNORE_IF_FOUND_IN_KOTLIN);
        if (childNs != null) {
          allDescriptors.add(childNs);
        }
      }
    }
    if (predicate.includeKind(DescriptorPredicate.DescriptorKind.CLASS)) {
      for (      PsiClass psiClass : resolverScopeData.psiPackage.getClasses()) {
        if (isKotlinNamespace && JvmAbi.PACKAGE_CLASS.equals(psiClass.getName())) {
          continue;
        }
        if (psiClass instanceof JetJavaMirrorMarker) {
          continue;
        }
        if (JvmAbi.PACKAGE_CLASS.equals(psiClass.getName())) {
          continue;
        }
        if (psiClass.hasModifierProperty(PsiModifier.PUBLIC)) {
          ClassDescriptor classDescriptor=descriptorResolver.resolveClass(new FqName(psiClass.getQualifiedName()),DescriptorSearchRule.IGNORE_IF_FOUND_IN_KOTLIN);
          if (classDescriptor != null) {
            allDescriptors.add(classDescriptor);
          }
        }
      }
    }
  }
  return DescriptorPredicateUtils.filter(allDescriptors,predicate);
}
