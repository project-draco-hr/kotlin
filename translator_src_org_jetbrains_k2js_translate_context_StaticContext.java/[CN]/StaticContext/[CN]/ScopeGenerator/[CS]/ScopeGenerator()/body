{
  Rule<NamingScope> generateNewScopesForNamespaceDescriptors=new Rule<NamingScope>(){
    @Override public NamingScope apply(    @NotNull DeclarationDescriptor descriptor){
      if (!(descriptor instanceof NamespaceDescriptor)) {
        return null;
      }
      return getRootScope().innerScope("Namespace " + descriptor.getName());
    }
  }
;
  Rule<NamingScope> generateInnerScopesForMembers=new Rule<NamingScope>(){
    @Override public NamingScope apply(    @NotNull DeclarationDescriptor descriptor){
      NamingScope enclosingScope=getEnclosingScope(descriptor);
      return enclosingScope.innerScope("scope for member " + descriptor.getName());
    }
  }
;
  addRule(generateNewScopesForNamespaceDescriptors);
  addRule(generateInnerScopesForMembers);
}
