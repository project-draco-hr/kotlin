{
  KotlinTestUtils.compileJavaFiles(Collections.singletonList(new File(getTestDataDirectory() + "/library/test/A.java")),Arrays.asList("-d",tmpdir.getPath()));
  File libSrc=new File(getTestDataDirectory(),"library/test/lib.kt");
  Pair<String,ExitCode> outputLib=AbstractCliTest.executeCompilerGrabOutput(new K2JVMCompiler(),Arrays.asList(libSrc.getPath(),"-classpath",tmpdir.getPath(),"-d",tmpdir.getPath()));
  File mainSrc=new File(getTestDataDirectory(),"main.kt");
  Pair<String,ExitCode> outputMain=AbstractCliTest.executeCompilerGrabOutput(new K2JVMCompiler(),Arrays.asList(mainSrc.getPath(),"-classpath",tmpdir.getPath(),"-d",tmpdir.getPath()));
  KotlinTestUtils.assertEqualsToFile(new File(getTestDataDirectory(),"output.txt"),normalizeOutput(outputLib) + "\n" + normalizeOutput(outputMain));
}
