{
  CompilerDependencies compilerDependencies=CompileCompilerDependenciesTest.compilerDependenciesForTests(CompilerSpecialMode.JDK_HEADERS,false);
  ReplInterpreter repl=new ReplInterpreter(disposable,compilerDependencies,Collections.singletonList(new File("out/production/runtime")));
  ReplSessionTestFile file=ReplSessionTestFile.load(new File("compiler/testData/repl/" + relativePath));
  for (  Pair<String,String> t : file.getLines()) {
    String code=t.first;
    String expected=t.second;
    Object actual=repl.eval(code).getValue();
    String actualString=actual != null ? actual.toString() : "null";
    Assert.assertEquals("after evaluation of: " + code,actualString,expected);
  }
}
