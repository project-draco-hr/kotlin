{
  Disposable disposable=new Disposable(){
    @Override public void dispose(){
    }
  }
;
  CompilerDependencies dependencies=CompilerDependencies.compilerDependenciesForProduction(CompilerSpecialMode.REGULAR);
  JetCoreEnvironment scriptEnvironment=new JetCoreEnvironment(disposable,dependencies);
  ensureRuntime(scriptEnvironment,dependencies);
  scriptEnvironment.addSources(moduleFile);
  GenerationState generationState=KotlinToJVMBytecodeCompiler.analyzeAndGenerate(scriptEnvironment,dependencies,messageRenderer,errorStream,verbose,false);
  if (generationState == null) {
    return null;
  }
  List<Module> modules=runDefineModules(dependencies,moduleFile,generationState.getFactory());
  Disposer.dispose(disposable);
  return modules;
}
