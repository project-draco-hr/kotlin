{
  final JetNamespace namespace=((JetFile)psiFile).getRootNamespace();
  NamespaceCodegen codegen=forNamespace(namespace);
  final BindingContext bindingContext=AnalyzingUtils.analyzeNamespace(namespace,JetControlFlowDataTraceFactory.EMPTY);
  bindingContexts.push(bindingContext);
  typeMapper=new JetTypeMapper(standardLibrary,bindingContext);
  try {
    AnalyzingUtils.applyHandler(ErrorHandler.THROW_EXCEPTION,bindingContext);
    codegen.generate(namespace);
  }
  finally {
    bindingContexts.pop();
    typeMapper=null;
  }
}
