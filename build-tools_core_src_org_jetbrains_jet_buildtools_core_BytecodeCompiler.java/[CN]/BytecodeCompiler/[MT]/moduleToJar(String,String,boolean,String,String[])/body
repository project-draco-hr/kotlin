{
  try {
    K2JVMCompileEnvironmentConfiguration env=env(stdlib,classpath);
    List<Module> modules=CompileEnvironmentUtil.loadModuleScript(module,env.getMessageCollector());
    File directory=new File(module).getParentFile();
    boolean success=KotlinToJVMBytecodeCompiler.compileModules(env,modules,directory,new File(jar),null,includeRuntime);
    if (!success) {
      throw new CompileEnvironmentException(errorMessage(module,false));
    }
  }
 catch (  Exception e) {
    throw new CompileEnvironmentException(errorMessage(module,true),e);
  }
}
