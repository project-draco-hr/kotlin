{
  mParser=parser;
  mAllDetectors=xmlDetectors;
  mBinaryDetectors=binaryDetectors;
  for (  Detector detector : xmlDetectors) {
    Detector.XmlScanner xmlDetector=(XmlScanner)detector;
    Collection<String> attributes=xmlDetector.getApplicableAttributes();
    if (attributes == XmlScanner.ALL) {
      mAllAttributeDetectors.add(xmlDetector);
    }
 else     if (attributes != null) {
      for (      String attribute : attributes) {
        List<Detector.XmlScanner> list=mAttributeToCheck.get(attribute);
        if (list == null) {
          list=new ArrayList<Detector.XmlScanner>();
          mAttributeToCheck.put(attribute,list);
        }
        list.add(xmlDetector);
      }
    }
    Collection<String> elements=xmlDetector.getApplicableElements();
    if (elements == XmlScanner.ALL) {
      mAllElementDetectors.add(xmlDetector);
    }
 else     if (elements != null) {
      for (      String element : elements) {
        List<Detector.XmlScanner> list=mElementToCheck.get(element);
        if (list == null) {
          list=new ArrayList<Detector.XmlScanner>();
          mElementToCheck.put(element,list);
        }
        list.add(xmlDetector);
      }
    }
    if ((attributes == null || (attributes.isEmpty() && attributes != XmlScanner.ALL)) && (elements == null || (elements.isEmpty() && elements != XmlScanner.ALL))) {
      mDocumentDetectors.add(xmlDetector);
    }
  }
}
