{
  MembersCache membersCache=new MembersCache();
  if (psiClass != null) {
    membersCache.new ClassMemberProcessor(psiClass,staticMembers).process();
    Collection<PsiClass> innerClasses=DescriptorResolverUtils.filterDuplicateClasses(psiClass.getInnerClasses());
    membersCache.new ExtraPackageMembersProcessor(innerClasses).process();
  }
 else   if (psiPackage != null) {
    Collection<PsiClass> classes=DescriptorResolverUtils.filterDuplicateClasses(psiPackage.getClasses());
    membersCache.new ExtraPackageMembersProcessor(classes).process();
  }
  return membersCache;
}
