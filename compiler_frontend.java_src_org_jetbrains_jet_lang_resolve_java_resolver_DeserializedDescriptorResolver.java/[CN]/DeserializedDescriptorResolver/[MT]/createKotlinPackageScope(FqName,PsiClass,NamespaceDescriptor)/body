{
  VirtualFile virtualFile=kotlinPackagePsiClass.getContainingFile().getVirtualFile();
  if (virtualFile == null) {
    throw new IllegalStateException("Could not find virtual file for " + fqName.asString());
  }
  PackageData packageData=readPackageDataFromClassFile(virtualFile);
  if (packageData == null) {
    throw new IllegalStateException("No KotlinInfo annotation stored for " + fqName.asString());
  }
  return DeserializedPackageMemberScope.createScopeFromPackageData(packageDescriptor,packageData,javaDescriptorFinder,annotationDeserializer,storageManager);
}
