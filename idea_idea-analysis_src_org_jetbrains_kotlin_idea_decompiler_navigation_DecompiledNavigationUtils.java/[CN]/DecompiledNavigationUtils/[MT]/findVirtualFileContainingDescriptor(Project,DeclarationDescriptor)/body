{
  if (ErrorUtils.isError(referencedDescriptor))   return null;
  ClassId containerClassId=getContainerClassId(project,referencedDescriptor);
  if (containerClassId == null)   return null;
  GlobalSearchScope scopeToSearchIn=JetSourceFilterScope.kotlinSourceAndClassFiles(GlobalSearchScope.allScope(project),project);
  VirtualFileFinderFactory virtualFileFinderFactory;
  if (isFromKotlinJavasriptMetadata(referencedDescriptor)) {
    virtualFileFinderFactory=JsVirtualFileFinderFactory.SERVICE.getInstance(project);
  }
 else {
    virtualFileFinderFactory=JvmVirtualFileFinderFactory.SERVICE.getInstance(project);
  }
  VirtualFileFinder fileFinder=virtualFileFinderFactory.create(scopeToSearchIn);
  return fileFinder.findVirtualFileWithHeader(containerClassId);
}
