{
  if (canBeCast) {
    trace.record(SMARTCAST,expression,type);
    if (recordExpressionType) {
      trace.recordType(expression,type);
    }
  }
 else {
    trace.report(SMARTCAST_IMPOSSIBLE.on(expression,type,expression.getText()));
  }
  return canBeCast;
}
