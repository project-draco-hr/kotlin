{
  ReferencesSearch.search(declaration,declaration.getUseScope()).forEach(new Processor<PsiReference>(){
    @Override public boolean process(    PsiReference reference){
      PsiElement element=reference.getElement();
      if (!isInside(element,allElementsToDelete)) {
        JetImportDirective importDirective=PsiTreeUtil.getParentOfType(element,JetImportDirective.class,false);
        if (importDirective != null) {
          result.add(new SafeDeleteImportDirectiveUsageInfo(importDirective,declaration));
        }
 else {
          result.add(new SafeDeleteReferenceSimpleDeleteUsageInfo(element,declaration,false));
        }
      }
      return true;
    }
  }
);
  return getSearchInfo(declaration,allElementsToDelete);
}
