{
  PsiMethod method=(PsiMethod)parameter.getDeclarationScope();
  int parameterIndex=method.getParameterList().getParameterIndex(parameter);
  Set<PsiElement> parametersToDelete=collectParametersToDelete(method,parameterIndex);
  if (parametersToDelete.size() > 1) {
    if (ApplicationManager.getApplication().isUnitTestMode()) {
      return parametersToDelete;
    }
    String message=JetBundle.message("delete.param.in.method.hierarchy",JetRefactoringUtil.formatJavaOrLightMethod(method));
    int exitCode=Messages.showOkCancelDialog(parameter.getProject(),message,IdeBundle.message("title.warning"),Messages.getQuestionIcon());
    if (exitCode == Messages.OK) {
      return parametersToDelete;
    }
 else {
      return null;
    }
  }
  return parametersToDelete;
}
