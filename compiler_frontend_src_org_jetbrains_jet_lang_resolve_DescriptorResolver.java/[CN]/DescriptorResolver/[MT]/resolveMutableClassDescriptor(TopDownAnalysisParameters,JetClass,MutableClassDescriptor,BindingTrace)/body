{
  List<TypeParameterDescriptor> typeParameters=Lists.newArrayList();
  int index=0;
  for (  JetTypeParameter typeParameter : classElement.getTypeParameters()) {
    if (!topDownAnalysisParameters.isLazyTopDownAnalysis()) {
      AnnotationResolver.reportUnsupportedAnnotationForTypeParameter(typeParameter,trace);
    }
    TypeParameterDescriptor typeParameterDescriptor=TypeParameterDescriptorImpl.createForFurtherModification(descriptor,Annotations.EMPTY,typeParameter.hasModifier(JetTokens.REIFIED_KEYWORD),typeParameter.getVariance(),JetPsiUtil.safeName(typeParameter.getName()),index);
    trace.record(BindingContext.TYPE_PARAMETER,typeParameter,typeParameterDescriptor);
    typeParameters.add(typeParameterDescriptor);
    index++;
  }
  descriptor.setTypeParameterDescriptors(typeParameters);
  Modality defaultModality=descriptor.getKind() == ClassKind.TRAIT ? Modality.ABSTRACT : Modality.FINAL;
  descriptor.setModality(resolveModalityFromModifiers(classElement,defaultModality));
  descriptor.setVisibility(resolveVisibilityFromModifiers(classElement,getDefaultClassVisibility(descriptor)));
  trace.record(BindingContext.CLASS,classElement,descriptor);
}
