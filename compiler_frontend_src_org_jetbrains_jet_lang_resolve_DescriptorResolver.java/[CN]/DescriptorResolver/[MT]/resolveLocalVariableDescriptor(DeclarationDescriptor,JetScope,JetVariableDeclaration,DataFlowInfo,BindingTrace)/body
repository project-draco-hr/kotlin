{
  if (JetPsiUtil.isScriptDeclaration(variable)) {
    PropertyDescriptorImpl propertyDescriptor=new PropertyDescriptorImpl(containingDeclaration,annotationResolver.getResolvedAnnotations(variable.getModifierList(),trace),Modality.FINAL,Visibilities.INTERNAL,variable.isVar(),JetPsiUtil.safeName(variable.getName()),CallableMemberDescriptor.Kind.DECLARATION);
    JetType type=getVariableType(propertyDescriptor,scope,variable,dataFlowInfo,false,trace);
    ReceiverParameterDescriptor receiverParameter=((ScriptDescriptor)containingDeclaration).getThisAsReceiverParameter();
    propertyDescriptor.setType(type,Collections.<TypeParameterDescriptor>emptyList(),receiverParameter,(JetType)null);
    trace.record(BindingContext.VARIABLE,variable,propertyDescriptor);
    return propertyDescriptor;
  }
 else {
    VariableDescriptorImpl variableDescriptor=resolveLocalVariableDescriptorWithType(containingDeclaration,variable,null,trace);
    JetType type=getVariableType(variableDescriptor,scope,variable,dataFlowInfo,false,trace);
    variableDescriptor.setOutType(type);
    return variableDescriptor;
  }
}
