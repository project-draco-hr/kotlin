{
  if (modifierList == null)   return defaultModality;
  boolean hasAbstractModifier=modifierList.hasModifier(JetTokens.ABSTRACT_KEYWORD);
  boolean hasOverrideModifier=modifierList.hasModifier(JetTokens.OVERRIDE_KEYWORD);
  if (modifierList.hasModifier(JetTokens.OPEN_KEYWORD)) {
    if (hasAbstractModifier || defaultModality == Modality.ABSTRACT) {
      return Modality.ABSTRACT;
    }
    return Modality.OPEN;
  }
  if (hasAbstractModifier) {
    return Modality.ABSTRACT;
  }
  boolean hasFinalModifier=modifierList.hasModifier(JetTokens.FINAL_KEYWORD);
  if (hasOverrideModifier && !hasFinalModifier && !(defaultModality == Modality.ABSTRACT)) {
    return Modality.OPEN;
  }
  if (hasFinalModifier) {
    return Modality.FINAL;
  }
  return defaultModality;
}
