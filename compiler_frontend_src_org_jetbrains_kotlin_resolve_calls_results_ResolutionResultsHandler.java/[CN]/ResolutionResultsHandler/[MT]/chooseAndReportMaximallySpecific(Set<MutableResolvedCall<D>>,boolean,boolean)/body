{
  if (candidates.size() == 1) {
    return OverloadResolutionResultsImpl.success(candidates.iterator().next());
  }
  Set<MutableResolvedCall<D>> noOverrides=OverrideResolver.filterOutOverridden(candidates,MAP_TO_RESULT);
  if (noOverrides.size() == 1) {
    return OverloadResolutionResultsImpl.success(noOverrides.iterator().next());
  }
 else   if (!resolveOverloads) {
    return OverloadResolutionResultsImpl.ambiguity(noOverrides);
  }
  MutableResolvedCall<D> maximallySpecific=overloadingConflictResolver.findMaximallySpecific(noOverrides,false);
  if (maximallySpecific != null) {
    return OverloadResolutionResultsImpl.success(maximallySpecific);
  }
  if (discriminateGenerics) {
    MutableResolvedCall<D> maximallySpecificGenericsDiscriminated=overloadingConflictResolver.findMaximallySpecific(noOverrides,true);
    if (maximallySpecificGenericsDiscriminated != null) {
      return OverloadResolutionResultsImpl.success(maximallySpecificGenericsDiscriminated);
    }
  }
  return OverloadResolutionResultsImpl.ambiguity(noOverrides);
}
