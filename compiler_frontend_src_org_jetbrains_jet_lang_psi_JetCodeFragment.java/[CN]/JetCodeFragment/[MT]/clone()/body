{
  JetCodeFragment clone=(JetCodeFragment)cloneImpl((FileElement)calcTreeElement().clone());
  clone.myOriginalFile=this;
  FileManager fileManager=((PsiManagerEx)PsiManager.getInstance(project)).getFileManager();
  SingleRootFileViewProvider cloneViewProvider=(SingleRootFileViewProvider)fileManager.createFileViewProvider(new LightVirtualFile(getName(),JetFileType.INSTANCE,getText()),true);
  cloneViewProvider.forceCachedPsi(clone);
  clone.myViewProvider=cloneViewProvider;
  return clone;
}
