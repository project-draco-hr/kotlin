{
  PsiElement element=queryParameters.getElementToSearch();
  if (element instanceof JetClass) {
    String className=((JetClass)element).getName();
    if (className != null) {
      JetLightClass lightClass=JetLightClass.wrapDelegate((JetClass)element);
      if (lightClass != null) {
        queryParameters.getOptimizer().searchWord(className,queryParameters.getScope(),true,lightClass);
      }
    }
  }
 else   if (element instanceof JetFunction) {
    final JetFunction function=(JetFunction)element;
    final String name=function.getName();
    if (function.getParent() instanceof JetClassBody && name != null) {
      final PsiMethod method=ApplicationManager.getApplication().runReadAction(new Computable<PsiMethod>(){
        @Override public PsiMethod compute(){
          return JetLightClass.wrapMethod(function);
        }
      }
);
      if (method != null) {
        PsiMethod target=JetLightClass.wrapMethod((JetFunction)element);
        if (target != null) {
          queryParameters.getOptimizer().searchWord(name,queryParameters.getScope(),true,target);
        }
      }
    }
  }
}
