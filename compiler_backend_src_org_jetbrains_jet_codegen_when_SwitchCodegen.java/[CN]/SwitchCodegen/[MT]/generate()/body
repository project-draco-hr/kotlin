{
  prepareConfiguration();
  boolean hasElse=expression.getElseExpression() != null;
  generateSubject();
  defaultLabel=(hasElse || !isStatement) ? elseLabel : endLabel;
  generateSwitchInstructionByTransitionsTable();
  generateEntries();
  if (!hasElse && !isStatement) {
    v.visitLabel(elseLabel);
    codegen.putUnitInstanceOntoStackForNonExhaustiveWhen(expression);
  }
  codegen.markLineNumber(expression);
  v.mark(endLabel);
}
