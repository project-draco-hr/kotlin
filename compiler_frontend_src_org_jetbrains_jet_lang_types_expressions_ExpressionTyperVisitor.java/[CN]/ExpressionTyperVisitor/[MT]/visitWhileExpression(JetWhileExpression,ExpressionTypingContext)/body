{
  ExpressionTypingContext context=contextWithExpectedType.replaceExpectedType(TypeUtils.NO_EXPECTED_TYPE);
  JetExpression condition=expression.getCondition();
  checkCondition(context.scope,condition,context);
  JetExpression body=expression.getBody();
  if (body != null) {
    WritableScopeImpl scopeToExtend=newWritableScopeImpl(context.scope,context.trace).setDebugName("Scope extended in while's condition");
    DataFlowInfo conditionInfo=condition == null ? context.dataFlowInfo : extractDataFlowInfoFromCondition(condition,true,scopeToExtend,context);
    getTypeWithNewScopeAndDataFlowInfo(scopeToExtend,body,conditionInfo,context);
  }
  if (!containsBreak(expression,context)) {
    resultDataFlowInfo=extractDataFlowInfoFromCondition(condition,false,null,context);
  }
  return context.getServices().checkType(JetStandardClasses.getUnitType(),expression,contextWithExpectedType);
}
