{
  if (!slice.check(key,value)) {
    return;
  }
  SlicedMapKey<K,V> slicedMapKey=slice.makeKey(key);
  RewritePolicy rewritePolicy=slice.getRewritePolicy();
  if (rewritePolicy.rewriteProcessingNeeded(key)) {
    if (map.containsKey(slicedMapKey)) {
      if (!rewritePolicy.processRewrite(slice,key,(V)map.get(slicedMapKey),value)) {
        return;
      }
    }
  }
  if (slice.isCollective()) {
    collectiveSliceKeys.put(slice,key);
  }
  map.put(slicedMapKey,value);
  slice.afterPut(this,key,value);
}
