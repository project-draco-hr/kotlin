{
  if (descriptor.getKind().isReal())   return;
  if (descriptor.getVisibility() == Visibilities.INVISIBLE_FAKE)   return;
  Collection<? extends CallableMemberDescriptor> directOverridden=descriptor.getOverriddenDescriptors();
  if (directOverridden.size() == 0) {
    throw new IllegalStateException("A 'fake override' must override something");
  }
  Map<CallableMemberDescriptor,Set<CallableMemberDescriptor>> overriddenDeclarationsByDirectParent=collectOverriddenDeclarations(directOverridden);
  List<CallableMemberDescriptor> allOverriddenDeclarations=ContainerUtil.flatten(overriddenDeclarationsByDirectParent.values());
  Set<CallableMemberDescriptor> allFilteredOverriddenDeclarations=OverridingUtil.filterOutOverridden(Sets.newLinkedHashSet(allOverriddenDeclarations));
  Set<CallableMemberDescriptor> relevantDirectlyOverridden=getRelevantDirectlyOverridden(overriddenDeclarationsByDirectParent,allFilteredOverriddenDeclarations);
  int implCount=countImplementations(relevantDirectlyOverridden);
  if (implCount == 0) {
    collectNotSynthesizedDescriptorsByModality(allFilteredOverriddenDeclarations,abstractNoImpl,Modality.ABSTRACT);
  }
 else   if (implCount > 1) {
    collectNotSynthesizedDescriptorsByModality(allFilteredOverriddenDeclarations,manyImpl,Modality.OPEN,Modality.FINAL);
  }
}
