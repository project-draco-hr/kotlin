{
  String outputFileName=targetSourceRoot + "/" + injectorPackageName.replace(".","/")+ "/"+ injectorClassName+ ".java";
  File file=new File(outputFileName);
  File parentFile=file.getParentFile();
  if (!parentFile.exists()) {
    if (parentFile.mkdirs()) {
      System.out.println("Directory created: " + parentFile.getAbsolutePath());
    }
 else {
      throw new IllegalStateException("Cannot create directory: " + parentFile);
    }
  }
  FileOutputStream fileOutputStream=new FileOutputStream(file);
  System.out.println("File opened: " + file.getAbsolutePath());
  PrintStream out=new PrintStream(fileOutputStream);
  try {
    for (    Field field : Lists.newArrayList(fields)) {
      satisfyDependenciesFor(field,field);
    }
    String copyright="injector-generator/copyright.txt";
    out.println(FileUtil.loadFile(new File(copyright)));
    out.println();
    out.println("package " + injectorPackageName + ";");
    out.println();
    generateImports(out,injectorPackageName);
    out.println();
    out.println("/* This file is generated by " + AllInjectorsGenerator.class.getName() + ". DO NOT EDIT! */");
    out.println("public class " + injectorClassName + " {");
    out.println();
    generateFields(out);
    out.println();
    generateConstructor(injectorClassName,out);
    out.println();
    generateGetters(out);
    out.println("}");
  }
  finally {
    fileOutputStream.close();
    System.out.println("File closed");
  }
}
