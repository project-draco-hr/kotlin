{
  Rule<JsExpression> standardObjectsHaveKotlinQualifier=new Rule<JsExpression>(){
    @Override public JsExpression apply(    @NotNull DeclarationDescriptor descriptor){
      if (!standardClasses.isStandardObject(descriptor)) {
        return null;
      }
      return namer.kotlinObject();
    }
  }
;
  Rule<JsExpression> packageLevelDeclarationsHaveEnclosingPackagesNamesAsQualifier=new Rule<JsExpression>(){
    @Override public JsExpression apply(    @NotNull DeclarationDescriptor descriptor){
      if (isNativeObject(descriptor))       return null;
      DeclarationDescriptor containingDescriptor=getContainingDeclaration(descriptor);
      if (!(containingDescriptor instanceof PackageFragmentDescriptor)) {
        return null;
      }
      JsNameRef result=getQualifierForParentPackage(((PackageFragmentDescriptor)containingDescriptor).getFqName());
      String moduleName=getExternalModuleName(descriptor);
      if (moduleName == null) {
        return result;
      }
      if (LibrarySourcesConfig.UNKNOWN_EXTERNAL_MODULE_NAME.equals(moduleName)) {
        return null;
      }
      return JsAstUtils.replaceRootReference(result,namer.getModuleReference(program.getStringLiteral(moduleName)));
    }
  }
;
  Rule<JsExpression> constructorOrCompanionObjectHasTheSameQualifierAsTheClass=new Rule<JsExpression>(){
    @Override public JsExpression apply(    @NotNull DeclarationDescriptor descriptor){
      if (descriptor instanceof ConstructorDescriptor || DescriptorUtils.isCompanionObject(descriptor)) {
        return getQualifierForDescriptor(descriptor.getContainingDeclaration());
      }
      return null;
    }
  }
;
  Rule<JsExpression> libraryObjectsHaveKotlinQualifier=new Rule<JsExpression>(){
    @Override public JsExpression apply(    @NotNull DeclarationDescriptor descriptor){
      if (isLibraryObject(descriptor)) {
        return namer.kotlinObject();
      }
      return null;
    }
  }
;
  Rule<JsExpression> nativeObjectsHaveNativePartOfFullQualifier=new Rule<JsExpression>(){
    @Override public JsExpression apply(    @NotNull DeclarationDescriptor descriptor){
      if (descriptor instanceof ConstructorDescriptor || !isNativeObject(descriptor))       return null;
      DeclarationDescriptor containingDeclaration=descriptor.getContainingDeclaration();
      if (containingDeclaration != null && isNativeObject(containingDeclaration)) {
        return getQualifiedReference(containingDeclaration);
      }
      return null;
    }
  }
;
  Rule<JsExpression> staticMembersHaveContainerQualifier=new Rule<JsExpression>(){
    @Override public JsExpression apply(    @NotNull DeclarationDescriptor descriptor){
      if (descriptor instanceof CallableDescriptor && !isNativeObject(descriptor)) {
        CallableDescriptor callableDescriptor=(CallableDescriptor)descriptor;
        if (DescriptorUtils.isStaticDeclaration(callableDescriptor)) {
          return getQualifiedReference(callableDescriptor.getContainingDeclaration());
        }
      }
      return null;
    }
  }
;
  Rule<JsExpression> nestedClassesHaveContainerQualifier=new Rule<JsExpression>(){
    @Nullable @Override public JsExpression apply(    @NotNull DeclarationDescriptor descriptor){
      if (!(descriptor instanceof ClassDescriptor)) {
        return null;
      }
      DeclarationDescriptor container=descriptor.getContainingDeclaration();
      if (container == null) {
        return null;
      }
      if (isNativeObject(descriptor)) {
        return null;
      }
      ClassDescriptor cls=(ClassDescriptor)descriptor;
      if (cls.getKind() == ClassKind.ENUM_ENTRY || cls.getKind() == ClassKind.OBJECT) {
        return null;
      }
      JsExpression result=getQualifiedReference(container);
      if (DescriptorUtils.isCompanionObject(container)) {
        result=Namer.getCompanionObjectAccessor(result);
      }
      return result;
    }
  }
;
  addRule(libraryObjectsHaveKotlinQualifier);
  addRule(constructorOrCompanionObjectHasTheSameQualifierAsTheClass);
  addRule(standardObjectsHaveKotlinQualifier);
  addRule(packageLevelDeclarationsHaveEnclosingPackagesNamesAsQualifier);
  addRule(nativeObjectsHaveNativePartOfFullQualifier);
  addRule(staticMembersHaveContainerQualifier);
  addRule(nestedClassesHaveContainerQualifier);
}
