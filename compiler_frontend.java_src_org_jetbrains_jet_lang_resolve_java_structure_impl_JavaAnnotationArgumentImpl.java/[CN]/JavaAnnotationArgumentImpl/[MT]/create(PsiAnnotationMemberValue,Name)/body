{
  Object value=JavaPsiFacade.getInstance(argument.getProject()).getConstantEvaluationHelper().computeConstantExpression(argument);
  if (value != null || argument instanceof PsiLiteralExpression) {
    return new JavaLiteralAnnotationArgumentImpl(name,value);
  }
  if (argument instanceof PsiReferenceExpression) {
    return new JavaEnumValueAnnotationArgumentImpl((PsiReferenceExpression)argument,name);
  }
 else   if (argument instanceof PsiArrayInitializerMemberValue) {
    return new JavaArrayAnnotationArgumentImpl((PsiArrayInitializerMemberValue)argument,name);
  }
 else   if (argument instanceof PsiAnnotation) {
    return new JavaAnnotationAsAnnotationArgumentImpl((PsiAnnotation)argument,name);
  }
 else   if (argument instanceof PsiClassObjectAccessExpression) {
    return new JavaClassObjectAnnotationArgumentImpl((PsiClassObjectAccessExpression)argument,name);
  }
 else {
    throw new UnsupportedOperationException("Unsupported annotation argument type: " + argument);
  }
}
