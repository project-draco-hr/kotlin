{
  ConstructorDescriptor constructorDescriptor=bindingContext.getConstructorDescriptor(constructor);
  if (constructorDescriptor == null) {
    throw new UnsupportedOperationException("failed to get descriptor for secondary constructor");
  }
  Method method=typeMapper.mapConstructorSignature(constructorDescriptor,kind);
  int flags=Opcodes.ACC_PUBLIC;
  final MethodVisitor mv=v.visitMethod(flags,"<init>",method.getDescriptor(),null,null);
  mv.visitCode();
  ConstructorFrameMap frameMap=new ConstructorFrameMap(typeMapper,constructorDescriptor,kind);
  final InstructionAdapter iv=new InstructionAdapter(mv);
  ExpressionCodegen codegen=new ExpressionCodegen(mv,bindingContext,frameMap,typeMapper,Type.VOID_TYPE,descriptor,kind,StackValue.local(0,typeMapper.jvmType(descriptor,kind)),factory);
  for (  JetDelegationSpecifier initializer : constructor.getInitializers()) {
    if (initializer instanceof JetDelegatorToThisCall) {
      JetDelegatorToThisCall thisCall=(JetDelegatorToThisCall)initializer;
      DeclarationDescriptor thisDescriptor=bindingContext.resolveReferenceExpression(thisCall.getThisReference());
      if (!(thisDescriptor instanceof ConstructorDescriptor)) {
        throw new UnsupportedOperationException("expected 'this' delegator to resolve to constructor");
      }
      generateDelegatorToConstructorCall(iv,codegen,thisCall,(ConstructorDescriptor)thisDescriptor,true,frameMap);
    }
 else {
      throw new UnsupportedOperationException("unknown initializer type");
    }
  }
  JetExpression bodyExpression=constructor.getBodyExpression();
  if (bodyExpression != null) {
    codegen.gen(bodyExpression,Type.VOID_TYPE);
  }
  mv.visitInsn(Opcodes.RETURN);
  mv.visitMaxs(0,0);
  mv.visitEnd();
}
