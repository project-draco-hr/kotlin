{
  List<JetDeclaration> declarations=declarationProvider.getAllDeclarations();
  ArrayList<DeclarationDescriptor> result=new ArrayList<DeclarationDescriptor>(declarations.size());
  for (  JetDeclaration declaration : declarations) {
    if (declaration instanceof JetClassOrObject) {
      JetClassOrObject classOrObject=(JetClassOrObject)declaration;
      result.addAll(classDescriptors.invoke(classOrObject.getNameAsSafeName()));
    }
 else     if (declaration instanceof JetFunction) {
      JetFunction function=(JetFunction)declaration;
      result.addAll(getFunctions(function.getNameAsSafeName()));
    }
 else     if (declaration instanceof JetProperty) {
      JetProperty property=(JetProperty)declaration;
      result.addAll(getProperties(property.getNameAsSafeName()));
    }
 else     if (declaration instanceof JetParameter) {
      JetParameter parameter=(JetParameter)declaration;
      result.addAll(getProperties(parameter.getNameAsSafeName()));
    }
 else     if (declaration instanceof JetScript) {
      result.addAll(classDescriptors.invoke(ScriptNameUtil.classNameForScript((JetScript)declaration).shortName()));
    }
 else     if (declaration instanceof JetTypedef || declaration instanceof JetMultiDeclaration) {
    }
 else {
      throw new IllegalArgumentException("Unsupported declaration kind: " + declaration);
    }
  }
  result.trimToSize();
  return result;
}
