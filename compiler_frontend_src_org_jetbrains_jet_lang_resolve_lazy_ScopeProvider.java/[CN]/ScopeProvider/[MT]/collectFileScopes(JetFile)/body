{
  List<JetScope> list=new ArrayList<JetScope>();
  list.add(getFilePackageDescriptor(file).getMemberScope());
  list.add(JetModuleUtil.getSubpackagesOfRootScope(resolveSession.getModuleDescriptor()));
  list.add(explicitImportScopes.invoke(file));
  if (additionalScopesProvider != null) {
    JetScope additionalScope=additionalScopesProvider.invoke(file);
    if (additionalScope != null) {
      list.add(additionalScope);
    }
  }
  list.add(defaultImportsScope.invoke());
  return list.toArray(new JetScope[list.size()]);
}
