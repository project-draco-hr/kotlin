{
  KotlinType unwrappedType=KotlinTypeKt.unwrap(type);
  if (unwrappedType instanceof TypeWithCustomReplacement) {
    return ((TypeWithCustomReplacement)unwrappedType).makeNullableAsSpecified(nullable);
  }
 else {
    SimpleType simpleType=(SimpleType)unwrappedType;
    if (!(simpleType instanceof LazyType) && simpleType.isMarkedNullable() == nullable)     return simpleType;
    return KotlinTypeKt.lazyReplaceNullability(simpleType,nullable);
  }
}
