{
  if (capturedVariables != null) {
    for (    CallableDescriptor variable : capturedVariables) {
      if (variable instanceof VariableDescriptor && isOneOfTheMyParentsIsAncestor((VariableDescriptor)variable,requestor)) {
        continue;
      }
      if (visited == null || visited.add(variable)) {
        consumer.consume(variable);
      }
    }
  }
  if (children != null) {
    for (    UsageTracker child : children) {
      child.forEachCaptured(consumer,requestor,visited);
    }
  }
}
