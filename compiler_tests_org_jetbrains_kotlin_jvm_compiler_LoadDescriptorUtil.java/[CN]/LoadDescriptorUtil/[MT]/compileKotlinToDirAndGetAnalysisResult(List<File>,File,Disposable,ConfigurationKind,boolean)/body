{
  KtFilesAndAnalysisResult filesAndResult=KtFilesAndAnalysisResult.createJetFilesAndAnalyze(kotlinFiles,disposable,configurationKind);
  AnalysisResult result=filesAndResult.getAnalysisResult();
  List<KtFile> files=filesAndResult.getKtFiles();
  GenerationState state=GenerationUtils.compileFilesGetGenerationState(files.get(0).getProject(),result,files,useTypeTableInSerializer);
  OutputUtilsKt.writeAllTo(state.getFactory(),outDir);
  return result;
}
