{
  List<JsExpression> arguments=getArguments();
  List<JsParameter> parameters=getParameters();
  replaceThis();
  removeDefaultInitializers(arguments,parameters,body);
  aliasArgumentsIfNeeded(namingContext,arguments,parameters);
  renameLocalNames(namingContext,invokedFunction);
  removeStatementsAfterTopReturn();
  if (canBeExpression(body)) {
    resultExpr=asExpression(body);
    body.getStatements().clear();
    resultExpr=(JsExpression)namingContext.applyRenameTo(resultExpr);
  }
 else {
    processReturns();
    namingContext.applyRenameTo(body);
  }
}
