{
  final JetNamespace namespace=psiFile.getRootNamespace();
  NamespaceCodegen codegen=forNamespace(namespace);
  final BindingContext bindingContext=AnalyzingUtils.getInstance(JavaDefaultImports.JAVA_DEFAULT_IMPORTS).analyzeNamespace(namespace,JetControlFlowDataTraceFactory.EMPTY);
  bindingContexts.push(bindingContext);
  typeMapper=new JetTypeMapper(standardLibrary,bindingContext);
  try {
    AnalyzingUtils.throwExceptionOnErrors(bindingContext);
    codegen.generate(namespace);
  }
  finally {
    bindingContexts.pop();
    typeMapper=null;
  }
}
