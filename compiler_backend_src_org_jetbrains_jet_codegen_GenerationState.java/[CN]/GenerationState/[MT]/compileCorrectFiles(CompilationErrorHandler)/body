{
  for (  JetFile file : this.files) {
    if (file.isScript()) {
      String name=ScriptNameUtil.classNameForScript(file);
      injector.getClosureAnnotator().registerClassNameForScript(file.getScript(),JvmClassName.byInternalName(name));
    }
  }
  injector.getScriptCodegen().registerEarlierScripts(Collections.<Pair<ScriptDescriptor,JvmClassName>>emptyList());
  beforeCompile();
  MultiMap<FqName,JetFile> namespaceGrouping=new MultiMap<FqName,JetFile>();
  for (  JetFile file : this.files) {
    if (file == null)     throw new IllegalArgumentException("A null file given for compilation");
    namespaceGrouping.putValue(JetPsiUtil.getFQName(file),file);
  }
  for (  Map.Entry<FqName,Collection<JetFile>> entry : namespaceGrouping.entrySet()) {
    generateNamespace(entry.getKey(),entry.getValue(),errorHandler,progress);
  }
}
