{
  ByteArrayOutputStream outputStream=new ByteArrayOutputStream();
  PrintStream out=new PrintStream(outputStream);
  int exitCode=execInProcess(kotlinHome,outputDir,scriptFile,out,compileContext);
  BufferedReader reader=new BufferedReader(new StringReader(outputStream.toString()));
  parseCompilerMessagesFromReader(compileContext,reader,collector);
  handleProcessTermination(exitCode,compileContext);
}
