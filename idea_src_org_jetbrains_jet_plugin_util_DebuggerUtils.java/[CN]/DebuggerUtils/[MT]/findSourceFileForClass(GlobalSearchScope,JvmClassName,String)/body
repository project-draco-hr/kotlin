{
  JetFilesProvider filesProvider=JetFilesProvider.getInstance(searchScope.getProject());
  Collection<JetFile> filesInScope=filesProvider.allInScope(searchScope);
  final FqName packageFqName=className.getOuterClassFqName().parent();
  Collection<JetFile> files=Collections2.filter(filesInScope,new Predicate<JetFile>(){
    @Override public boolean apply(    @Nullable JetFile file){
      return file != null && file.getName().equals(fileName) && JetPsiUtil.getFQName(file).equals(packageFqName);
    }
  }
);
  if (files.isEmpty())   return null;
  JetFile anyFile=files.iterator().next();
  if (files.size() == 1) {
    return anyFile;
  }
  List<JetFile> allNamespaceFiles=filesProvider.allNamespaceFiles().fun(anyFile);
  JetFile file=PsiCodegenPredictor.getFileForNamespacePartName(allNamespaceFiles,className);
  if (file != null) {
    return file;
  }
  AnalyzeExhaust analyzeExhaust=WholeProjectAnalyzerFacade.analyzeProjectWithCacheOnAFile(anyFile);
  return PsiCodegenPredictor.getFileForCodegenNamedClass(analyzeExhaust.getBindingContext(),allNamespaceFiles,className);
}
