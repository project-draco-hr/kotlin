{
  if (parentClass != null) {
    FqName parentFqName=parentClass.getFqName();
    ClassDescriptor parentClassDescriptor=resolveClass(parentFqName,INCLUDE_KOTLIN_SOURCES);
    if (parentClassDescriptor == null) {
      throw new IllegalStateException("Could not resolve " + parentFqName + " required to be parent for "+ childClassFQName);
    }
    return parentClassDescriptor;
  }
 else {
    FqName parentFqName=childClassFQName.parent();
    NamespaceDescriptor parentNamespace=namespaceResolver.resolveNamespace(parentFqName,INCLUDE_KOTLIN_SOURCES);
    if (parentNamespace == null) {
      throw new IllegalStateException("Could not resolve " + parentFqName + " required to be parent for "+ childClassFQName);
    }
    return parentNamespace;
  }
}
