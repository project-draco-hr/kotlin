{
  JetExpression deparenthesized=JetPsiUtil.deparenthesize(expression);
  for (Iterator<Map.Entry<String,Stack<JetElement>>> mapIter=labeledElements.entrySet().iterator(); mapIter.hasNext(); ) {
    Map.Entry<String,Stack<JetElement>> entry=mapIter.next();
    Stack<JetElement> stack=entry.getValue();
    for (Iterator<JetElement> stackIter=stack.iterator(); stackIter.hasNext(); ) {
      JetElement recorded=stackIter.next();
      if (recorded == deparenthesized) {
        stackIter.remove();
      }
    }
    if (stack.isEmpty()) {
      mapIter.remove();
    }
  }
}
