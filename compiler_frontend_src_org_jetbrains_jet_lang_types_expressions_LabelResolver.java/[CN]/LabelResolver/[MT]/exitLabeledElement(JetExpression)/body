{
  JetExpression cacheExpression=getCachingExpression(expression);
  for (Iterator<Map.Entry<Name,Stack<JetElement>>> mapIter=labeledElements.entrySet().iterator(); mapIter.hasNext(); ) {
    Map.Entry<Name,Stack<JetElement>> entry=mapIter.next();
    Stack<JetElement> stack=entry.getValue();
    for (Iterator<JetElement> stackIter=stack.iterator(); stackIter.hasNext(); ) {
      JetElement recorded=stackIter.next();
      if (recorded == cacheExpression) {
        stackIter.remove();
      }
    }
    if (stack.isEmpty()) {
      mapIter.remove();
    }
  }
}
