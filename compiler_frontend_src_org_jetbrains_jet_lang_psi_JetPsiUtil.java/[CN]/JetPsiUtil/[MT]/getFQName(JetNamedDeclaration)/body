{
  if (namedDeclaration instanceof JetObjectDeclarationName) {
    JetNamedDeclaration objectDeclaration=PsiTreeUtil.getParentOfType(namedDeclaration,JetObjectDeclaration.class);
    if (objectDeclaration == null) {
      objectDeclaration=PsiTreeUtil.getParentOfType(namedDeclaration,JetEnumEntry.class);
    }
    if (objectDeclaration == null) {
      return null;
    }
    return getFQName(objectDeclaration);
  }
  Name name=namedDeclaration.getNameAsName();
  if (name == null) {
    return null;
  }
  PsiElement parent=namedDeclaration.getParent();
  if (parent instanceof JetClassBody) {
    parent=parent.getParent();
  }
  FqName firstPart=null;
  if (parent instanceof JetFile) {
    firstPart=getFQName((JetFile)parent);
  }
 else   if (parent instanceof JetNamedFunction || parent instanceof JetClass || parent instanceof JetObjectDeclaration) {
    firstPart=getFQName((JetNamedDeclaration)parent);
  }
  if (firstPart == null) {
    return null;
  }
  return firstPart.child(name);
}
