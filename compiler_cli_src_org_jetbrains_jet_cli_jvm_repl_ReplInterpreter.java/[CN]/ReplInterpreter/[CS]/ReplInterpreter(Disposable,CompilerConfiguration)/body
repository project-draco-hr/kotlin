{
  jetCoreEnvironment=JetCoreEnvironment.createForProduction(disposable,configuration);
  Project project=jetCoreEnvironment.getProject();
  trace=new BindingTraceContext();
  module=AnalyzerFacadeForJVM.createJavaModule("<repl>");
  TopDownAnalysisParameters topDownAnalysisParameters=TopDownAnalysisParameters.createForLocalDeclarations(new LockBasedStorageManager(),new ExceptionTracker(),Predicates.<PsiFile>alwaysTrue());
  injector=new InjectorForTopDownAnalyzerForJvm(project,topDownAnalysisParameters,trace,module,MemberFilter.ALWAYS_TRUE);
  topDownAnalysisContext=new TopDownAnalysisContext(topDownAnalysisParameters);
  module.addFragmentProvider(SOURCES,injector.getTopDownAnalyzer().getPackageFragmentProvider());
  module.addFragmentProvider(BUILT_INS,KotlinBuiltIns.getInstance().getBuiltInsModule().getPackageFragmentProvider());
  module.addFragmentProvider(BINARIES,injector.getJavaDescriptorResolver().getPackageFragmentProvider());
  List<URL> classpath=Lists.newArrayList();
  for (  File file : configuration.getList(JVMConfigurationKeys.CLASSPATH_KEY)) {
    try {
      classpath.add(file.toURI().toURL());
    }
 catch (    MalformedURLException e) {
      throw UtilsPackage.rethrow(e);
    }
  }
  classLoader=new ReplClassLoader(new URLClassLoader(classpath.toArray(new URL[0])));
}
