{
  balloon.hide();
  final String newSignature=editor.getDocument().getText();
  if (previousSignature.equals(newSignature)) {
    return;
  }
  new WriteCommandAction(project){
    @Override protected void run(    @NotNull Result result) throws Throwable {
      ExternalAnnotationsManager.getInstance(project).editExternalAnnotation(annotatedElement,kotlinSignatureAnnotationFqName,KotlinSignatureUtil.signatureToNameValuePairs(project,newSignature));
    }
  }
.execute();
}
