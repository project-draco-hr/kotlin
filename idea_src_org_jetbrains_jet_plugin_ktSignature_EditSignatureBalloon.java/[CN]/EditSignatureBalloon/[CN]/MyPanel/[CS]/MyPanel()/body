{
  super(new BorderLayout());
  add(editor.getComponent(),BorderLayout.CENTER);
  if (editable) {
    JPanel toolbar=new JPanel(new FlowLayout(FlowLayout.RIGHT));
    saveButton=new JButton("Save"){
      @Override public boolean isDefaultButton(){
        return true;
      }
    }
;
    toolbar.add(saveButton);
    add(toolbar,BorderLayout.SOUTH);
    ActionListener saveAndHideListener=new ActionListener(){
      @Override public void actionPerformed(      @NotNull ActionEvent e){
        saveAndHide();
      }
    }
;
    saveButton.addActionListener(saveAndHideListener);
    registerKeyboardAction(saveAndHideListener,KeyStroke.getKeyStroke(KeyEvent.VK_ENTER,InputEvent.CTRL_DOWN_MASK),JComponent.WHEN_IN_FOCUSED_WINDOW);
  }
 else {
    saveButton=null;
  }
  registerKeyboardAction(new ActionListener(){
    @Override public void actionPerformed(    @NotNull ActionEvent e){
      balloon.hide();
    }
  }
,KeyStroke.getKeyStroke(KeyEvent.VK_ESCAPE,0),JComponent.WHEN_IN_FOCUSED_WINDOW);
}
