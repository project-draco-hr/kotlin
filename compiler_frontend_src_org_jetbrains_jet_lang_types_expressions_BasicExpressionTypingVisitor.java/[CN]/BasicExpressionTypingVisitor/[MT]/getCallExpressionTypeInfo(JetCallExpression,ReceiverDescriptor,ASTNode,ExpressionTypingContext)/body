{
  boolean[] result=new boolean[1];
  Call call=CallMaker.makeCall(receiver,callOperationNode,callExpression);
  TemporaryBindingTrace traceForFunction=TemporaryBindingTrace.create(context.trace,"trace to resolve as function call",callExpression);
  FunctionDescriptor functionDescriptor=getFunctionDescriptor(call,callExpression,receiver,context.replaceBindingTrace(traceForFunction),result);
  if (result[0]) {
    traceForFunction.commit();
    if (callExpression.getValueArgumentList() == null && callExpression.getFunctionLiteralArguments().isEmpty()) {
      boolean hasValueParameters=functionDescriptor == null || functionDescriptor.getValueParameters().size() > 0;
      context.trace.report(FUNCTION_CALL_EXPECTED.on(callExpression,callExpression,hasValueParameters));
    }
    if (functionDescriptor == null) {
      return JetTypeInfo.create(null,context.dataFlowInfo);
    }
    JetType type=functionDescriptor.getReturnType();
    DataFlowInfo dataFlowInfo=context.dataFlowInfo;
    JetValueArgumentList argumentList=callExpression.getValueArgumentList();
    if (argumentList != null) {
      for (      JetValueArgument argument : argumentList.getArguments()) {
        JetExpression expression=argument.getArgumentExpression();
        if (expression != null) {
          dataFlowInfo=dataFlowInfo.and(facade.getTypeInfo(expression,context.replaceExpectedType(NO_EXPECTED_TYPE).replaceDataFlowInfo(dataFlowInfo)).getDataFlowInfo());
        }
      }
    }
    return JetTypeInfo.create(type,dataFlowInfo);
  }
  JetExpression calleeExpression=callExpression.getCalleeExpression();
  if (calleeExpression instanceof JetSimpleNameExpression && callExpression.getTypeArgumentList() == null) {
    TemporaryBindingTrace traceForVariable=TemporaryBindingTrace.create(context.trace,"trace to resolve as variable with 'invoke' call",callExpression);
    JetType type=getVariableType((JetSimpleNameExpression)calleeExpression,receiver,callOperationNode,context.replaceBindingTrace(traceForVariable),result);
    if (result[0]) {
      traceForVariable.commit();
      context.trace.report(FUNCTION_EXPECTED.on((JetReferenceExpression)calleeExpression,calleeExpression,type != null ? type : ErrorUtils.createErrorType("")));
      return JetTypeInfo.create(null,context.dataFlowInfo);
    }
  }
  traceForFunction.commit();
  return JetTypeInfo.create(null,context.dataFlowInfo);
}
