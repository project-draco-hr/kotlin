{
  PsiElement elementAtCaret=file.findElementAt(editor.getCaretModel().getOffset());
  JetProperty property=PsiTreeUtil.getParentOfType(elementAtCaret,JetProperty.class);
  if (property != null)   return property;
  JetSimpleNameExpression simpleNameExpression=PsiTreeUtil.getParentOfType(elementAtCaret,JetSimpleNameExpression.class);
  if (simpleNameExpression != null) {
    BindingContext bindingContext=ResolvePackage.analyzeFully(file);
    VariableDescriptor descriptor=BindingContextUtils.extractVariableDescriptorIfAny(bindingContext,simpleNameExpression,true);
    if (descriptor != null) {
      PsiElement declaration=DescriptorToSourceUtils.descriptorToDeclaration(descriptor);
      if (declaration instanceof JetProperty) {
        return (JetProperty)declaration;
      }
    }
  }
  return null;
}
