{
  final PsiElement elementAtCaret=file.findElementAt(editor.getCaretModel().getOffset());
  JetProperty property=PsiTreeUtil.getParentOfType(elementAtCaret,JetProperty.class);
  if (property != null)   return property;
  JetSimpleNameExpression simpleNameExpression=PsiTreeUtil.getParentOfType(elementAtCaret,JetSimpleNameExpression.class);
  if (simpleNameExpression != null) {
    BindingContext bindingContext=AnalyzerFacadeForJVM.analyzeFileWithCache(file,AnalyzerFacadeForJVM.SINGLE_DECLARATION_PROVIDER,CompilerSpecialMode.REGULAR,CompilerDependencies.compilerDependenciesForProduction(CompilerSpecialMode.REGULAR)).getBindingContext();
    VariableDescriptor descriptor=BindingContextUtils.extractVariableDescriptorIfAny(bindingContext,simpleNameExpression,true);
    if (descriptor != null) {
      PsiElement declaration=bindingContext.get(BindingContext.DESCRIPTOR_TO_DECLARATION,descriptor);
      if (declaration instanceof JetProperty) {
        return (JetProperty)declaration;
      }
    }
  }
  return null;
}
