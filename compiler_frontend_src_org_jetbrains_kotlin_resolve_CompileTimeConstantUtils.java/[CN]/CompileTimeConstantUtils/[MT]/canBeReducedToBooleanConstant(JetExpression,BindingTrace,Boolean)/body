{
  if (expression == null)   return false;
  CompileTimeConstant<?> compileTimeConstant=ConstantExpressionEvaluator.evaluate(expression,trace,KotlinBuiltIns.getInstance().getBooleanType());
  if (!(compileTimeConstant instanceof TypedCompileTimeConstant) || compileTimeConstant.getUsesVariableAsConstant())   return false;
  ConstantValue constantValue=((TypedCompileTimeConstant)compileTimeConstant).getConstantValue();
  if (!(constantValue instanceof BooleanValue))   return false;
  Boolean value=((BooleanValue)constantValue).getValue();
  return expectedValue == null || expectedValue.equals(value);
}
