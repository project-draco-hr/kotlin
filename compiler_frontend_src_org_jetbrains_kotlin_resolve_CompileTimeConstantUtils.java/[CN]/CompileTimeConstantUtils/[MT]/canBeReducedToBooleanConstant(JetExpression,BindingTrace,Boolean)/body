{
  JetExpression effectiveExpression=JetPsiUtil.deparenthesize(expression);
  if (effectiveExpression == null)   return false;
  CompileTimeConstant<?> compileTimeConstant=ConstantExpressionEvaluator.getConstant(effectiveExpression,trace.getBindingContext());
  if (!(compileTimeConstant instanceof TypedCompileTimeConstant) || compileTimeConstant.getUsesVariableAsConstant())   return false;
  ConstantValue constantValue=((TypedCompileTimeConstant)compileTimeConstant).getConstantValue();
  if (!(constantValue instanceof BooleanValue))   return false;
  Boolean value=((BooleanValue)constantValue).getValue();
  return expectedValue == null || expectedValue.equals(value);
}
