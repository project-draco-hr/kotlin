{
  RecursiveDescriptorComparator comparator=new RecursiveDescriptorComparator(configuration);
  String actualSerialized=comparator.serializeRecursively(actual);
  if (expected != null) {
    String expectedSerialized=comparator.serializeRecursively(expected);
    Assert.assertSame(expected.getClass(),actual.getClass());
    Assert.assertEquals("Expected and actual descriptors differ",expectedSerialized,actualSerialized);
  }
  if (txtFile != null) {
    JetTestUtils.assertEqualsToFile(txtFile,actualSerialized);
  }
}
