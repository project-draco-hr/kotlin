{
  if (!(element instanceof KtNamedDeclaration))   return true;
  KtPsiFactory psiFactory=KtPsiFactoryKt.KtPsiFactory(element.getProject());
  if (changeInfo.isNameChanged()) {
    PsiElement identifier=((KtCallableDeclaration)element).getNameIdentifier();
    if (identifier != null) {
      identifier.replace(psiFactory.createIdentifier(changeInfo.getNewName()));
    }
  }
  changeReturnTypeIfNeeded(changeInfo,element);
  KtParameterList parameterList=JetPsiUtilKt.getValueParameterList((KtNamedDeclaration)element);
  if (changeInfo.isParameterSetOrOrderChanged()) {
    processParameterListWithStructuralChanges(changeInfo,element,parameterList,psiFactory);
  }
 else   if (parameterList != null) {
    int paramIndex=originalCallableDescriptor.getExtensionReceiverParameter() != null ? 1 : 0;
    for (    KtParameter parameter : parameterList.getParameters()) {
      JetParameterInfo parameterInfo=changeInfo.getNewParameters()[paramIndex];
      changeParameter(paramIndex,parameter,parameterInfo);
      paramIndex++;
    }
    ShortenWaitingSetKt.addToShorteningWaitSet(parameterList,Options.DEFAULT);
  }
  if (element instanceof KtCallableDeclaration && changeInfo.isReceiverTypeChanged()) {
    String receiverTypeText=changeInfo.renderReceiverType((JetCallableDefinitionUsage<PsiElement>)this);
    KtTypeReference receiverTypeRef=receiverTypeText != null ? psiFactory.createType(receiverTypeText) : null;
    KtTypeReference newReceiverTypeRef=TypeRefHelpersKt.setReceiverTypeReference((KtCallableDeclaration)element,receiverTypeRef);
    if (newReceiverTypeRef != null) {
      ShortenWaitingSetKt.addToShorteningWaitSet(newReceiverTypeRef,ShortenReferences.Options.DEFAULT);
    }
  }
  if (changeInfo.isVisibilityChanged() && !KtPsiUtil.isLocal((KtDeclaration)element)) {
    changeVisibility(changeInfo,element);
  }
  return true;
}
