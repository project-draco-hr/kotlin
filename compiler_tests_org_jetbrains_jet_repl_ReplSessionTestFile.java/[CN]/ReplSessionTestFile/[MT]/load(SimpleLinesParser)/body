{
  List<OneLine> list=Lists.newArrayList();
  Pattern startPattern=Pattern.compile(">>>( |$)(.*)");
  Pattern substringPattern=Pattern.compile("substring: (.*)");
  while (!parser.lookingAtEof()) {
    Matcher matcher=parser.next(startPattern);
    String code=matcher.group(2);
    StringBuilder value=new StringBuilder();
    Matcher substringMatcher=parser.lookingAt(substringPattern);
    if (substringMatcher != null) {
      list.add(new OneLine(code,substringMatcher.group(1),MatchType.SUBSTRING));
      parser.next();
      continue;
    }
    while (!parser.lookingAtEof() && parser.lookingAt(startPattern) == null) {
      value.append(parser.next()).append("\n");
    }
    list.add(new OneLine(code,value.toString(),MatchType.EQUALS));
  }
  return new ReplSessionTestFile(list);
}
