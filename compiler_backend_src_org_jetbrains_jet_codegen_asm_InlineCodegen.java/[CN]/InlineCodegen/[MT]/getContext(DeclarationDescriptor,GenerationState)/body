{
  if (descriptor instanceof NamespaceDescriptor) {
    return new NamespaceContext((NamespaceDescriptor)descriptor,null);
  }
  CodegenContext parent=getContext(descriptor.getContainingDeclaration(),state);
  if (descriptor instanceof ClassDescriptor) {
    return parent.intoClass((ClassDescriptor)descriptor,OwnerKind.IMPLEMENTATION,state);
  }
 else   if (descriptor instanceof FunctionDescriptor) {
    return parent.intoFunction((FunctionDescriptor)descriptor);
  }
  throw new IllegalStateException("Coudn't build context for " + descriptorName(descriptor));
}
