{
  if (!slice.check(key,value)) {
    return;
  }
  SlicedMapKey<K,V> slicedMapKey=slice.makeKey(key);
  if (slice.getRewritePolicy().rewriteProcessingNeeded(key)) {
    if (map.containsKey(slicedMapKey)) {
      if (!slice.getRewritePolicy().processRewrite(slice,key,(V)map.get(slicedMapKey),value)) {
        return;
      }
    }
  }
  map.put(slicedMapKey,value);
  slice.afterPut(this,key,value);
}
