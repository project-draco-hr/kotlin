{
  if (!visited.add(current.getConstructor())) {
    return;
  }
  handler.beforeChildren(current);
  TypeSubstitutor substitutor=TypeSubstitutor.create(current);
  for (  JetType supertype : current.getConstructor().getSupertypes()) {
    TypeConstructor supertypeConstructor=supertype.getConstructor();
    if (visited.contains(supertypeConstructor)) {
      continue;
    }
    JetType substitutedSupertype=substitutor.safeSubstitute(supertype,Variance.INVARIANT);
    dfs(substitutedSupertype,visited,handler);
  }
  handler.afterChildren(current);
}
