{
  PsiBuilder.Marker typeRefMarker=mark();
  parseAnnotations(false);
  if (at(IDENTIFIER) || at(NAMESPACE_KEYWORD)) {
    parseUserType();
  }
 else   if (at(FUN_KEYWORD)) {
    parseFunctionType();
  }
 else   if (at(LPAR)) {
    parseTupleType();
  }
 else   if (at(CAPITALIZED_THIS_KEYWORD)) {
    parseSelfType();
  }
 else {
    errorWithRecovery("Type expected",TokenSet.orSet(TOPLEVEL_OBJECT_FIRST,TokenSet.create(EQ,COMMA,GT,RBRACKET,DOT,RPAR,RBRACE,LBRACE,SEMICOLON)));
  }
  while (at(QUEST)) {
    PsiBuilder.Marker precede=typeRefMarker.precede();
    advance();
    typeRefMarker.done(NULLABLE_TYPE);
    typeRefMarker=precede;
  }
  typeRefMarker.done(TYPE_REFERENCE);
}
