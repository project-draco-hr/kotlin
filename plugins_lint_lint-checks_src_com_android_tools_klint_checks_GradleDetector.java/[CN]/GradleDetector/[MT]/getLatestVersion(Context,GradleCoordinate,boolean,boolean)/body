{
  StringBuilder query=new StringBuilder();
  String encoding=UTF_8.name();
  try {
    query.append("http://search.maven.org/solrsearch/select?q=g:%22");
    query.append(URLEncoder.encode(dependency.getGroupId(),encoding));
    query.append("%22+AND+a:%22");
    query.append(URLEncoder.encode(dependency.getArtifactId(),encoding));
  }
 catch (  UnsupportedEncodingException ee) {
    return null;
  }
  query.append("%22&core=gav");
  if (firstRowOnly) {
    query.append("&rows=1");
  }
  query.append("&wt=json");
  String response=readUrlData(context,dependency,query.toString());
  if (response == null) {
    return null;
  }
  boolean foundPreview=false;
  int index=response.indexOf("\"response\"");
  while (index != -1) {
    index=response.indexOf("\"v\":",index);
    if (index != -1) {
      index+=4;
      int start=response.indexOf('"',index) + 1;
      int end=response.indexOf('"',start + 1);
      if (end > start && start >= 0) {
        PreciseRevision revision=parseRevisionSilently(response.substring(start,end));
        if (revision != null) {
          foundPreview=revision.isPreview();
          if (allowPreview || !foundPreview) {
            return revision;
          }
        }
      }
    }
  }
  if (!allowPreview && foundPreview && firstRowOnly) {
    return getLatestVersion(context,dependency,false,false);
  }
  return null;
}
