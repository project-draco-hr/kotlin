{
  String defaultPath=getDefaultPathToJarFile(project);
  boolean showPathPanelForJava=needToChooseJarPath(project);
  List<Module> nonConfiguredModules=ConfigureKotlinInProjectUtils.getNonConfiguredModules(project,this);
  if (nonConfiguredModules.size() > 1 || showPathPanelForJava) {
    CreateJavaLibraryDialogWithModules dialog=new CreateJavaLibraryDialogWithModules(project,nonConfiguredModules,defaultPath,showPathPanelForJava);
    dialog.show();
    if (!dialog.isOK())     return;
    for (    Module module : dialog.getModulesToConfigure()) {
      configureModuleWithLibrary(module,defaultPath,dialog.getCopyIntoPath());
    }
  }
 else {
    for (    Module module : nonConfiguredModules) {
      configureModuleWithLibrary(module,defaultPath,null);
    }
  }
}
