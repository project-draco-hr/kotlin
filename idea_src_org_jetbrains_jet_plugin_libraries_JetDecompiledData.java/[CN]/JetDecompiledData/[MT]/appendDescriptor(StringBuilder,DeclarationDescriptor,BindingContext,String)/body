{
  String decompiledComment="/* " + PsiBundle.message("psi.decompiled.method.body") + " */";
  int startOffset=builder.length();
  builder.append(DescriptorRenderer.COMPACT.render(descriptor));
  int endOffset=builder.length();
  if (descriptor instanceof FunctionDescriptor || descriptor instanceof PropertyDescriptor) {
    if (((CallableMemberDescriptor)descriptor).getModality() != Modality.ABSTRACT) {
      if (descriptor instanceof FunctionDescriptor) {
        builder.append(" { ").append(decompiledComment).append(" }");
        endOffset=builder.length();
      }
 else {
        if (((PropertyDescriptor)descriptor).getModality() != Modality.ABSTRACT) {
          builder.append(" ").append(decompiledComment);
        }
      }
    }
  }
 else   if (descriptor instanceof ClassDescriptor) {
    builder.append(" {\n");
    ClassDescriptor classDescriptor=(ClassDescriptor)descriptor;
    boolean firstPassed=false;
    String subindent=indent + "    ";
    if (classDescriptor.getClassObjectDescriptor() != null) {
      firstPassed=true;
      builder.append(subindent).append("class ");
      appendDescriptor(builder,classDescriptor.getClassObjectDescriptor(),bindingContext,subindent);
    }
    for (    DeclarationDescriptor member : classDescriptor.getDefaultType().getMemberScope().getAllDescriptors()) {
      if (member.getContainingDeclaration() == descriptor) {
        if (firstPassed) {
          builder.append("\n");
        }
 else {
          firstPassed=true;
        }
        builder.append(subindent);
        appendDescriptor(builder,member,bindingContext,subindent);
      }
    }
    builder.append(indent).append("}");
    endOffset=builder.length();
  }
  builder.append("\n");
  PsiElement clsMember=bindingContext.get(BindingContext.DESCRIPTOR_TO_DECLARATION,descriptor);
  if (clsMember != null) {
    myClsMembersToRanges.put(clsMember,new TextRange(startOffset,endOffset));
  }
}
