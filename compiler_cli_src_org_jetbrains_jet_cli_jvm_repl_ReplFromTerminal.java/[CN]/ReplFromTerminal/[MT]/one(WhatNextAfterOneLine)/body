{
  try {
    String line=consoleReader.readLine(next == WhatNextAfterOneLine.INCOMPLETE ? "... " : ">>> ");
    if (line == null) {
      return WhatNextAfterOneLine.QUIT;
    }
    if (line.startsWith(":")) {
      boolean notQuit=oneCommand(line.substring(1));
      return notQuit ? WhatNextAfterOneLine.READ_LINE : WhatNextAfterOneLine.QUIT;
    }
    ReplInterpreter.LineResultType lineResultType=eval(line);
    if (lineResultType == ReplInterpreter.LineResultType.INCOMPLETE) {
      return WhatNextAfterOneLine.INCOMPLETE;
    }
 else {
      return WhatNextAfterOneLine.READ_LINE;
    }
  }
 catch (  Exception e) {
    throw ExceptionUtils.rethrow(e);
  }
}
