{
  new Thread("initialize-repl"){
    @Override public void run(){
      try {
        replInterpreter=new ReplInterpreter(disposable,compilerConfiguration,mode);
      }
 catch (      Throwable e) {
        replInitializationFailed=e;
      }
synchronized (waitRepl) {
        waitRepl.notifyAll();
      }
    }
  }
.start();
  try {
    consoleReader=new ConsoleReader("kotlin",System.in,System.out,null);
    consoleReader.setHistoryEnabled(true);
    consoleReader.setHistory(new FileHistory(new File(new File(System.getProperty("user.home")),".kotlin_history")));
  }
 catch (  Exception e) {
    throw ExceptionUtils.rethrow(e);
  }
}
