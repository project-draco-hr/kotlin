{
  if (getReferencedName() == null)   return null;
  return new PsiReference(){
    @Override public PsiElement getElement(){
      return getReferencedNameElement();
    }
    @Override public TextRange getRangeInElement(){
      return new TextRange(0,getElement().getTextLength());
    }
    @Override public PsiElement resolve(){
      PsiElement element=getElement();
      JetFile file=(JetFile)element.getContainingFile();
      BindingContext bindingContext=AnalyzingUtils.analyzeFile(file,ErrorHandler.DO_NOTHING);
      PsiElement psiElement=bindingContext.resolveToDeclarationPsiElement(JetReferenceExpression.this);
      return psiElement == null ? file : psiElement;
    }
    @NotNull @Override public String getCanonicalText(){
      return getReferencedName();
    }
    @Override public PsiElement handleElementRename(    String newElementName) throws IncorrectOperationException {
      throw new IncorrectOperationException();
    }
    @Override public PsiElement bindToElement(    @NotNull PsiElement element) throws IncorrectOperationException {
      throw new IncorrectOperationException();
    }
    @Override public boolean isReferenceTo(    PsiElement element){
      return resolve() == element;
    }
    @NotNull @Override public Object[] getVariants(){
      return EMPTY_ARRAY;
    }
    @Override public boolean isSoft(){
      return false;
    }
  }
;
}
