{
  this.parameters=parameters;
  this.jetReference=jetReference;
  CancelableResolveSession resolveSession=WholeProjectAnalyzerFacade.getLazyResolveResultForFile((JetFile)position.getContainingFile());
  BindingContext expressionBindingContext=resolveSession.resolveToElement(jetReference.getExpression());
  JetScope scope=expressionBindingContext.get(BindingContext.RESOLUTION_SCOPE,jetReference.getExpression());
  inDescriptor=scope != null ? scope.getContainingDeclaration() : null;
  this.jetResult=new JetCompletionResultSet(JetCompletionSorting.addJetSorting(parameters,result),resolveSession,expressionBindingContext,new Condition<DeclarationDescriptor>(){
    @Override public boolean value(    DeclarationDescriptor descriptor){
      return isVisibleDescriptor(descriptor);
    }
  }
);
}
