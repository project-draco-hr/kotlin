{
  PsiFile file=declaration.getContainingFile();
  if (!(file instanceof JetFile))   return null;
  DeclarationDescriptor descriptor=ResolvePackage.resolveToDescriptor(declaration);
  if (!(descriptor instanceof CallableDescriptor))   return null;
  JetType type=((CallableDescriptor)descriptor).getReturnType();
  if (type instanceof DeferredType) {
    type=((DeferredType)type).getDelegate();
  }
  return type;
}
