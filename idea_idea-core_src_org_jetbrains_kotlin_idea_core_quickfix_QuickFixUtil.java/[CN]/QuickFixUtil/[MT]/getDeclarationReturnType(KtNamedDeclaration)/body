{
  PsiFile file=declaration.getContainingFile();
  if (!(file instanceof KtFile))   return null;
  DeclarationDescriptor descriptor=ResolutionUtils.resolveToDescriptor(declaration);
  if (!(descriptor instanceof CallableDescriptor))   return null;
  KtType type=((CallableDescriptor)descriptor).getReturnType();
  if (type instanceof DeferredType) {
    type=((DeferredType)type).getDelegate();
  }
  return type;
}
