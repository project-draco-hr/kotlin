{
  this.loadFullLibrary=loadFullLibrary;
  try {
    JetFile file=null;
    if (loadFullLibrary) {
      InputStream stream=JetStandardClasses.class.getClassLoader().getResourceAsStream("jet/Library.jet");
      file=(JetFile)PsiFileFactory.getInstance(project).createFileFromText("Library.jet",JetFileType.INSTANCE,FileUtil.loadTextAndClose(new InputStreamReader(stream)));
    }
    JetSemanticServices bootstrappingSemanticServices=JetSemanticServices.createSemanticServices(this);
    BindingTraceContext bindingTraceContext=new BindingTraceContext();
    WritableScopeImpl writableScope=new WritableScopeImpl(JetStandardClasses.STANDARD_CLASSES,JetStandardClasses.STANDARD_CLASSES_NAMESPACE,RedeclarationHandler.THROW_EXCEPTION).setDebugName("Root bootstrap scope");
    if (loadFullLibrary) {
      TopDownAnalyzer.processStandardLibraryNamespace(bootstrappingSemanticServices,bindingTraceContext,writableScope,JetStandardClasses.STANDARD_CLASSES_NAMESPACE,file.getRootNamespace());
    }
    AnalyzingUtils.throwExceptionOnErrors(bindingTraceContext.getBindingContext());
    initStdClasses();
  }
 catch (  IOException e) {
    throw new IllegalStateException(e);
  }
}
