{
  if (superDescriptor instanceof FunctionDescriptor) {
    if (subDescriptor instanceof PropertyDescriptor)     return OverrideCompatibilityInfo.memberKindMismatch();
  }
  if (superDescriptor instanceof PropertyDescriptor) {
    if (subDescriptor instanceof FunctionDescriptor)     return OverrideCompatibilityInfo.memberKindMismatch();
  }
  if (!superDescriptor.getName().equals(subDescriptor.getName())) {
    return OverrideCompatibilityInfo.nameMismatch();
  }
  if (superDescriptor.getTypeParameters().size() != subDescriptor.getTypeParameters().size()) {
    return OverrideCompatibilityInfo.typeParameterNumberMismatch();
  }
  if (superDescriptor.getValueParameters().size() != subDescriptor.getValueParameters().size()) {
    return OverrideCompatibilityInfo.valueParameterNumberMismatch();
  }
  List<TypeParameterDescriptor> superTypeParameters=superDescriptor.getTypeParameters();
  List<TypeParameterDescriptor> subTypeParameters=subDescriptor.getTypeParameters();
  BiMap<TypeConstructor,TypeConstructor> axioms=HashBiMap.create();
  for (int i=0, typeParametersSize=superTypeParameters.size(); i < typeParametersSize; i++) {
    TypeParameterDescriptor superTypeParameter=superTypeParameters.get(i);
    TypeParameterDescriptor subTypeParameter=subTypeParameters.get(i);
    axioms.put(superTypeParameter.getTypeConstructor(),subTypeParameter.getTypeConstructor());
  }
  for (int i=0, typeParametersSize=superTypeParameters.size(); i < typeParametersSize; i++) {
    TypeParameterDescriptor superTypeParameter=superTypeParameters.get(i);
    TypeParameterDescriptor subTypeParameter=subTypeParameters.get(i);
    if (!JetTypeImpl.equalTypes(superTypeParameter.getUpperBoundsAsType(),subTypeParameter.getUpperBoundsAsType(),axioms)) {
      return OverrideCompatibilityInfo.boundsMismatch(superTypeParameter,subTypeParameter);
    }
  }
  List<ValueParameterDescriptor> superValueParameters=superDescriptor.getValueParameters();
  List<ValueParameterDescriptor> subValueParameters=subDescriptor.getValueParameters();
  for (int i=0, unsubstitutedValueParametersSize=superValueParameters.size(); i < unsubstitutedValueParametersSize; i++) {
    ValueParameterDescriptor superValueParameter=superValueParameters.get(i);
    ValueParameterDescriptor subValueParameter=subValueParameters.get(i);
    if (!JetTypeImpl.equalTypes(superValueParameter.getOutType(),subValueParameter.getOutType(),axioms)) {
      return OverrideCompatibilityInfo.valueParameterTypeMismatch(superValueParameter,subValueParameter);
    }
  }
  return OverrideCompatibilityInfo.success();
}
