{
  PsiFile file=context.getFile();
  if (!(file instanceof JetFile)) {
    return null;
  }
  JetValueArgumentList argumentList=PsiTreeUtil.getParentOfType(file.findElementAt(context.getOffset()),JetValueArgumentList.class);
  if (argumentList == null) {
    return null;
  }
  JetSimpleNameExpression callNameExpression=getCallSimpleNameExpression(argumentList);
  if (callNameExpression == null) {
    return null;
  }
  PsiReference[] references=callNameExpression.getReferences();
  if (references.length == 0) {
    return null;
  }
  ResolveSessionForBodies resolveSession=AnalyzerFacadeWithCache.getLazyResolveSessionForFile(callNameExpression.getContainingJetFile());
  BindingContext bindingContext=resolveSession.resolveToElement(callNameExpression);
  JetScope scope=bindingContext.get(BindingContext.RESOLUTION_SCOPE,callNameExpression);
  DeclarationDescriptor placeDescriptor=null;
  if (scope != null) {
    placeDescriptor=scope.getContainingDeclaration();
  }
  Collection<DeclarationDescriptor> variants=TipsManager.getReferenceVariants(callNameExpression,bindingContext);
  Name refName=callNameExpression.getReferencedNameAsName();
  Collection<Pair<? extends DeclarationDescriptor,ResolveSessionForBodies>> itemsToShow=new ArrayList<Pair<? extends DeclarationDescriptor,ResolveSessionForBodies>>();
  for (  DeclarationDescriptor variant : variants) {
    if (variant instanceof FunctionDescriptor) {
      FunctionDescriptor functionDescriptor=(FunctionDescriptor)variant;
      if (functionDescriptor.getName().equals(refName)) {
        if (placeDescriptor != null && !JetVisibilityChecker.isVisible(placeDescriptor,functionDescriptor)) {
          continue;
        }
        itemsToShow.add(Pair.create(functionDescriptor,resolveSession));
      }
    }
 else     if (variant instanceof ClassDescriptor) {
      ClassDescriptor classDescriptor=(ClassDescriptor)variant;
      if (classDescriptor.getName().equals(refName)) {
        for (        ConstructorDescriptor constructorDescriptor : classDescriptor.getConstructors()) {
          if (placeDescriptor != null && !JetVisibilityChecker.isVisible(placeDescriptor,constructorDescriptor)) {
            continue;
          }
          itemsToShow.add(Pair.create(constructorDescriptor,resolveSession));
        }
      }
    }
  }
  context.setItemsToShow(ArrayUtil.toObjectArray(itemsToShow));
  return argumentList;
}
