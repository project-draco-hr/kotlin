{
  PsiFile file=context.getFile();
  if (!(file instanceof JetFile)) {
    return null;
  }
  JetValueArgumentList argumentList=PsiTreeUtil.getParentOfType(file.findElementAt(context.getOffset()),JetValueArgumentList.class);
  if (argumentList == null) {
    return null;
  }
  final JetSimpleNameExpression callNameExpression=getCallSimpleNameExpression(argumentList);
  if (callNameExpression == null) {
    return null;
  }
  PsiReference[] references=callNameExpression.getReferences();
  if (references.length == 0) {
    return null;
  }
  ResolveSessionForBodies resolveSession=ResolvePackage.getLazyResolveSession(callNameExpression.getContainingJetFile());
  BindingContext bindingContext=resolveSession.resolveToElement(callNameExpression);
  JetScope scope=bindingContext.get(BindingContext.RESOLUTION_SCOPE,callNameExpression);
  final DeclarationDescriptor placeDescriptor;
  if (scope != null) {
    placeDescriptor=scope.getContainingDeclaration();
  }
 else {
    placeDescriptor=null;
  }
  Function1<DeclarationDescriptor,Boolean> visibilityFilter=new Function1<DeclarationDescriptor,Boolean>(){
    @Override public Boolean invoke(    DeclarationDescriptor descriptor){
      return placeDescriptor == null || JetVisibilityChecker.isVisible(placeDescriptor,descriptor);
    }
  }
;
  final Name refName=callNameExpression.getReferencedNameAsName();
  Function1<Name,Boolean> nameFilter=new Function1<Name,Boolean>(){
    @Override public Boolean invoke(    Name name){
      return name.equals(refName);
    }
  }
;
  Collection<DeclarationDescriptor> variants=TipsManager.INSTANCE$.getReferenceVariants(callNameExpression,bindingContext,new DescriptorKindFilter(DescriptorKindFilter.FUNCTIONS_MASK | DescriptorKindFilter.CLASSIFIERS_MASK,Collections.<DescriptorKindExclude>emptyList()),nameFilter,visibilityFilter);
  Collection<Pair<? extends DeclarationDescriptor,ResolveSessionForBodies>> itemsToShow=new ArrayList<Pair<? extends DeclarationDescriptor,ResolveSessionForBodies>>();
  for (  DeclarationDescriptor variant : variants) {
    if (variant instanceof FunctionDescriptor) {
      itemsToShow.add(Pair.create((FunctionDescriptor)variant,resolveSession));
    }
 else     if (variant instanceof ClassDescriptor) {
      for (      ConstructorDescriptor constructorDescriptor : ((ClassDescriptor)variant).getConstructors()) {
        itemsToShow.add(Pair.create(constructorDescriptor,resolveSession));
      }
    }
  }
  context.setItemsToShow(ArrayUtil.toObjectArray(itemsToShow));
  return argumentList;
}
