{
  Project project=module.getProject();
switch (libraryState) {
case LIBRARY:
switch (jarState) {
case EXISTS:
{
        break;
      }
case COPY:
{
      copyJarToDir(dirToCopyJarTo);
      break;
    }
case DO_NOT_COPY:
{
    throw new IllegalStateException("Kotlin library exists, so path to copy should be hidden in configuration dialog and jar should be copied using path in library table");
  }
}
break;
case NON_CONFIGURED_LIBRARY:
switch (jarState) {
case EXISTS:
{
addJarToExistedLibrary(project,getFileInDir(getJarName(),dirToCopyJarTo));
break;
}
case COPY:
{
File file=copyJarToDir(dirToCopyJarTo);
addJarToExistedLibrary(project,file);
break;
}
case DO_NOT_COPY:
{
addJarToExistedLibrary(project,getExistedJarFile());
break;
}
}
break;
case NEW_LIBRARY:
switch (jarState) {
case EXISTS:
{
addJarToNewLibrary(project,getFileInDir(getJarName(),dirToCopyJarTo));
break;
}
case COPY:
{
File file=copyJarToDir(dirToCopyJarTo);
addJarToNewLibrary(project,file);
break;
}
case DO_NOT_COPY:
{
addJarToNewLibrary(project,getExistedJarFile());
break;
}
}
break;
}
addLibraryToModuleIfNeeded(module);
}
