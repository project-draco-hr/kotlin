{
  doTestWithRename(new Function<PsiFile,PsiElement>(){
    @Override public PsiElement fun(    PsiFile file){
      BindingContext bindingContext=WholeProjectAnalyzerFacade.analyzeProjectWithCacheOnAFile((JetFile)file).getBindingContext();
      ClassDescriptor classDescriptor=bindingContext.get(BindingContext.FQNAME_TO_CLASS_DESCRIPTOR,qClassName);
      assertNotNull(classDescriptor);
      JetScope scope=classDescriptor.getMemberScope(Collections.<TypeProjection>emptyList());
      FunctionDescriptor methodDescriptor=scope.getFunctions(Name.identifier(oldMethodName)).iterator().next();
      return BindingContextUtils.callableDescriptorToDeclaration(bindingContext,methodDescriptor);
    }
  }
,newMethodName);
}
