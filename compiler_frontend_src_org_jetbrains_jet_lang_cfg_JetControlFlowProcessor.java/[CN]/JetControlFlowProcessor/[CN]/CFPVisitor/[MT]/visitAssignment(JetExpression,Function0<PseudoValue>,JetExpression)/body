{
  JetExpression left=JetPsiUtil.deparenthesize(lhs);
  if (left == null) {
    builder.compilationError(lhs,"No lValue in assignment");
    return;
  }
  if (left instanceof JetArrayAccessExpression) {
    generateArrayAssignment((JetArrayAccessExpression)left,rhsDeferredValue,parentExpression);
    return;
  }
  Map<PseudoValue,ReceiverValue> receiverValues=SmartFMap.emptyMap();
  AccessTarget accessTarget=AccessTarget.BlackBox.instance$;
  boolean unsupported=false;
  if (left instanceof JetSimpleNameExpression || left instanceof JetQualifiedExpression) {
    accessTarget=getResolvedCallAccessTarget(PsiUtilPackage.getQualifiedElementSelector(left));
    if (accessTarget instanceof AccessTarget.Call) {
      receiverValues=getReceiverValues(((AccessTarget.Call)accessTarget).getResolvedCall(),true);
    }
  }
 else   if (left instanceof JetProperty) {
    accessTarget=getDeclarationAccessTarget(left);
  }
 else {
    unsupported=true;
  }
  PseudoValue rhsValue=rhsDeferredValue.invoke();
  if (unsupported) {
    builder.unsupported(parentExpression);
  }
 else {
    recordWrite(left,accessTarget,rhsValue,receiverValues,parentExpression);
  }
}
