{
  JetExpression condition=expression.getCondition();
  if (condition != null) {
    generateInstructions(condition,true);
  }
  Label elseLabel=builder.createUnboundLabel();
  builder.jumpOnFalse(elseLabel);
  JetExpression thenBranch=expression.getThen();
  if (thenBranch != null) {
    generateInstructions(thenBranch,inCondition);
  }
 else {
    builder.readUnit(expression);
  }
  Label resultLabel=builder.createUnboundLabel();
  builder.jump(resultLabel);
  builder.bindLabel(elseLabel);
  JetExpression elseBranch=expression.getElse();
  if (elseBranch != null) {
    generateInstructions(elseBranch,inCondition);
  }
 else {
    builder.readUnit(expression);
  }
  builder.bindLabel(resultLabel);
}
