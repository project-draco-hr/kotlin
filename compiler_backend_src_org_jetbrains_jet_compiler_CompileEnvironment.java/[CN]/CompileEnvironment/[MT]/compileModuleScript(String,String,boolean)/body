{
  final IModuleSetBuilder moduleSetBuilder=loadModuleScript(moduleFile);
  if (moduleSetBuilder == null) {
    return;
  }
  final String directory=new File(moduleFile).getParent();
  for (  IModuleBuilder moduleBuilder : moduleSetBuilder.getModules()) {
    ClassFileFactory moduleFactory=compileModule(moduleBuilder,directory);
    final String path=jarPath != null ? jarPath : new File(directory,moduleBuilder.getModuleName() + ".jar").getPath();
    try {
      writeToJar(moduleFactory,new FileOutputStream(path),null,jarRuntime);
    }
 catch (    FileNotFoundException e) {
      throw new CompileEnvironmentException("Invalid jar path " + path,e);
    }
  }
}
