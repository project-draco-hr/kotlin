{
  for (  Method method : this.getClass().getMethods()) {
    if (!method.getName().equals("serialize")) {
      continue;
    }
    if (method.getParameterTypes().length != 1) {
      continue;
    }
    if (method.getParameterTypes()[0].equals(Object.class)) {
      continue;
    }
    if (method.getParameterTypes()[0].isInstance(o)) {
      method.setAccessible(true);
      return method;
    }
  }
  throw new IllegalStateException("don't know how to serialize " + o + " (of "+ o.getClass()+ ")");
}
