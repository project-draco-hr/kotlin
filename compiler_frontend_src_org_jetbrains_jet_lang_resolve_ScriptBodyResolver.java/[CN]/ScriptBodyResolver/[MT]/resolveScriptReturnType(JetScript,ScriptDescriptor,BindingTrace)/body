{
  ExpressionTypingContext context=ExpressionTypingContext.newContext(expressionTypingServices,trace,scriptDescriptor.getScopeForBodyResolution(),DataFlowInfo.EMPTY,NO_EXPECTED_TYPE);
  JetType returnType=expressionTypingServices.getBlockReturnedType(script.getBlockExpression(),CoercionStrategy.NO_COERCION,context).getType();
  if (returnType == null) {
    returnType=ErrorUtils.createErrorType("getBlockReturnedType returned null");
  }
  return returnType;
}
