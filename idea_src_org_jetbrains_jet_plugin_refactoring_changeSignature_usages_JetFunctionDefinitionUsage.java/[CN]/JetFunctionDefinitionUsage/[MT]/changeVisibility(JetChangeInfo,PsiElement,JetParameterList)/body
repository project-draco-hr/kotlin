{
  JetKeywordToken newVisibilityToken=JetRefactoringUtil.getVisibilityToken(changeInfo.getNewVisibility());
  JetPsiFactory psiFactory=JetPsiFactory(getProject());
  if (element instanceof JetFunction) {
    JetModifierList modifierList=newVisibilityToken == JetTokens.INTERNAL_KEYWORD ? null : psiFactory.createModifierList(newVisibilityToken);
    AddModifierFix.changeModifier(element,((JetFunction)element).getModifierList(),null,ChangeVisibilityModifierFix.VISIBILITY_TOKENS,getProject(),true,modifierList);
  }
 else {
    JetModifierList modifierList=newVisibilityToken == JetTokens.PUBLIC_KEYWORD ? null : psiFactory.createConstructorModifierList(newVisibilityToken);
    AddModifierFix.changeModifier(element,((JetClass)element).getPrimaryConstructorModifierList(),parameterList,ChangeVisibilityModifierFix.VISIBILITY_TOKENS,getProject(),true,modifierList);
  }
}
