{
  if (!(leaf.getContainingFile() instanceof JetFile))   return null;
  JetFile jetFile=(JetFile)leaf.getContainingFile();
  JetNamedFunction function=PsiTreeUtil.getParentOfType(leaf,JetNamedFunction.class,false);
  if (function != null)   return function;
  JetClass jetClass=PsiTreeUtil.getParentOfType(leaf,JetClass.class,false);
  if (jetClass != null)   return jetClass;
  return getClassDeclarationInFile(jetFile);
}
