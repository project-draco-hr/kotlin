{
  if (CodeInsightSettings.getInstance().OPTIMIZE_IMPORTS_ON_THE_FLY) {
    new OptimizeImportsProcessor(file.getProject(),file).runWithoutProgress();
  }
  if (!doNeedImport(importPath,file)) {
    return;
  }
  writeImportToFile(importPath,file);
}
