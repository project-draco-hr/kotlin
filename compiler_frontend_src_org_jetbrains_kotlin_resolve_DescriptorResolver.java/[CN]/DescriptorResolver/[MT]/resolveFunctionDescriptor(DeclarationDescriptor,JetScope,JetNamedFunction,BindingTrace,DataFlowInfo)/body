{
  if (function.getName() == null) {
    trace.report(FUNCTION_DECLARATION_WITH_NO_NAME.on(function));
  }
  SimpleFunctionDescriptorImpl functionDescriptor=SimpleFunctionDescriptorImpl.create(containingDescriptor,annotationResolver.resolveAnnotationsWithArguments(scope,function.getModifierList(),trace),function.getNameAsSafeName(),CallableMemberDescriptor.Kind.DECLARATION,toSourceElement(function));
  initializeFunctionDescriptorAndExplicitReturnType(containingDescriptor,scope,function,functionDescriptor,trace);
  initializeFunctionReturnTypeBasedOnFunctionBody(scope,function,functionDescriptor,trace,dataFlowInfo);
  BindingContextUtils.recordFunctionDeclarationToDescriptor(trace,function,functionDescriptor);
  return functionDescriptor;
}
