{
  JetModifierList modifierList=property.getModifierList();
  boolean isVar=property.isVar();
  boolean hasBody=hasBody(property);
  Visibility visibility=resolveVisibilityFromModifiers(property,getDefaultVisibility(property,containingDeclaration));
  Modality modality=containingDeclaration instanceof ClassDescriptor ? resolveModalityFromModifiers(property,getDefaultModality(containingDeclaration,visibility,hasBody)) : Modality.FINAL;
  PropertyDescriptorImpl propertyDescriptor=PropertyDescriptorImpl.create(containingDeclaration,annotationResolver.resolveAnnotationsWithoutArguments(scope,modifierList,trace),modality,visibility,isVar,JetPsiUtil.safeName(property.getName()),CallableMemberDescriptor.Kind.DECLARATION,toSourceElement(property));
  List<TypeParameterDescriptorImpl> typeParameterDescriptors;
  LexicalScope scopeWithTypeParameters;
  JetType receiverType=null;
{
    List<JetTypeParameter> typeParameters=property.getTypeParameters();
    if (typeParameters.isEmpty()) {
      scopeWithTypeParameters=scope;
      typeParameterDescriptors=Collections.emptyList();
    }
 else {
      LexicalWritableScope writableScope=new LexicalWritableScope(scope,containingDeclaration,false,null,new TraceBasedRedeclarationHandler(trace),"Scope with type parameters of a property");
      typeParameterDescriptors=resolveTypeParametersForCallableDescriptor(propertyDescriptor,writableScope,typeParameters,trace);
      writableScope.changeLockLevel(WritableScope.LockLevel.READING);
      resolveGenericBounds(property,propertyDescriptor,writableScope,typeParameterDescriptors,trace);
      scopeWithTypeParameters=writableScope;
    }
    JetTypeReference receiverTypeRef=property.getReceiverTypeReference();
    if (receiverTypeRef != null) {
      receiverType=typeResolver.resolveType(scopeWithTypeParameters,receiverTypeRef,trace,true);
    }
  }
  ReceiverParameterDescriptor receiverDescriptor=DescriptorFactory.createExtensionReceiverParameterForCallable(propertyDescriptor,receiverType);
  ReceiverParameterDescriptor implicitInitializerReceiver=property.hasDelegate() ? null : receiverDescriptor;
  LexicalScope propertyScope=JetScopeUtils.getPropertyDeclarationInnerScope(propertyDescriptor,scope,typeParameterDescriptors,implicitInitializerReceiver,trace);
  JetType type=getVariableType(propertyDescriptor,propertyScope,property,dataFlowInfo,true,trace);
  propertyDescriptor.setType(type,typeParameterDescriptors,getDispatchReceiverParameterIfNeeded(containingDeclaration),receiverDescriptor);
  PropertyGetterDescriptorImpl getter=resolvePropertyGetterDescriptor(scopeWithTypeParameters,property,propertyDescriptor,trace);
  PropertySetterDescriptor setter=resolvePropertySetterDescriptor(scopeWithTypeParameters,property,propertyDescriptor,trace);
  propertyDescriptor.initialize(getter,setter);
  trace.record(BindingContext.VARIABLE,property,propertyDescriptor);
  return propertyDescriptor;
}
