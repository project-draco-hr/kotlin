{
  if (state != State.METHOD_END && state != State.CLASS_END && state != State.FIELD_END) {
    throw new IllegalStateException();
  }
  checkTopLevel();
  return generic ? signatureWriter.toString() : null;
}
