{
  JetTypeReference propertyTypeRef=property.getPropertyTypeRef();
  JetType type;
  if (propertyTypeRef == null) {
    JetExpression initializer=property.getInitializer();
    if (initializer == null) {
      semanticServices.getErrorHandler().genericError(property.getNode(),"This property must either have a type annotation or be initialized");
      type=ErrorUtils.createErrorType("No type, no body");
    }
 else {
      type=semanticServices.getTypeInferrer(trace,JetFlowInformationProvider.ERROR).getType(scope,initializer,false);
    }
  }
 else {
    type=typeResolver.resolveType(scope,propertyTypeRef);
  }
  PropertyDescriptorImpl propertyDescriptor=new PropertyDescriptorImpl(containingDeclaration,AttributeResolver.INSTANCE.resolveAttributes(property.getModifierList()),JetPsiUtil.safeName(property.getName()),property.isVar() ? type : null,type);
  trace.recordDeclarationResolution(property,propertyDescriptor);
  return propertyDescriptor;
}
