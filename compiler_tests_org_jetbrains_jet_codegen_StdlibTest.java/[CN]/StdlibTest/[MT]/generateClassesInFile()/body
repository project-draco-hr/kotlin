{
  try {
    CompileSession session=new CompileSession(myEnvironment);
    CoreCompileEnvironment.initializeKotlinRuntime(myEnvironment);
    session.addSources(myFile.getVirtualFile());
    session.addStdLibSources();
    if (!session.analyze(System.out)) {
      return null;
    }
    return session.generate();
  }
 catch (  RuntimeException e) {
    System.out.println(generateToText());
    throw e;
  }
catch (  Throwable e) {
    throw new RuntimeException(e);
  }
}
