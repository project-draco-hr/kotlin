{
  try {
    CompileSession session=new CompileSession(myEnvironment);
    session.addStdLibSources(true);
    session.addSources(myFile.getVirtualFile());
    CompileEnvironment.ensureRuntime(myEnvironment);
    if (!session.analyze(System.out)) {
      throw new RuntimeException();
    }
    return session.generate();
  }
 catch (  RuntimeException e) {
    System.out.println(generateToText());
    throw e;
  }
catch (  Throwable e) {
    throw new RuntimeException(e);
  }
}
