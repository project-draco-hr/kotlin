{
  ExpressionTypingContext context=typingContext.replaceContextDependency(INDEPENDENT);
  JetExpression tryBlock=expression.getTryBlock();
  List<JetCatchClause> catchClauses=expression.getCatchClauses();
  JetFinallySection finallyBlock=expression.getFinallyBlock();
  List<JetType> types=new ArrayList<JetType>();
  for (  JetCatchClause catchClause : catchClauses) {
    JetParameter catchParameter=catchClause.getCatchParameter();
    JetExpression catchBody=catchClause.getCatchBody();
    if (catchParameter != null) {
      DescriptorResolver.checkParameterHasNoValOrVar(context.trace,catchParameter,VAL_OR_VAR_ON_CATCH_PARAMETER);
      DescriptorResolver.checkParameterHasNoModifier(context.trace,catchParameter);
      VariableDescriptor variableDescriptor=components.descriptorResolver.resolveLocalVariableDescriptor(context.scope,catchParameter,context.trace);
      JetType throwableType=components.builtIns.getThrowable().getDefaultType();
      DataFlowUtils.checkType(variableDescriptor.getType(),catchParameter,context.replaceExpectedType(throwableType));
      if (catchBody != null) {
        WritableScope catchScope=newWritableScopeImpl(context,"Catch scope");
        catchScope.addVariableDescriptor(variableDescriptor);
        JetType type=facade.getTypeInfo(catchBody,context.replaceScope(catchScope)).getType();
        if (type != null) {
          types.add(type);
        }
      }
    }
  }
  JetTypeInfo result=TypeInfoFactoryPackage.noTypeInfo(context);
  if (finallyBlock != null) {
    result=facade.getTypeInfo(finallyBlock.getFinalExpression(),context.replaceExpectedType(NO_EXPECTED_TYPE));
  }
  JetType type=facade.getTypeInfo(tryBlock,context).getType();
  if (type != null) {
    types.add(type);
  }
  if (types.isEmpty()) {
    return result.clearType();
  }
 else {
    return result.replaceType(CommonSupertypes.commonSupertype(types));
  }
}
