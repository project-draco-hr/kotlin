{
  ExpressionTypingContext newContext=context.replaceDataFlowInfo(presentInfo).replaceExpectedType(NO_EXPECTED_TYPE).replaceContextDependency(INDEPENDENT);
  JetTypeInfo typeInfo=components.expressionTypingServices.getBlockReturnedTypeWithWritableScope(presentScope,Collections.singletonList(presentBranch),CoercionStrategy.NO_COERCION,newContext);
  JetType type=typeInfo.getType();
  DataFlowInfo dataFlowInfo;
  if (type != null && KotlinBuiltIns.isNothing(type)) {
    dataFlowInfo=otherInfo;
  }
 else {
    dataFlowInfo=typeInfo.getDataFlowInfo().or(otherInfo);
  }
  return typeInfo.replaceType(components.builtIns.getUnitType()).checkType(ifExpression,context).checkImplicitCast(ifExpression,context,isStatement).replaceDataFlowInfo(dataFlowInfo);
}
