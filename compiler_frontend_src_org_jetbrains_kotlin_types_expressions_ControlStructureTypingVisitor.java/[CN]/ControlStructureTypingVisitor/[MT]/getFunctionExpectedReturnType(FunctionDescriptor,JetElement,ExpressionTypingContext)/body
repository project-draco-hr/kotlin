{
  JetType expectedType;
  if (function instanceof JetSecondaryConstructor) {
    expectedType=DescriptorUtilsKt.getBuiltIns(descriptor).getUnitType();
  }
 else   if (function instanceof JetFunction) {
    JetFunction jetFunction=(JetFunction)function;
    expectedType=context.trace.get(EXPECTED_RETURN_TYPE,jetFunction);
    if ((expectedType == null) && (jetFunction.getTypeReference() != null || jetFunction.hasBlockBody())) {
      expectedType=descriptor.getReturnType();
    }
  }
 else {
    expectedType=descriptor.getReturnType();
  }
  return expectedType != null ? expectedType : TypeUtils.NO_EXPECTED_TYPE;
}
