{
  if (substitutor.isEmpty()) {
    return workerScope.getFunctionGroup(name);
  }
  if (functionGroups == null) {
    functionGroups=Maps.newHashMap();
  }
  FunctionGroup cachedGroup=functionGroups.get(name);
  if (cachedGroup != null) {
    return cachedGroup;
  }
  FunctionGroup functionGroup=workerScope.getFunctionGroup(name);
  FunctionGroup result;
  if (functionGroup.isEmpty()) {
    result=FunctionGroup.EMPTY;
  }
 else {
    result=new LazySubstitutingFunctionGroup(substitutor,functionGroup);
  }
  functionGroups.put(name,result);
  return result;
}
