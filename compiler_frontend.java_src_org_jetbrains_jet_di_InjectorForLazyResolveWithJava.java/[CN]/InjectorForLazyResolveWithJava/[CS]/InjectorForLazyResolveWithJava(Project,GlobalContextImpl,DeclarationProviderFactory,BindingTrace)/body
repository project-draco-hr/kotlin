{
  this.project=project;
  this.globalContext=globalContext;
  this.lockBasedStorageManager=globalContext.getStorageManager();
  this.declarationProviderFactory=declarationProviderFactory;
  this.bindingTrace=bindingTrace;
  this.module=org.jetbrains.jet.lang.resolve.java.AnalyzerFacadeForJVM.createJavaModule("<fake-jdr-module>");
  this.platformToKotlinClassMap=module.getPlatformToKotlinClassMap();
  this.resolveSession=new ResolveSession(project,globalContext,getModule(),declarationProviderFactory,bindingTrace);
  this.javaClassFinder=new JavaClassFinderImpl();
  this.virtualFileFinder=org.jetbrains.jet.lang.resolve.kotlin.VirtualFileFinder.SERVICE.getInstance(project);
  this.deserializedDescriptorResolver=new DeserializedDescriptorResolver();
  this.psiBasedExternalAnnotationResolver=new PsiBasedExternalAnnotationResolver();
  this.traceBasedExternalSignatureResolver=new TraceBasedExternalSignatureResolver();
  this.traceBasedErrorReporter=new TraceBasedErrorReporter();
  this.psiBasedMethodSignatureChecker=new PsiBasedMethodSignatureChecker();
  this.lazyResolveBasedCache=new LazyResolveBasedCache();
  this.globalJavaResolverContext=new GlobalJavaResolverContext(lockBasedStorageManager,javaClassFinder,virtualFileFinder,deserializedDescriptorResolver,psiBasedExternalAnnotationResolver,traceBasedExternalSignatureResolver,traceBasedErrorReporter,psiBasedMethodSignatureChecker,lazyResolveBasedCache);
  this.lazyJavaPackageFragmentProvider=new LazyJavaPackageFragmentProvider(globalJavaResolverContext,getModule());
  this.javaDescriptorResolver=new JavaDescriptorResolver(lazyJavaPackageFragmentProvider,getModule());
  this.memberFilter=org.jetbrains.jet.descriptors.serialization.descriptors.MemberFilter.ALWAYS_TRUE;
  this.annotationResolver=new AnnotationResolver();
  this.callResolver=new CallResolver();
  this.argumentTypeResolver=new ArgumentTypeResolver();
  this.expressionTypingComponents=new ExpressionTypingComponents();
  this.expressionTypingServices=new ExpressionTypingServices(expressionTypingComponents);
  this.controlStructureTypingUtils=new ControlStructureTypingUtils(expressionTypingServices);
  this.expressionTypingUtils=new ExpressionTypingUtils(expressionTypingServices,callResolver);
  this.forLoopConventionsChecker=new ForLoopConventionsChecker();
  this.callExpressionResolver=new CallExpressionResolver();
  this.descriptorResolver=new DescriptorResolver();
  this.delegatedPropertyResolver=new DelegatedPropertyResolver();
  this.typeResolver=new TypeResolver();
  this.qualifiedExpressionResolver=new QualifiedExpressionResolver();
  this.callResolverExtensionProvider=new CallResolverExtensionProvider();
  this.candidateResolver=new CandidateResolver();
  this.jetImportsFactory=new JetImportsFactory();
  this.scopeProvider=new ScopeProvider(getResolveSession());
  this.descriptorDeserializers=new DescriptorDeserializers();
  this.annotationDescriptorDeserializer=new AnnotationDescriptorDeserializer();
  this.descriptorDeserializersStorage=new DescriptorDeserializersStorage(lockBasedStorageManager);
  this.constantDescriptorDeserializer=new ConstantDescriptorDeserializer();
  this.resolveSession.setAnnotationResolve(annotationResolver);
  this.resolveSession.setDescriptorResolver(descriptorResolver);
  this.resolveSession.setJetImportFactory(jetImportsFactory);
  this.resolveSession.setQualifiedExpressionResolver(qualifiedExpressionResolver);
  this.resolveSession.setScopeProvider(scopeProvider);
  this.resolveSession.setTypeResolver(typeResolver);
  javaClassFinder.setProject(project);
  traceBasedExternalSignatureResolver.setExternalAnnotationResolver(psiBasedExternalAnnotationResolver);
  traceBasedExternalSignatureResolver.setTrace(bindingTrace);
  lazyResolveBasedCache.setSession(resolveSession);
  traceBasedErrorReporter.setTrace(bindingTrace);
  psiBasedMethodSignatureChecker.setExternalAnnotationResolver(psiBasedExternalAnnotationResolver);
  psiBasedMethodSignatureChecker.setExternalSignatureResolver(traceBasedExternalSignatureResolver);
  annotationResolver.setCallResolver(callResolver);
  callResolver.setArgumentTypeResolver(argumentTypeResolver);
  callResolver.setCandidateResolver(candidateResolver);
  callResolver.setExpressionTypingServices(expressionTypingServices);
  callResolver.setTypeResolver(typeResolver);
  argumentTypeResolver.setExpressionTypingServices(expressionTypingServices);
  argumentTypeResolver.setTypeResolver(typeResolver);
  expressionTypingServices.setAnnotationResolver(annotationResolver);
  expressionTypingServices.setCallExpressionResolver(callExpressionResolver);
  expressionTypingServices.setCallResolver(callResolver);
  expressionTypingServices.setDescriptorResolver(descriptorResolver);
  expressionTypingServices.setExtensionProvider(callResolverExtensionProvider);
  expressionTypingServices.setProject(project);
  expressionTypingServices.setTypeResolver(typeResolver);
  expressionTypingComponents.setCallResolver(callResolver);
  expressionTypingComponents.setControlStructureTypingUtils(controlStructureTypingUtils);
  expressionTypingComponents.setExpressionTypingServices(expressionTypingServices);
  expressionTypingComponents.setExpressionTypingUtils(expressionTypingUtils);
  expressionTypingComponents.setForLoopConventionsChecker(forLoopConventionsChecker);
  expressionTypingComponents.setGlobalContext(globalContext);
  expressionTypingComponents.setPlatformToKotlinClassMap(platformToKotlinClassMap);
  forLoopConventionsChecker.setExpressionTypingServices(expressionTypingServices);
  forLoopConventionsChecker.setExpressionTypingUtils(expressionTypingUtils);
  forLoopConventionsChecker.setProject(project);
  callExpressionResolver.setExpressionTypingServices(expressionTypingServices);
  descriptorResolver.setAnnotationResolver(annotationResolver);
  descriptorResolver.setDelegatedPropertyResolver(delegatedPropertyResolver);
  descriptorResolver.setExpressionTypingServices(expressionTypingServices);
  descriptorResolver.setStorageManager(lockBasedStorageManager);
  descriptorResolver.setTypeResolver(typeResolver);
  delegatedPropertyResolver.setCallResolver(callResolver);
  delegatedPropertyResolver.setExpressionTypingServices(expressionTypingServices);
  typeResolver.setAnnotationResolver(annotationResolver);
  typeResolver.setModuleDescriptor(module);
  typeResolver.setQualifiedExpressionResolver(qualifiedExpressionResolver);
  candidateResolver.setArgumentTypeResolver(argumentTypeResolver);
  jetImportsFactory.setProject(project);
  deserializedDescriptorResolver.setAnnotationDeserializer(descriptorDeserializers);
  deserializedDescriptorResolver.setErrorReporter(traceBasedErrorReporter);
  deserializedDescriptorResolver.setJavaDescriptorResolver(javaDescriptorResolver);
  deserializedDescriptorResolver.setJavaPackageFragmentProvider(lazyJavaPackageFragmentProvider);
  deserializedDescriptorResolver.setMemberFilter(memberFilter);
  deserializedDescriptorResolver.setStorageManager(lockBasedStorageManager);
  descriptorDeserializers.setAnnotationDescriptorDeserializer(annotationDescriptorDeserializer);
  descriptorDeserializers.setConstantDescriptorDeserializer(constantDescriptorDeserializer);
  annotationDescriptorDeserializer.setClassResolver(javaDescriptorResolver);
  annotationDescriptorDeserializer.setErrorReporter(traceBasedErrorReporter);
  annotationDescriptorDeserializer.setKotlinClassFinder(virtualFileFinder);
  annotationDescriptorDeserializer.setStorage(descriptorDeserializersStorage);
  descriptorDeserializersStorage.setClassResolver(javaDescriptorResolver);
  descriptorDeserializersStorage.setErrorReporter(traceBasedErrorReporter);
  constantDescriptorDeserializer.setClassResolver(javaDescriptorResolver);
  constantDescriptorDeserializer.setErrorReporter(traceBasedErrorReporter);
  constantDescriptorDeserializer.setKotlinClassFinder(virtualFileFinder);
  constantDescriptorDeserializer.setStorage(descriptorDeserializersStorage);
  javaClassFinder.initialize();
}
