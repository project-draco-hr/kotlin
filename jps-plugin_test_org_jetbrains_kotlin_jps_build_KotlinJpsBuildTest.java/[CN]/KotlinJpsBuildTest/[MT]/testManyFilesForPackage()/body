{
  doTest();
  JpsModule module=myProject.getModules().get(0);
  assertFilesExistInOutput(module,"foo/FooPackage.class","boo/BooPackage.class","foo/Bar.class");
  checkWhen(touch("src/main.kt"),null,packageClasses("kotlinProject","src/main.kt","foo.FooPackage"));
  checkWhen(touch("src/boo.kt"),null,packageClasses("kotlinProject","src/boo.kt","boo.BooPackage"));
  checkWhen(touch("src/Bar.kt"),new String[]{"src/Bar.kt"},new String[]{klass("kotlinProject","foo.Bar"),klass("kotlinProject","foo.FooPackage"),packagePartClass("kotlinProject","src/Bar.kt","foo.FooPackage")});
  checkWhen(del("src/main.kt"),new String[]{"src/Bar.kt","src/boo.kt"},mergeArrays(packageClasses("kotlinProject","src/main.kt","foo.FooPackage"),packageClasses("kotlinProject","src/Bar.kt","foo.FooPackage"),packageClasses("kotlinProject","src/boo.kt","boo.BooPackage"),new String[]{klass("kotlinProject","foo.Bar")}));
  assertFilesExistInOutput(module,"foo/FooPackage.class","boo/BooPackage.class","foo/Bar.class");
  checkWhen(touch("src/boo.kt"),null,packageClasses("kotlinProject","src/boo.kt","boo.BooPackage"));
  checkWhen(touch("src/Bar.kt"),null,new String[]{klass("kotlinProject","foo.Bar"),klass("kotlinProject","foo.FooPackage"),packagePartClass("kotlinProject","src/Bar.kt","foo.FooPackage")});
}
