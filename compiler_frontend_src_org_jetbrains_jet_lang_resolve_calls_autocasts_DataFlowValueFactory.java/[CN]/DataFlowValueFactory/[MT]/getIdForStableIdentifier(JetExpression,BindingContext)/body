{
  if (expression instanceof JetParenthesizedExpression) {
    JetParenthesizedExpression parenthesizedExpression=(JetParenthesizedExpression)expression;
    JetExpression innerExpression=parenthesizedExpression.getExpression();
    return getIdForStableIdentifier(innerExpression,bindingContext);
  }
 else   if (expression instanceof JetBlockExpression) {
    List<JetElement> statements=((JetBlockExpression)expression).getStatements();
    if (statements.size() == 1) {
      JetElement lastStatement=JetPsiUtil.getLastStatementInABlock((JetBlockExpression)expression);
      if (lastStatement instanceof JetExpression) {
        return getIdForStableIdentifier((JetExpression)lastStatement,bindingContext);
      }
    }
  }
 else   if (expression instanceof JetQualifiedExpression) {
    JetQualifiedExpression qualifiedExpression=(JetQualifiedExpression)expression;
    JetExpression receiverExpression=qualifiedExpression.getReceiverExpression();
    JetExpression selectorExpression=qualifiedExpression.getSelectorExpression();
    IdentifierInfo receiverId=getIdForStableIdentifier(receiverExpression,bindingContext);
    IdentifierInfo selectorId=getIdForStableIdentifier(selectorExpression,bindingContext);
    return combineInfo(receiverId,selectorId);
  }
  if (expression instanceof JetSimpleNameExpression) {
    return getIdForSimpleNameExpression((JetSimpleNameExpression)expression,bindingContext);
  }
 else   if (expression instanceof JetThisExpression) {
    JetThisExpression thisExpression=(JetThisExpression)expression;
    DeclarationDescriptor declarationDescriptor=bindingContext.get(REFERENCE_TARGET,thisExpression.getInstanceReference());
    return getIdForThisReceiver(declarationDescriptor);
  }
 else   if (expression instanceof JetRootNamespaceExpression) {
    return createNamespaceInfo(JetModuleUtil.getRootNamespaceType(expression));
  }
  return NO_IDENTIFIER_INFO;
}
