{
  if (expression != null) {
    JetExpression deparenthesized=JetPsiUtil.deparenthesize(expression);
    if (expression != deparenthesized) {
      return getIdForStableIdentifier(deparenthesized,bindingContext);
    }
  }
  if (expression instanceof JetQualifiedExpression) {
    JetQualifiedExpression qualifiedExpression=(JetQualifiedExpression)expression;
    JetExpression receiverExpression=qualifiedExpression.getReceiverExpression();
    JetExpression selectorExpression=qualifiedExpression.getSelectorExpression();
    IdentifierInfo receiverId=getIdForStableIdentifier(receiverExpression,bindingContext);
    IdentifierInfo selectorId=getIdForStableIdentifier(selectorExpression,bindingContext);
    return combineInfo(receiverId,selectorId);
  }
  if (expression instanceof JetSimpleNameExpression) {
    return getIdForSimpleNameExpression((JetSimpleNameExpression)expression,bindingContext);
  }
 else   if (expression instanceof JetThisExpression) {
    JetThisExpression thisExpression=(JetThisExpression)expression;
    DeclarationDescriptor declarationDescriptor=bindingContext.get(REFERENCE_TARGET,thisExpression.getInstanceReference());
    return getIdForThisReceiver(declarationDescriptor);
  }
 else   if (expression instanceof JetRootNamespaceExpression) {
    return createPackageInfo(JetModuleUtil.getRootPackageType(expression));
  }
  return NO_IDENTIFIER_INFO;
}
