{
  if (module == null) {
    notifyFailure("Internal error: Module not found.");
    return;
  }
  File rootDir=getRootDir(module);
  if (!rootDir.isDirectory()) {
    notifyFailure("Internal error: Broken content root.");
    return;
  }
  if (!copyJsLibFiles(module,rootDir))   return;
  setUpK2JSModuleComponent(module);
  setUpLibraryAsSourceLibrary(module,rootDir);
  restartHighlightingInTheWholeProject(module);
  refreshRootDir(module,continuation);
}
