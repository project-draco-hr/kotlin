{
  super.projectOpened();
  MessageBusConnection connection=myProject.getMessageBus().connect();
  notificationAlarm=new Alarm(Alarm.ThreadToUse.POOLED_THREAD,myProject);
  connection.subscribe(DumbService.DUMB_MODE,new DumbService.DumbModeListener(){
    @Override public void enteredDumbMode(){
    }
    @Override public void exitDumbMode(){
      scheduleNotificationCheck();
    }
  }
);
  connection.subscribe(ProjectTopics.PROJECT_ROOTS,new ModuleRootAdapter(){
    @Override public void rootsChanged(    ModuleRootEvent event){
      scheduleNotificationCheck();
    }
  }
);
  connection.subscribe(VirtualFileManager.VFS_CHANGES,new BulkFileListener.Adapter(){
    @Override public void after(    @NotNull List<? extends VFileEvent> events){
      for (      VFileEvent event : events) {
        if (event instanceof VFileCreateEvent || event instanceof VFileDeleteEvent || event instanceof VFileMoveEvent|| event instanceof VFileCopyEvent) {
          scheduleNotificationCheck();
          break;
        }
      }
    }
  }
);
}
