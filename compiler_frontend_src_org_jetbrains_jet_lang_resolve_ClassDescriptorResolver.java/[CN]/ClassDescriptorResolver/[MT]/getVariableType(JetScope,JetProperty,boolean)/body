{
  JetTypeReference propertyTypeRef=property.getPropertyTypeRef();
  if (propertyTypeRef == null) {
    final JetExpression initializer=property.getInitializer();
    if (initializer == null) {
      PsiElement nameIdentifier=property.getNameIdentifier();
      if (nameIdentifier != null) {
        trace.report(PROPERTY_WITH_NO_TYPE_NO_INITIALIZER.on(nameIdentifier.getNode()));
      }
      return ErrorUtils.createErrorType("No type, no body");
    }
 else {
      LazyValue<JetType> lazyValue=new LazyValue<JetType>(){
        @Override protected JetType compute(){
          JetFlowInformationProvider flowInformationProvider=computeFlowData(property,initializer);
          return semanticServices.getTypeInferrerServices(trace,flowInformationProvider).safeGetType(scope,initializer,JetTypeInferrer.NO_EXPECTED_TYPE);
        }
      }
;
      if (allowDeferred) {
        return new DeferredType(lazyValue);
      }
 else {
        return lazyValue.get();
      }
    }
  }
 else {
    return typeResolver.resolveType(scope,propertyTypeRef);
  }
}
