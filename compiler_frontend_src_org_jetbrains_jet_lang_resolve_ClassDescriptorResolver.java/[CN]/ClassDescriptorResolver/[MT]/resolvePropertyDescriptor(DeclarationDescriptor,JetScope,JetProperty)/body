{
  JetScope scopeWithTypeParameters;
  List<TypeParameterDescriptor> typeParameterDescriptors;
  List<JetTypeParameter> typeParameters=property.getTypeParameters();
  if (typeParameters.isEmpty()) {
    scopeWithTypeParameters=scope;
    typeParameterDescriptors=Collections.emptyList();
  }
 else {
    WritableScope writableScope=new WritableScopeImpl(scope,containingDeclaration,new TraceBasedRedeclarationHandler(trace)).setDebugName("Scope with type parameters of a property");
    typeParameterDescriptors=resolveTypeParameters(containingDeclaration,writableScope,typeParameters);
    resolveGenericBounds(property,writableScope,typeParameterDescriptors);
    scopeWithTypeParameters=writableScope;
  }
  JetType receiverType=null;
  JetTypeReference receiverTypeRef=property.getReceiverTypeRef();
  if (receiverTypeRef != null) {
    receiverType=typeResolver.resolveType(scopeWithTypeParameters,receiverTypeRef);
  }
  JetModifierList modifierList=property.getModifierList();
  boolean isVar=property.isVar();
  JetType type=getVariableType(scopeWithTypeParameters,property,true);
  boolean hasBody=hasBody(property);
  Modality defaultModality=getDefaultModality(containingDeclaration,hasBody);
  PropertyDescriptor propertyDescriptor=new PropertyDescriptor(containingDeclaration,annotationResolver.resolveAnnotations(scope,modifierList),resolveModalityFromModifiers(property.getModifierList(),defaultModality),resolveVisibilityFromModifiers(property.getModifierList()),isVar,receiverType,JetPsiUtil.safeName(property.getName()),isVar ? type : null,type);
  propertyDescriptor.initialize(typeParameterDescriptors,resolvePropertyGetterDescriptor(scopeWithTypeParameters,property,propertyDescriptor),resolvePropertySetterDescriptor(scopeWithTypeParameters,property,propertyDescriptor));
  trace.record(BindingContext.VARIABLE,property,propertyDescriptor);
  return propertyDescriptor;
}
