{
  int obfuscate=0;
  String result=name;
  while (true) {
    JsName existingNameWithSameIdent=scope.findExistingName(result);
    boolean isDuplicate=(existingNameWithSameIdent != null) && ownsName(scope,existingNameWithSameIdent);
    if (!isDuplicate)     break;
    result=name + "$" + obfuscate;
    obfuscate++;
  }
  return result;
}
