{
  AnalysisResult newResult=resolutionFacade.analyzeFullyAndGetResult(originalElements);
  BindingContext bindingContext=newResult.getBindingContext();
  Set<JetElement> collectedElements=new HashSet<JetElement>();
  collectedElements.addAll(originalElements);
  Map<Call,ResolvedCall<?>> contents=bindingContext.getSliceContents(BindingContext.RESOLVED_CALL);
  for (  ResolvedCall call : contents.values()) {
    CallableDescriptor descriptor=call.getResultingDescriptor();
    if (!(descriptor instanceof DeserializedSimpleFunctionDescriptor) && InlineUtil.isInline(descriptor)) {
      if (!processOnlyReifiedInline || hasReifiedTypeParameters(descriptor)) {
        PsiElement declaration=DescriptorToSourceUtilsIde.INSTANCE$.getAnyDeclaration(project,descriptor);
        if (declaration != null && declaration instanceof JetElement) {
          collectedElements.add((JetElement)declaration);
        }
      }
    }
  }
  if (collectedElements.size() != originalElements.size()) {
    if (newResult.isError() || deep >= 10) {
      resultElements.set(collectedElements);
      return bindingContext;
    }
    return processInlinedDeclarations(project,resolutionFacade,collectedElements,deep + 1,resultElements,processOnlyReifiedInline);
  }
  resultElements.set(collectedElements);
  return bindingContext;
}
