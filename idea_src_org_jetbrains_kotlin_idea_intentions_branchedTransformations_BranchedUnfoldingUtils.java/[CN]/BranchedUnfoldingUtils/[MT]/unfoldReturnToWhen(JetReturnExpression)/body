{
  JetWhenExpression whenExpression=(JetWhenExpression)returnExpression.getReturnedExpression();
  assertNotNull(whenExpression);
  JetWhenExpression newWhenExpression=(JetWhenExpression)whenExpression.copy();
  for (  JetWhenEntry entry : newWhenExpression.getEntries()) {
    JetExpression currExpr=getOutermostLastBlockElement(entry.getExpression());
    assertNotNull(currExpr);
    currExpr.replace(JetPsiFactory(returnExpression).createReturn(currExpr));
  }
  returnExpression.replace(newWhenExpression);
}
