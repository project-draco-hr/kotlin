{
  holderFull.writeFilesOnDiskIfNeeded();
  holderMock.writeFilesOnDiskIfNeeded();
  for (  File file : files) {
    if (SpecialFiles.getExcludedFiles().contains(file.getName())) {
      continue;
    }
    if (file.isDirectory()) {
      File[] listFiles=file.listFiles();
      if (listFiles != null) {
        processFiles(printer,listFiles,holderFull,holderMock);
      }
    }
 else {
      String text=FileUtil.loadFile(file,true);
      if (hasBoxMethod(text)) {
        String generatedTestName=generateTestName(file.getName());
        String packageName=file.getPath().replaceAll("\\\\|-|\\.|/","_");
        text=changePackage(packageName,text);
        if (SpecialFiles.getFilesCompiledWithoutStdLib().contains(file.getName())) {
          CodegenTestFiles codegenFile=CodegenTestFiles.create(file.getName(),text,holderMock.environment.getProject());
          holderMock.files.add(codegenFile.getPsiFile());
        }
 else {
          CodegenTestFiles codegenFile=CodegenTestFiles.create(file.getName(),text,holderFull.environment.getProject());
          holderFull.files.add(codegenFile.getPsiFile());
        }
        generateTestMethod(printer,generatedTestName,StringUtil.escapeStringCharacters(file.getPath()));
      }
    }
  }
}
