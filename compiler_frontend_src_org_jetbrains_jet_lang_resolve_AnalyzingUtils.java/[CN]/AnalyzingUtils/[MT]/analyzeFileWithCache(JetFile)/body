{
  CachedValue<BindingContext> bindingContextCachedValue=file.getUserData(BINDING_CONTEXT);
  if (bindingContextCachedValue == null) {
    bindingContextCachedValue=CachedValuesManager.getManager(file.getProject()).createCachedValue(new CachedValueProvider<BindingContext>(){
      @Override public Result<BindingContext> compute(){
synchronized (lock) {
          try {
            JetNamespace rootNamespace=file.getRootNamespace();
            BindingContext bindingContext=analyzeNamespace(rootNamespace,JetControlFlowDataTraceFactory.EMPTY);
            return new Result<BindingContext>(bindingContext,PsiModificationTracker.MODIFICATION_COUNT);
          }
 catch (          ProcessCanceledException e) {
            throw e;
          }
catch (          Throwable e) {
            e.printStackTrace();
            BindingTraceContext bindingTraceContext=new BindingTraceContext();
            bindingTraceContext.report(Errors.EXCEPTION_WHILE_ANALYZING.on(file,e));
            return new Result<BindingContext>(bindingTraceContext.getBindingContext(),PsiModificationTracker.MODIFICATION_COUNT);
          }
        }
      }
    }
,false);
    file.putUserData(BINDING_CONTEXT,bindingContextCachedValue);
  }
  return bindingContextCachedValue.getValue();
}
