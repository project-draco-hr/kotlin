{
  ReceiverParameterDescriptor receiverParameter=descriptor.getExtensionReceiverParameter();
  List<TypeProjection> typeArguments=new ArrayList<TypeProjection>(2);
  ClassDescriptor classDescriptor;
  if (receiverParameter != null) {
    classDescriptor=extensionFunctionImpl;
    typeArguments.add(new TypeProjectionImpl(receiverParameter.getType()));
  }
 else {
    classDescriptor=functionImpl;
  }
  typeArguments.add(new TypeProjectionImpl(descriptor.getReturnType()));
  JetType functionImplType=new JetTypeImpl(classDescriptor.getDefaultType().getAnnotations(),classDescriptor.getTypeConstructor(),false,typeArguments,classDescriptor.getMemberScope(typeArguments));
  JetType functionType=getBuiltIns(descriptor).getFunctionType(Annotations.EMPTY,receiverParameter == null ? null : receiverParameter.getType(),ExpressionTypingUtils.getValueParametersTypes(descriptor.getValueParameters()),descriptor.getReturnType());
  return Arrays.asList(functionImplType,functionType);
}
