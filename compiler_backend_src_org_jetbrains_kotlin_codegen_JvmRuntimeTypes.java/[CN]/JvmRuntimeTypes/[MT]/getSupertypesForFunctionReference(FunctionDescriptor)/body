{
  ReceiverParameterDescriptor extensionReceiver=descriptor.getExtensionReceiverParameter();
  ReceiverParameterDescriptor dispatchReceiver=descriptor.getDispatchReceiverParameter();
  ClassDescriptor functionImplClass;
  JetType receiverType;
  if (extensionReceiver != null) {
    functionImplClass=extensionFunctionImpl;
    receiverType=extensionReceiver.getType();
  }
 else   if (dispatchReceiver != null) {
    functionImplClass=memberFunctionImpl;
    receiverType=dispatchReceiver.getType();
  }
 else {
    functionImplClass=functionImpl;
    receiverType=null;
  }
  JetType functionImplType=functionImplClass.getDefaultType();
  JetType kFunctionType=reflectionTypes.getKFunctionType(Annotations.EMPTY,receiverType,ExpressionTypingUtils.getValueParametersTypes(descriptor.getValueParameters()),descriptor.getReturnType(),extensionReceiver != null);
  return Arrays.asList(functionImplType,kFunctionType);
}
