{
  Project project=property.getProject();
  PsiElement parent=property.getParent();
  assertNotNull(parent);
  T initializer=(T)property.getInitializer();
  assertNotNull(initializer);
  JetSimpleNameExpression propertyName=JetPsiFactory.createSimpleName(project,property.getName());
  T newInitializer=(T)initializer.copy();
  unfolder.processInitializer(newInitializer,propertyName,project);
  parent.addAfter(newInitializer,property);
  parent.addAfter(JetPsiFactory.createNewLine(project),property);
  JetType inferredType=getPropertyTypeIfNeeded(property,file);
  String typeStr=inferredType != null ? DescriptorRenderer.TEXT.renderType(inferredType) : JetPsiUtil.getNullableText(property.getTypeRef());
  property=(JetProperty)property.replace(JetPsiFactory.createProperty(project,property.getName(),typeStr,property.isVar()));
  if (inferredType != null) {
    ReferenceToClassesShortening.compactReferenceToClasses(Collections.singletonList(property.getTypeRef()));
  }
}
