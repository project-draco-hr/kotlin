{
  if (checkUnfoldableAssignment(root)) {
    JetBinaryExpression assignment=(JetBinaryExpression)root;
    if (assignment.getRight() instanceof JetIfExpression) {
      unfoldAssignmentToIf(assignment);
    }
 else     if (assignment.getRight() instanceof JetWhenExpression) {
      unfoldAssignmentToWhen(assignment);
    }
  }
 else   if (checkUnfoldableReturn(root)) {
    JetReturnExpression returnExpression=(JetReturnExpression)root;
    if (returnExpression.getReturnedExpression() instanceof JetIfExpression) {
      unfoldReturnToIf(returnExpression);
    }
 else     if (returnExpression.getReturnedExpression() instanceof JetWhenExpression) {
      unfoldReturnToWhen(returnExpression);
    }
  }
}
