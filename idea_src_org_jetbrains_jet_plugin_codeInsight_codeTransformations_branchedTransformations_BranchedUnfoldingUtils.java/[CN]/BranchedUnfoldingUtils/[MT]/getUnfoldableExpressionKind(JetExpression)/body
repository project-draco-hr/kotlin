{
  if (root == null)   return null;
  if (JetPsiUtil.isAssignment(root)) {
    JetBinaryExpression assignment=(JetBinaryExpression)root;
    assertNotNull(assignment.getLeft());
    JetExpression rhs=assignment.getRight();
    if (rhs instanceof JetIfExpression)     return UnfoldableKind.ASSIGNMENT_TO_IF;
    if (rhs instanceof JetWhenExpression && JetPsiUtil.checkWhenExpressionHasSingleElse((JetWhenExpression)rhs)) {
      return UnfoldableKind.ASSIGNMENT_TO_WHEN;
    }
  }
 else   if (root instanceof JetReturnExpression) {
    JetExpression resultExpr=((JetReturnExpression)root).getReturnedExpression();
    if (resultExpr instanceof JetIfExpression)     return UnfoldableKind.RETURN_TO_IF;
    if (resultExpr instanceof JetWhenExpression && JetPsiUtil.checkWhenExpressionHasSingleElse((JetWhenExpression)resultExpr)) {
      return UnfoldableKind.RETURN_TO_WHEN;
    }
  }
  return null;
}
