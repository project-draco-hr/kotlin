{
  if (!primaryConstructorResolved) {
    JetClassOrObject classOrObject=declarationProvider.getOwnerClassOrObject();
    if (classOrObject instanceof JetClass) {
      JetClass jetClass=(JetClass)classOrObject;
      ConstructorDescriptorImpl descriptor=resolveSession.getInjector().getDescriptorResolver().resolvePrimaryConstructorDescriptor(thisDescriptor.getScopeForClassHeaderResolution(),thisDescriptor,jetClass,resolveSession.getTrace());
      primaryConstructor=descriptor;
      ((ConstructorDescriptorImpl)primaryConstructor).setReturnType(DeferredType.create(resolveSession.getTrace(),new LazyValue<JetType>(){
        @Override protected JetType compute(){
          return thisDescriptor.getDefaultType();
        }
      }
));
    }
    primaryConstructorResolved=true;
  }
  return primaryConstructor;
}
