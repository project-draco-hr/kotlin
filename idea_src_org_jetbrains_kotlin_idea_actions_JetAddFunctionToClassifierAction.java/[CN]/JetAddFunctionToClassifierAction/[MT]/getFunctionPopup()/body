{
  return new BaseListPopupStep<FunctionDescriptor>(JetBundle.message("add.function.to.type.action.type.chooser"),functionsToAdd){
    @Override public boolean isAutoSelectionEnabled(){
      return false;
    }
    @Override public PopupStep onChosen(    FunctionDescriptor selectedValue,    boolean finalChoice){
      if (finalChoice) {
        addFunction(selectedValue);
      }
      return FINAL_CHOICE;
    }
    @Override public Icon getIconFor(    FunctionDescriptor aValue){
      return PlatformIcons.FUNCTION_ICON;
    }
    @NotNull @Override public String getTextFor(    FunctionDescriptor functionDescriptor){
      ClassDescriptor type=(ClassDescriptor)functionDescriptor.getContainingDeclaration();
      return JetBundle.message("add.function.to.type.action.single",IdeDescriptorRenderers.SOURCE_CODE_SHORT_NAMES_IN_TYPES.render(functionDescriptor),type.getName().toString());
    }
  }
;
}
