{
  CachedValue<PsiJavaFileStub> answer=file.getUserData(JAVA_API_STUB);
  if (answer == null) {
    answer=CachedValuesManager.getManager(getProject()).createCachedValue(new CachedValueProvider<PsiJavaFileStub>(){
      @Override public Result<PsiJavaFileStub> compute(){
        return Result.create(calcStub(),PsiModificationTracker.OUT_OF_CODE_BLOCK_MODIFICATION_COUNT);
      }
    }
,false);
    file.putUserData(JAVA_API_STUB,answer);
  }
  return answer.getValue();
}
