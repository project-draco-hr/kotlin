{
  Project project=getProject();
  JetExpression jetExpression=JetPsiFactoryKt.JetPsiFactory(project).createExpression(expression);
  JetType type=expressionTypingServices.getType(ScopeUtilsKt.asLexicalScope(addImports(scope)),jetExpression,TypeUtils.NO_EXPECTED_TYPE,DataFlowInfo.EMPTY,new BindingTraceContext());
  JetType expectedType=expectedTypeStr == null ? null : makeType(expectedTypeStr);
  assertEquals(expectedType,type);
}
