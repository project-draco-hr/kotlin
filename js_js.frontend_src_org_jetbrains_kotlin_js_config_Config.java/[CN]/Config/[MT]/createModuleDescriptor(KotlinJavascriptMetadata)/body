{
  ModuleDescriptorImpl moduleDescriptor=TopDownAnalyzerFacadeForJS.createJsModule("<" + metadata.getModuleName() + ">");
  List<PackageFragmentProvider> providers=KotlinJavascriptSerializationUtil.getPackageFragmentProviders(moduleDescriptor,metadata.getBody());
  CompositePackageFragmentProvider compositePackageFragmentProvider=new CompositePackageFragmentProvider(providers);
  moduleDescriptor.initialize(compositePackageFragmentProvider);
  moduleDescriptor.addDependencyOnModule(moduleDescriptor);
  moduleDescriptor.addDependencyOnModule(KotlinBuiltIns.getInstance().getBuiltInsModule());
  moduleDescriptor.seal();
  return moduleDescriptor;
}
