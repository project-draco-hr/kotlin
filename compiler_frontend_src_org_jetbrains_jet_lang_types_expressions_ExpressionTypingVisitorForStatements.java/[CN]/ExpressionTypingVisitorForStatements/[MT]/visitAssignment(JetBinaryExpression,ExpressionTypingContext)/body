{
  ExpressionTypingContext context=contextWithExpectedType.replaceExpectedType(TypeUtils.NO_EXPECTED_TYPE).replaceScope(scope);
  JetExpression left=context.expressionTypingServices.deparenthesize(expression.getLeft(),context);
  JetExpression right=expression.getRight();
  if (left instanceof JetArrayAccessExpression) {
    JetArrayAccessExpression arrayAccessExpression=(JetArrayAccessExpression)left;
    if (right == null)     return JetTypeInfo.create(null,context.dataFlowInfo);
    JetType assignmentType=basic.resolveArrayAccessSetMethod(arrayAccessExpression,right,context,context.trace);
    basic.checkLValue(context.trace,arrayAccessExpression);
    return JetTypeInfo.create(checkAssignmentType(assignmentType,expression,contextWithExpectedType),context.dataFlowInfo);
  }
  JetTypeInfo leftInfo=facade.getTypeInfo(expression.getLeft(),context);
  JetType leftType=leftInfo.getType();
  DataFlowInfo dataFlowInfo=leftInfo.getDataFlowInfo();
  if (right != null) {
    JetTypeInfo rightInfo=facade.getTypeInfo(right,context.replaceDataFlowInfo(dataFlowInfo).replaceExpectedType(leftType));
    dataFlowInfo=rightInfo.getDataFlowInfo();
  }
  if (leftType != null) {
    basic.checkLValue(context.trace,expression.getLeft());
  }
  return DataFlowUtils.checkStatementType(expression,contextWithExpectedType,dataFlowInfo);
}
