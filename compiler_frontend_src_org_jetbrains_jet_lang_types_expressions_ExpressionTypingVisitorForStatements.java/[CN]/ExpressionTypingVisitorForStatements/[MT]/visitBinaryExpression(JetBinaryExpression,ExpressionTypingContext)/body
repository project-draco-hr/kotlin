{
  JetSimpleNameExpression operationSign=expression.getOperationReference();
  IElementType operationType=operationSign.getReferencedNameElementType();
  JetType result;
  DataFlowInfo dataFlowInfo;
  if (operationType == JetTokens.EQ) {
    JetTypeInfo typeInfo=visitAssignment(expression,context);
    result=typeInfo.getType();
    dataFlowInfo=typeInfo.getDataFlowInfo();
  }
 else   if (OperatorConventions.ASSIGNMENT_OPERATIONS.containsKey(operationType)) {
    result=visitAssignmentOperation(expression,context);
    dataFlowInfo=context.dataFlowInfo;
  }
 else {
    return facade.getTypeInfo(expression,context);
  }
  return DataFlowUtils.checkType(result,expression,context,dataFlowInfo);
}
