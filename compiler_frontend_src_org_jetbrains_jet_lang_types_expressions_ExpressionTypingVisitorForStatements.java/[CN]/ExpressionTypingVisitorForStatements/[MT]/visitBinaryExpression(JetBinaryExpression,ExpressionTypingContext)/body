{
  JetSimpleNameExpression operationSign=expression.getOperationReference();
  IElementType operationType=operationSign.getReferencedNameElementType();
  JetType result;
  if (operationType == JetTokens.EQ) {
    result=visitAssignment(expression,contextWithExpectedType);
  }
 else   if (OperatorConventions.ASSIGNMENT_OPERATIONS.containsKey(operationType)) {
    result=visitAssignmentOperation(expression,contextWithExpectedType);
  }
 else {
    return facade.getType(expression,contextWithExpectedType);
  }
  return DataFlowUtils.checkType(result,expression,contextWithExpectedType);
}
