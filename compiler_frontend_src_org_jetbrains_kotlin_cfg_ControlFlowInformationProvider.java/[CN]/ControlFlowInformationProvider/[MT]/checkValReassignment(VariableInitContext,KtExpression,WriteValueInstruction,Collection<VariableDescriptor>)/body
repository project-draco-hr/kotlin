{
  VariableDescriptor variableDescriptor=ctxt.variableDescriptor;
  PropertyDescriptor propertyDescriptor=SyntheticFieldDescriptorKt.getReferencedProperty(variableDescriptor);
  if (KtPsiUtil.isBackingFieldReference(variableDescriptor) && propertyDescriptor != null) {
    KtPropertyAccessor accessor=PsiTreeUtil.getParentOfType(expression,KtPropertyAccessor.class);
    if (accessor != null) {
      DeclarationDescriptor accessorDescriptor=trace.get(BindingContext.DECLARATION_TO_DESCRIPTOR,accessor);
      if (propertyDescriptor.getGetter() == accessorDescriptor) {
        return false;
      }
    }
  }
  boolean mayBeInitializedNotHere=ctxt.enterInitState.mayBeInitialized();
  boolean hasBackingField=true;
  if (variableDescriptor instanceof PropertyDescriptor) {
    hasBackingField=trace.get(BindingContext.BACKING_FIELD_REQUIRED,(PropertyDescriptor)variableDescriptor);
  }
  if (variableDescriptor.isVar() && variableDescriptor instanceof PropertyDescriptor) {
    DeclarationDescriptor descriptor=BindingContextUtils.getEnclosingDescriptor(trace.getBindingContext(),expression);
    PropertySetterDescriptor setterDescriptor=((PropertyDescriptor)variableDescriptor).getSetter();
    ResolvedCall<? extends CallableDescriptor> resolvedCall=CallUtilKt.getResolvedCall(expression,trace.getBindingContext());
    ReceiverValue receiverValue=null;
    if (resolvedCall != null) {
      receiverValue=resolvedCall.getDispatchReceiver();
    }
    if (Visibilities.isVisible(receiverValue,variableDescriptor,descriptor) && setterDescriptor != null && !Visibilities.isVisible(receiverValue,setterDescriptor,descriptor)) {
      report(Errors.INVISIBLE_SETTER.on(expression,variableDescriptor,setterDescriptor.getVisibility(),setterDescriptor),ctxt);
      return true;
    }
  }
  boolean isThisOrNoDispatchReceiver=PseudocodeUtil.isThisOrNoDispatchReceiver(writeValueInstruction,trace.getBindingContext());
  boolean captured=isCapturedWrite(variableDescriptor,writeValueInstruction);
  if ((mayBeInitializedNotHere || !hasBackingField || !isThisOrNoDispatchReceiver|| captured) && !variableDescriptor.isVar()) {
    boolean hasReassignMethodReturningUnit=false;
    KtSimpleNameExpression operationReference=null;
    PsiElement parent=expression.getParent();
    if (parent instanceof KtBinaryExpression) {
      operationReference=((KtBinaryExpression)parent).getOperationReference();
    }
 else     if (parent instanceof KtUnaryExpression) {
      operationReference=((KtUnaryExpression)parent).getOperationReference();
    }
    if (operationReference != null) {
      DeclarationDescriptor descriptor=trace.get(BindingContext.REFERENCE_TARGET,operationReference);
      if (descriptor instanceof FunctionDescriptor) {
        if (KotlinBuiltIns.isUnit(((FunctionDescriptor)descriptor).getReturnType())) {
          hasReassignMethodReturningUnit=true;
        }
      }
      if (descriptor == null) {
        Collection<? extends DeclarationDescriptor> descriptors=trace.get(BindingContext.AMBIGUOUS_REFERENCE_TARGET,operationReference);
        if (descriptors != null) {
          for (          DeclarationDescriptor referenceDescriptor : descriptors) {
            if (KotlinBuiltIns.isUnit(((FunctionDescriptor)referenceDescriptor).getReturnType())) {
              hasReassignMethodReturningUnit=true;
            }
          }
        }
      }
    }
    if (!hasReassignMethodReturningUnit) {
      if (!isThisOrNoDispatchReceiver || !varWithValReassignErrorGenerated.contains(variableDescriptor)) {
        if (captured && !mayBeInitializedNotHere && hasBackingField&& isThisOrNoDispatchReceiver) {
          report(Errors.CAPTURED_VAL_INITIALIZATION.on(expression,variableDescriptor),ctxt);
        }
 else {
          report(Errors.VAL_REASSIGNMENT.on(expression,variableDescriptor),ctxt);
        }
      }
      if (isThisOrNoDispatchReceiver) {
        varWithValReassignErrorGenerated.add(variableDescriptor);
      }
      return true;
    }
  }
  return false;
}
