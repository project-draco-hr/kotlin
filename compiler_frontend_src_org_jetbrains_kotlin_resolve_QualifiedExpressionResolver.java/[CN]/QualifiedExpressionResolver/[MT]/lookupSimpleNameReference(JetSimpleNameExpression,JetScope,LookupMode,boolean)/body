{
  Name referencedName=referenceExpression.getReferencedNameAsName();
  Collection<DeclarationDescriptor> descriptors=Sets.newLinkedHashSet();
  PackageViewDescriptor packageDescriptor=outerScope.getPackage(referencedName);
  if (packageDescriptor != null) {
    descriptors.add(packageDescriptor);
  }
  ClassifierDescriptor classifierDescriptor=outerScope.getClassifier(referencedName,UsageLocation.NO_LOCATION);
  if (classifierDescriptor != null) {
    descriptors.add(classifierDescriptor);
  }
  if (lookupMode == LookupMode.EVERYTHING) {
    descriptors.addAll(outerScope.getFunctions(referencedName,UsageLocation.NO_LOCATION));
    descriptors.addAll(outerScope.getProperties(referencedName,UsageLocation.NO_LOCATION));
    VariableDescriptor localVariable=outerScope.getLocalVariable(referencedName);
    if (localVariable != null) {
      descriptors.add(localVariable);
    }
  }
  return new LookupResult(descriptors,outerScope,packageLevel);
}
