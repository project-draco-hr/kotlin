{
  if (userType.isAbsoluteInRootPackage()) {
    trace.report(Errors.UNSUPPORTED.on(userType,"package"));
    return Collections.emptyList();
  }
  JetSimpleNameExpression referenceExpression=userType.getReferenceExpression();
  JetUserType qualifier=userType.getQualifier();
  JetScope filteredScope=filterOutPackagesIfNeeded(outerScope,onlyClassifiers);
  DeclarationDescriptor shouldBeVisibleFrom=outerScope.getContainingDeclaration();
  if (qualifier == null) {
    if (referenceExpression == null)     return Collections.emptyList();
    return lookupDescriptorsForSimpleNameReference(referenceExpression,filteredScope,shouldBeVisibleFrom,trace,LookupMode.ONLY_CLASSES_AND_PACKAGES,false,true);
  }
  Collection<DeclarationDescriptor> declarationDescriptors=lookupDescriptorsForUserType(qualifier,outerScope,trace,false);
  if (referenceExpression == null)   return Collections.emptyList();
  return lookupSelectorDescriptors(referenceExpression,declarationDescriptors,trace,shouldBeVisibleFrom,LookupMode.ONLY_CLASSES_AND_PACKAGES,true);
}
