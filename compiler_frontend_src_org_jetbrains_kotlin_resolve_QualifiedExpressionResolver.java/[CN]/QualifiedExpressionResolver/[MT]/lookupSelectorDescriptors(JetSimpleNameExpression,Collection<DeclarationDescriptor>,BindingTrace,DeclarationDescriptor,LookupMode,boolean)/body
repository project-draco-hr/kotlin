{
  Set<LookupResult> results=Sets.newLinkedHashSet();
  for (  DeclarationDescriptor declarationDescriptor : declarationDescriptors) {
    if (declarationDescriptor instanceof PackageViewDescriptor) {
      results.add(lookupSimpleNameReference(selector,((PackageViewDescriptor)declarationDescriptor).getMemberScope(),lookupMode,true));
    }
    if (declarationDescriptor instanceof ClassDescriptor) {
      addResultsForClass(results,selector,lookupMode,(ClassDescriptor)declarationDescriptor);
    }
  }
  return filterAndStoreResolutionResult(results,selector,trace,shouldBeVisibleFrom,lookupMode,storeResult);
}
