{
  if (!Visibilities.isVisible(ReceiverValue.IRRELEVANT_RECEIVER,descriptor,scopeToCheckVisibility.getContainingDeclaration())) {
    Visibility visibility=descriptor.getVisibility();
    if (PsiTreeUtil.getParentOfType(referenceExpression,JetImportDirective.class) != null && !visibility.mustCheckInImports()) {
      return;
    }
    trace.report(INVISIBLE_REFERENCE.on(referenceExpression,descriptor,visibility,descriptor.getContainingDeclaration()));
  }
}
