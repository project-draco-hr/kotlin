{
  String baseFilePath=baseFile.getPath().replace(File.separatorChar,'/');
  String relFilePath=relFile.getPath().replace(File.separatorChar,'/');
  int baseFilePathLen=baseFilePath.length();
  int relFilePathLen=relFilePath.length();
  int index=0;
  while (index < baseFilePathLen - 1 && index < relFilePathLen - 1) {
    if (baseFilePath.charAt(index) != relFilePath.charAt(index)) {
      break;
    }
    index++;
  }
  while (index >= 0 && (baseFilePath.charAt(index) != '/' || relFilePath.charAt(index) != '/')) {
    index--;
  }
  int commonStart=index;
  StringBuilder relPath=new StringBuilder(baseFilePathLen + relFilePathLen - commonStart * 2);
  index=commonStart + 1;
  while (true) {
    index=baseFilePath.indexOf('/',index);
    if (index == -1) {
      break;
    }
    relPath.append("../");
    index++;
  }
  relPath.append(relFilePath.substring(commonStart + 1));
  return relPath.toString();
}
