{
  StringBuilder sb=new StringBuilder();
  ClassifierDescriptor cd=type.getConstructor().getDeclarationDescriptor();
  Object typeNameObject;
  if (cd == null || cd instanceof TypeParameterDescriptor) {
    typeNameObject=type.getConstructor();
  }
 else {
    if (shortNamesOnly) {
      typeNameObject=cd.getName();
      DeclarationDescriptor parent=cd.getContainingDeclaration();
      while (parent instanceof ClassDescriptor) {
        typeNameObject=parent.getName() + "." + typeNameObject;
        parent=parent.getContainingDeclaration();
      }
    }
 else {
      typeNameObject=DescriptorUtils.getFQName(cd);
    }
  }
  sb.append(typeNameObject);
  if (!type.getArguments().isEmpty()) {
    sb.append("<");
    appendTypeProjections(sb,type.getArguments(),shortNamesOnly);
    sb.append(">");
  }
  if (type.isNullable()) {
    sb.append("?");
  }
  return sb.toString();
}
