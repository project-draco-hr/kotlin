{
  ApplicationManager.getApplication().runWriteAction(new Runnable(){
    @Override public void run(){
      final LibrariesContainer librariesContainer=LibrariesContainerFactory.createContainer((Project)null);
      if (!bundledSdkLibraryExists(librariesContainer)) {
        final File bundledSDKHome=PluginPathUtil.getBundledSDKHome();
        if (bundledSDKHome != null) {
          final String version=KotlinSdkUtil.getSDKVersion(bundledSDKHome);
          if (version != null) {
            final NewLibraryEditor editor=new NewLibraryEditor();
            editor.setName(KotlinSdkUtil.getSDKName(bundledSDKHome,version));
            KotlinSdkDescription.addSDKRoots(editor,bundledSDKHome);
            librariesContainer.createLibrary(editor,LibrariesContainer.LibraryLevel.GLOBAL);
          }
        }
      }
    }
  }
);
}
