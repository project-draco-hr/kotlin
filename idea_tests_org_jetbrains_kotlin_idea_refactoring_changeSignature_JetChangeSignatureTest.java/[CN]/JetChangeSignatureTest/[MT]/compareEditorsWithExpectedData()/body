{
  boolean checkErrorsAfter=InTextDirectivesUtils.isDirectiveDefined(getPsiFile(editors.get(0).getDocument()).getText(),"// CHECK_ERRORS_AFTER");
  for (  Editor editor : editors) {
    setActiveEditor(editor);
    PsiFile currentFile=getFile();
    String afterFilePath=currentFile.getName().replace("Before.","After.");
    try {
      checkResultByFile(afterFilePath);
    }
 catch (    ComparisonFailure e) {
      JetTestUtils.assertEqualsToFile(new File(afterFilePath),getEditor());
    }
    if (checkErrorsAfter && currentFile instanceof KtFile) {
      DirectiveBasedActionUtils.INSTANCE$.checkForUnexpectedErrors((KtFile)currentFile);
    }
  }
}
