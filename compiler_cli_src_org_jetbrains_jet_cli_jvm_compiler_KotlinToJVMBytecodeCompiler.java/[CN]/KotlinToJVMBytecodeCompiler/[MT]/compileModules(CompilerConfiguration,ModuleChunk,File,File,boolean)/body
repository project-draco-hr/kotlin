{
  for (  Module module : modules.getModules()) {
    ClassFileFactory moduleFactory=compileModule(configuration,module,directory);
    if (moduleFactory == null) {
      return false;
    }
    CompileEnvironmentUtil.OutputDirector outputDir=new CompileEnvironmentUtil.OutputDirector(){
      @NotNull @Override public File getOutputDirectory(      @NotNull Collection<File> sourceFiles){
        for (        File sourceFile : sourceFiles) {
          Module module=modules.findModuleBySourceFile(sourceFile);
          if (module != null) {
            return new File(module.getOutputDirectory());
          }
        }
        throw new IllegalStateException("No module found for source files: " + sourceFiles);
      }
    }
;
    writeOutput(configuration,moduleFactory,outputDir,jarPath,jarRuntime,null);
  }
  return true;
}
