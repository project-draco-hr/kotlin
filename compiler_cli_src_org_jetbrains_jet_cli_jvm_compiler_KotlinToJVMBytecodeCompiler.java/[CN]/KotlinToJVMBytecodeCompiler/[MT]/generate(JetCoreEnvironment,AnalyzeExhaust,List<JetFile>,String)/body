{
  CompilerConfiguration configuration=environment.getConfiguration();
  File incrementalCacheDir=configuration.get(JVMConfigurationKeys.INCREMENTAL_CACHE_BASE_DIR);
  IncrementalCacheProvider incrementalCacheProvider=IncrementalCacheProvider.object$.getInstance();
  Collection<FqName> packagesWithRemovedFiles=incrementalCacheDir == null || moduleId == null || incrementalCacheProvider == null ? null : incrementalCacheProvider.getIncrementalCache(incrementalCacheDir).getPackagesWithRemovedFiles(moduleId,environment.getSourceFiles());
  GenerationState generationState=new GenerationState(environment.getProject(),ClassBuilderFactories.BINARIES,Progress.DEAF,exhaust.getModuleDescriptor(),exhaust.getBindingContext(),sourceFiles,configuration.get(JVMConfigurationKeys.GENERATE_NOT_NULL_ASSERTIONS,false),configuration.get(JVMConfigurationKeys.GENERATE_NOT_NULL_PARAMETER_ASSERTIONS,false),GenerationState.GenerateClassFilter.GENERATE_ALL,configuration.get(JVMConfigurationKeys.ENABLE_INLINE,InlineCodegenUtil.DEFAULT_INLINE_FLAG),packagesWithRemovedFiles);
  KotlinCodegenFacade.compileCorrectFiles(generationState,CompilationErrorHandler.THROW_EXCEPTION);
  return generationState;
}
