{
  if (classDescriptor.getKind() == ClassKind.TRAIT) {
    JetParameterList primaryConstructorParameterList=klass.getPrimaryConstructorParameterList();
    if (primaryConstructorParameterList != null) {
      context.getTrace().report(CONSTRUCTOR_IN_TRAIT.on(primaryConstructorParameterList));
    }
    if (!klass.hasPrimaryConstructor())     return;
  }
  JetScope memberScope=classDescriptor.getScopeForSupertypeResolution();
  ConstructorDescriptor constructorDescriptor=descriptorResolver.resolvePrimaryConstructorDescriptor(memberScope,classDescriptor,klass,context.getTrace());
  for (  JetParameter parameter : klass.getPrimaryConstructorParameters()) {
    if (parameter.getValOrVarNode() != null) {
      PropertyDescriptor propertyDescriptor=descriptorResolver.resolvePrimaryConstructorParameterToAProperty(classDescriptor,memberScope,parameter,context.getTrace());
      classDescriptor.addPropertyDescriptor(propertyDescriptor);
      context.getPrimaryConstructorParameterProperties().add(propertyDescriptor);
    }
  }
  if (constructorDescriptor != null) {
    classDescriptor.setPrimaryConstructor(constructorDescriptor,context.getTrace());
  }
}
