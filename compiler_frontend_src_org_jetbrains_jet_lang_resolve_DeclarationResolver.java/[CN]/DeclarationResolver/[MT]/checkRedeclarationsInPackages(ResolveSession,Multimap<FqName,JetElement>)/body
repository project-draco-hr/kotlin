{
  for (  Map.Entry<FqName,Collection<JetElement>> entry : topLevelFqNames.asMap().entrySet()) {
    FqName fqName=entry.getKey();
    Collection<JetElement> declarationsOrPackageDirectives=entry.getValue();
    if (fqName.isRoot())     continue;
    Set<DeclarationDescriptor> descriptors=getTopLevelDescriptorsByFqName(resolveSession,fqName);
    if (descriptors.size() > 1) {
      for (      JetElement declarationOrPackageDirective : declarationsOrPackageDirectives) {
        PsiElement reportAt=declarationOrPackageDirective instanceof JetNamedDeclaration ? declarationOrPackageDirective : ((JetPackageDirective)declarationOrPackageDirective).getNameIdentifier();
        trace.report(Errors.REDECLARATION.on(reportAt,fqName.shortName().asString()));
      }
    }
  }
}
