{
  TestSuite suite=new TestSuite();
  FilenameFilter singleFileNameFilter=new FilenameFilter(){
    @Override public boolean accept(    File file,    String s){
      return s.startsWith("before") && !JetPsiCheckerMultifileTest.isMultiFileName(s);
    }
  }
;
  JetTestCaseBuilder.NamedTestFactory singleFileNamedTestFactory=new JetTestCaseBuilder.NamedTestFactory(){
    @NotNull @Override public Test createTest(    @NotNull String dataPath,    @NotNull String name,    @NotNull File file){
      return new JetQuickFixTest(dataPath,name);
    }
  }
;
  File dir=new File(getTestDataPathBase());
  List<String> subDirs=Arrays.asList(quickFixTestsFilter != null ? dir.list(quickFixTestsFilter) : dir.list());
  Collections.sort(subDirs);
  for (  String subDirName : subDirs) {
    final TestSuite singleFileTestSuite=JetTestCaseBuilder.suiteForDirectory(getTestDataPathBase(),subDirName,true,singleFileNameFilter,singleFileNamedTestFactory);
    if (singleFileTestSuite.countTestCases() != 0) {
      suite.addTest(singleFileTestSuite);
    }
  }
  return suite;
}
