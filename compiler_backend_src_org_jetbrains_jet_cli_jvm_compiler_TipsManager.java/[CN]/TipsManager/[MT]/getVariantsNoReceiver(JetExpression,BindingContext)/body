{
  JetScope resolutionScope=context.get(BindingContext.RESOLUTION_SCOPE,expression);
  if (resolutionScope != null) {
    if (expression.getParent() instanceof JetImportDirective || expression.getParent() instanceof JetNamespaceHeader) {
      return excludeNonPackageDescriptors(resolutionScope.getAllDescriptors(DescriptorPredicate.all()));
    }
 else {
      Collection<DeclarationDescriptor> descriptorsSet=Sets.newHashSet();
      ArrayList<ReceiverDescriptor> result=new ArrayList<ReceiverDescriptor>();
      resolutionScope.getImplicitReceiversHierarchy(result);
      for (      ReceiverDescriptor receiverDescriptor : result) {
        JetType receiverType=receiverDescriptor.getType();
        descriptorsSet.addAll(receiverType.getMemberScope().getAllDescriptors(DescriptorPredicate.all()));
      }
      descriptorsSet.addAll(resolutionScope.getAllDescriptors(DescriptorPredicate.all()));
      return excludeNotCallableExtensions(excludePrivateDescriptors(descriptorsSet),resolutionScope);
    }
  }
  return Collections.emptyList();
}
