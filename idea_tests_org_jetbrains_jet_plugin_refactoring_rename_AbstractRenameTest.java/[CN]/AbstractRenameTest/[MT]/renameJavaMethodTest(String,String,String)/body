{
  doTest(new MultiFileTestCase.PerformAction(){
    @Override public void performAction(    VirtualFile rootDir,    VirtualFile rootAfter) throws Exception {
      JavaPsiFacade manager=getJavaFacade();
      PsiClass aClass=manager.findClass(className,GlobalSearchScope.moduleScope(myModule));
      assertNotNull("Class " + className + " not found",aClass);
      PsiMethod methodBySignature=aClass.findMethodBySignature(manager.getElementFactory().createMethodFromText(methodSignature + "{}",null),false);
      assertNotNull("Method with signature '" + methodSignature + "' wasn't found in class "+ className,methodBySignature);
      new RenameProcessor(myProject,methodBySignature,newName,false,false).run();
      PsiDocumentManager.getInstance(myProject).commitAllDocuments();
      FileDocumentManager.getInstance().saveAllDocuments();
    }
  }
);
}
