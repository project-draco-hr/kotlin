{
  final JvmMethodSignature bridge=CodegenUtil.erasedInvokeSignature(funDescriptor);
  final Method delegate=typeMapper.invokeSignature(funDescriptor).getAsmMethod();
  if (bridge.getAsmMethod().getDescriptor().equals(delegate.getDescriptor())) {
    return;
  }
  final MethodVisitor mv=cv.newMethod(fun,ACC_PUBLIC | ACC_BRIDGE | ACC_VOLATILE,"invoke",bridge.getAsmMethod().getDescriptor(),null,new String[0]);
  if (state.getClassBuilderMode() == ClassBuilderMode.STUBS) {
    StubCodegen.generateStubCode(mv);
  }
  if (state.getClassBuilderMode() == ClassBuilderMode.FULL) {
    mv.visitCode();
    InstructionAdapter iv=new InstructionAdapter(mv);
    iv.load(0,Type.getObjectType(className));
    final ReceiverDescriptor receiver=funDescriptor.getReceiverParameter();
    int count=1;
    if (receiver.exists()) {
      StackValue.local(count,JetTypeMapper.OBJECT_TYPE).put(JetTypeMapper.OBJECT_TYPE,iv);
      StackValue.onStack(JetTypeMapper.OBJECT_TYPE).upcast(typeMapper.mapType(receiver.getType(),MapTypeMode.VALUE),iv);
      count++;
    }
    final List<ValueParameterDescriptor> params=funDescriptor.getValueParameters();
    for (    ValueParameterDescriptor param : params) {
      StackValue.local(count,JetTypeMapper.OBJECT_TYPE).put(JetTypeMapper.OBJECT_TYPE,iv);
      StackValue.onStack(JetTypeMapper.OBJECT_TYPE).upcast(typeMapper.mapType(param.getType(),MapTypeMode.VALUE),iv);
      count++;
    }
    iv.invokevirtual(className,"invoke",delegate.getDescriptor());
    StackValue.onStack(delegate.getReturnType()).put(JetTypeMapper.OBJECT_TYPE,iv);
    iv.areturn(JetTypeMapper.OBJECT_TYPE);
    FunctionCodegen.endVisit(mv,"bridge",fun);
  }
}
