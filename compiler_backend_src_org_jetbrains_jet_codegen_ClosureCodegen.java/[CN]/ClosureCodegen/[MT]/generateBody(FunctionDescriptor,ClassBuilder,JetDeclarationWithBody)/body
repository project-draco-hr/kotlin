{
  int arity=funDescriptor.getValueParameters().size();
  ClassDescriptorImpl function=new ClassDescriptorImpl(funDescriptor,Collections.<AnnotationDescriptor>emptyList(),name);
  function=function.initialize(false,Collections.<TypeParameterDescriptor>emptyList(),Collections.singleton((funDescriptor.getReceiverParameter().exists() ? JetStandardClasses.getReceiverFunction(arity) : JetStandardClasses.getFunction(arity)).getDefaultType()),JetScope.EMPTY,Collections.<ConstructorDescriptor>emptySet(),null);
  final CodegenContext.ClosureContext closureContext=context.intoClosure(funDescriptor,function,name,this,state.getTypeMapper());
  FunctionCodegen fc=new FunctionCodegen(closureContext,cv,state);
  fc.generateMethod(body,new JvmMethodSignature(invokeSignature(funDescriptor),null,null,null,null),null,funDescriptor);
  return closureContext.outerWasUsed;
}
