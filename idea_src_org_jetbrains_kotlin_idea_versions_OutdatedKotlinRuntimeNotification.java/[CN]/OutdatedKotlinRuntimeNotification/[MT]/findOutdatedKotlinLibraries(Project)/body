{
  List<VersionedLibrary> outdatedLibraries=Lists.newArrayList();
  for (  Library library : KotlinRuntimeLibraryUtil.findKotlinLibraries(project)) {
    LibraryVersionProperties libraryVersionProperties=LibraryPresentationProviderUtil.getLibraryProperties(JavaRuntimePresentationProvider.getInstance(),library);
    if (libraryVersionProperties == null) {
      libraryVersionProperties=LibraryPresentationProviderUtil.getLibraryProperties(JSLibraryStdPresentationProvider.getInstance(),library);
    }
    if (libraryVersionProperties == null) {
      continue;
    }
    String libraryVersion=libraryVersionProperties.getVersionString();
    String runtimeVersion=KotlinRuntimeLibraryUtil.bundledRuntimeVersion();
    boolean isOutdated=libraryVersion == null || libraryVersion.startsWith("internal-") != runtimeVersion.startsWith("internal-") || VersionComparatorUtil.compare(runtimeVersion,libraryVersion) > 0;
    if (isOutdated) {
      outdatedLibraries.add(new VersionedLibrary(library,libraryVersion));
    }
  }
  return outdatedLibraries;
}
