{
  if (i < 0 || i >= size)   throw new IndexOutOfBoundsException();
  if (i == 0) {
    if (first.equals(e))     return this;
    return new ConsPStack<E>(e,rest);
  }
  ConsPStack<E> newRest=rest.with(i - 1,e);
  if (newRest == rest)   return this;
  return new ConsPStack<E>(first,newRest);
}
