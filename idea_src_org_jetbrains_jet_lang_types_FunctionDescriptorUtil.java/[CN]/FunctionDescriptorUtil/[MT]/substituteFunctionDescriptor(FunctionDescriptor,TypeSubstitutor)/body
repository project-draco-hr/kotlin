{
  if (substitutor.isEmpty()) {
    return functionDescriptor;
  }
  FunctionDescriptorImpl substitutedDescriptor;
  if (functionDescriptor instanceof ConstructorDescriptor) {
    ConstructorDescriptor original=(ConstructorDescriptor)functionDescriptor;
    substitutedDescriptor=new ConstructorDescriptorImpl(original,functionDescriptor.getAttributes(),original.isPrimary());
  }
 else {
    substitutedDescriptor=new FunctionDescriptorImpl(functionDescriptor,functionDescriptor.getAttributes(),functionDescriptor.getName());
  }
  List<ValueParameterDescriptor> substitutedValueParameters=getSubstitutedValueParameters(substitutedDescriptor,functionDescriptor,substitutor);
  if (substitutedValueParameters == null) {
    return null;
  }
  JetType substitutedReturnType=getSubstitutedReturnType(functionDescriptor,substitutor);
  if (substitutedReturnType == null) {
    return null;
  }
  substitutedDescriptor.initialize(Collections.<TypeParameterDescriptor>emptyList(),substitutedValueParameters,substitutedReturnType);
  return substitutedDescriptor;
}
