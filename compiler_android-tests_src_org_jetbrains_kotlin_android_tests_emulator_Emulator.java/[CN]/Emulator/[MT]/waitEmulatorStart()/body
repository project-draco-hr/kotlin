{
  System.out.println("Waiting for emulator start...");
  OutputUtils.checkResult(RunUtils.execute(getWaitCommand()));
  GeneralCommandLine bootCheckCommand=createAdbCommand();
  bootCheckCommand.addParameter("shell");
  bootCheckCommand.addParameter("getprop");
  bootCheckCommand.addParameter("sys.boot_completed");
  int counter=0;
  RunResult execute=RunUtils.execute(bootCheckCommand);
  while (counter < 12) {
    String output=execute.getOutput();
    if (output.trim().endsWith("1")) {
      System.out.println("Emulator fully booted!");
      return;
    }
    System.out.println("Waiting for emulator boot (" + counter + ")...");
    try {
      Thread.sleep(10000);
    }
 catch (    InterruptedException e) {
      e.printStackTrace();
    }
    counter++;
    execute=RunUtils.execute(bootCheckCommand);
  }
  Assert.fail("Can't find booted emulator: " + execute.getOutput());
}
