{
  String source=TestUtils.readFile(sourceFile);
  StringBuilder actualResult=new StringBuilder();
  new JetMacro().generateHtmlFromCode(source,actualResult);
  File expectedResultFile=new File(sourceFile.getAbsolutePath().replace(".kt",".txt"));
  if (!expectedResultFile.exists()) {
    expectedResultFile.createNewFile();
    TestUtils.writeFile(expectedResultFile,TestUtils.divideResultForLines(actualResult.toString()));
    assertTrue("File with expected result for " + expectedResultFile.getAbsolutePath() + " is absent.",false);
  }
  String expectedResult=TestUtils.readFile(expectedResultFile);
  assertEquals(expectedResult,TestUtils.divideResultForLines(actualResult.toString()));
}
