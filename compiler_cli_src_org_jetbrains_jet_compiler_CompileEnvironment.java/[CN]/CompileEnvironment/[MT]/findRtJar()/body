{
  String javaHome=System.getProperty("java.home");
  if ("jre".equals(new File(javaHome).getName())) {
    javaHome=new File(javaHome).getParent();
  }
  File rtJar=findRtJar(javaHome);
  if (rtJar == null || !rtJar.exists()) {
    throw new CompileEnvironmentException("No JDK rt.jar found under" + javaHome);
  }
  return rtJar;
}
