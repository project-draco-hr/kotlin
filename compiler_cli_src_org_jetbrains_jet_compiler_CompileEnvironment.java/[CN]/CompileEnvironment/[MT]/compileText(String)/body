{
  CompileSession session=new CompileSession(myEnvironment,myFileNameTransformer);
  session.addSources(new LightVirtualFile("script" + LocalTimeCounter.currentTime() + ".kt",JetLanguage.INSTANCE,code));
  if (!session.analyze(myErrorStream,myMessageRenderer) && !ignoreErrors) {
    return null;
  }
  ClassFileFactory factory=session.generate();
  return new GeneratedClassLoader(factory);
}
