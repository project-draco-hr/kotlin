{
  PsiJetFunctionStub stub=getStub();
  if (stub != null) {
    List<JetTypeReference> typeReferences=getStubOrPsiChildrenAsList(JetStubElementTypes.TYPE_REFERENCE);
    int returnTypeIndex=stub.isExtension() ? 1 : 0;
    if (returnTypeIndex >= typeReferences.size()) {
      return null;
    }
    return typeReferences.get(returnTypeIndex);
  }
  return TypeRefHelpersPackage.getTypeRef(this);
}
