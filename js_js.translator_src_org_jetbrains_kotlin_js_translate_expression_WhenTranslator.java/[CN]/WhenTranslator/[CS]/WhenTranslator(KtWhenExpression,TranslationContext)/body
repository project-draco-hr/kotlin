{
  super(context);
  whenExpression=expression;
  KtExpression subject=expression.getSubjectExpression();
  if (subject != null) {
    JsExpression subjectExpression=Translation.translateAsExpression(subject,context);
    if (!JsAstUtils.isEmptyExpression(subjectExpression)) {
      TemporaryVariable subjectVar=context.declareTemporary(null);
      JsExpressionStatement subjectAssignment=new JsExpressionStatement(JsAstUtils.assignment(subjectVar.reference(),subjectExpression));
      MetadataProperties.setSynthetic(subjectAssignment,true);
      context.addStatementToCurrentBlock(subjectAssignment);
      subjectExpression=subjectVar.reference();
    }
    expressionToMatch=subjectExpression;
  }
 else {
    expressionToMatch=null;
  }
}
