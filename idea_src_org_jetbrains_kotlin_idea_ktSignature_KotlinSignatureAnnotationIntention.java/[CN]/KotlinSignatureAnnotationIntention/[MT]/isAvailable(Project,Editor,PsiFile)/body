{
  PsiMember memberUnderCaret=findMemberUnderCaret(file,editor);
  if (memberUnderCaret == null) {
    return false;
  }
  PsiModifierListOwner annotationOwner=KotlinSignatureUtil.getAnalyzableAnnotationOwner(memberUnderCaret);
  if (annotationOwner == null) {
    return false;
  }
  if (!PsiUtil.isLanguageLevel5OrHigher(annotationOwner))   return false;
  if (KotlinSignatureUtil.findKotlinSignatureAnnotation(annotationOwner) != null) {
    if (KotlinSignatureUtil.isAnnotationEditable(annotationOwner)) {
      setText(JetBundle.message("edit.kotlin.signature.action.text"));
    }
 else {
      setText(JetBundle.message("view.kotlin.signature.action.text"));
    }
  }
 else {
    setText(JetBundle.message("add.kotlin.signature.action.text"));
  }
  return true;
}
