{
  this.storageManager=storageManager;
  this.isPackageDeclaredExternally=isPackageDeclaredExternally;
  this.index=storageManager.createLazyValue(new Computable<Index>(){
    @Override public Index compute(){
      return computeFilesByPackage(files);
    }
  }
);
  this.packageDeclarationProviders=storageManager.createConcurrentMap();
}
