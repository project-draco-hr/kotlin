{
  PackageMemberDeclarationProvider declarationProvider=packageDeclarationProviders.get(packageFqName);
  if (declarationProvider != null) {
    return declarationProvider;
  }
  if (!isPackageDeclaredExplicitly(packageFqName)) {
    if (isPackageDeclaredExternally.apply(packageFqName)) {
      return EmptyPackageMemberDeclarationProvider.INSTANCE;
    }
    return null;
  }
  FileBasedPackageMemberDeclarationProvider provider=new FileBasedPackageMemberDeclarationProvider(storageManager,packageFqName,this,index.get().filesByPackage.get(packageFqName));
  return packageDeclarationProviders.putIfAbsent(packageFqName,provider);
}
