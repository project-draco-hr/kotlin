{
  Index index=new Index();
  for (  JetFile file : files) {
    JetNamespaceHeader header=file.getNamespaceHeader();
    if (header == null) {
      throw new IllegalArgumentException("Scripts are not supported");
    }
    FqName packageFqName=new FqName(header.getQualifiedName());
    addMeAndParentPackages(index,packageFqName);
    index.filesByPackage.put(packageFqName,file);
  }
  return index;
}
