{
  PsiBuilder.Marker condition=mark();
  myBuilder.disableNewlines();
  if (at(IN_KEYWORD) || at(NOT_IN)) {
    PsiBuilder.Marker mark=mark();
    advance();
    mark.done(OPERATION_REFERENCE);
    if (atSet(WHEN_CONDITION_RECOVERY_SET_WITH_DOUBLE_ARROW)) {
      error("Expecting an element");
    }
 else {
      parseExpression();
    }
    condition.done(WHEN_CONDITION_IN_RANGE);
  }
 else   if (at(IS_KEYWORD) || at(NOT_IS)) {
    advance();
    if (atSet(WHEN_CONDITION_RECOVERY_SET_WITH_DOUBLE_ARROW)) {
      error("Expecting a type or a decomposer pattern");
    }
 else {
      parsePattern();
    }
    condition.done(WHEN_CONDITION_IS_PATTERN);
  }
 else   if (at(DOT) || at(SAFE_ACCESS)) {
    advance();
    PsiBuilder.Marker mark=mark();
    parsePostfixExpression();
    if (parseCallSuffix()) {
      mark.done(CALL_EXPRESSION);
    }
 else {
      mark.drop();
    }
    condition.done(WHEN_CONDITION_CALL);
  }
 else {
    if (atSet(WHEN_CONDITION_RECOVERY_SET_WITH_DOUBLE_ARROW)) {
      error("Expecting an element, is-condition or in-condition");
    }
 else {
      parseExpression();
    }
    condition.done(WHEN_CONDITION_EXPRESSION);
  }
  myBuilder.restoreNewlinesState();
}
