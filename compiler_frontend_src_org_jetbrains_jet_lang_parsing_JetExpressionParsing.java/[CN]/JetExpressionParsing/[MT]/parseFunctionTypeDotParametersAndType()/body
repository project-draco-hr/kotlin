{
  PsiBuilder.Marker rollbackMarker=mark();
  boolean preferParamsToExpressions=false;
  int lastDot=matchTokenStreamPredicate(new LastBefore(new At(DOT),new AtSet(TokenSet.orSet(TokenSet.create(ARROW,RPAR),TokenSet.orSet(TokenSet.create(LBRACE,RBRACE),TokenSet.andNot(KEYWORDS,TokenSet.create(CAPITALIZED_THIS_KEYWORD)))))));
  if (lastDot >= 0) {
    createTruncatedBuilder(lastDot).parseTypeRef();
    if (at(DOT)) {
      advance();
      preferParamsToExpressions=parseFunctionLiteralParametersAndType();
    }
  }
  return preferParamsToExpressions ? rollbackOrDrop(rollbackMarker,ARROW,"An -> is expected",RBRACE) : rollbackOrDropAt(rollbackMarker,ARROW);
}
