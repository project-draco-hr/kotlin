{
  if (failedVariables.contains(key))   return;
  TypeProjection oldValue=substitution.put(key,value);
  if (oldValue != null && !oldValue.equals(value)) {
    substitution.remove(key);
    failedVariables.add(key);
    fail();
  }
}
