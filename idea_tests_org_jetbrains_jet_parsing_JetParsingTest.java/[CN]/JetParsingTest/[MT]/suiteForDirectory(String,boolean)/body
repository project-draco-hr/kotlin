{
  TestSuite suite=new TestSuite(dataPath);
  final String extension=".jet";
  FilenameFilter extensionFilter=new FilenameFilter(){
    @Override public boolean accept(    File dir,    String name){
      return name.endsWith(extension);
    }
  }
;
  File dir=new File(getTestDataDir() + "/psi/" + dataPath);
  FileFilter dirFilter=new FileFilter(){
    @Override public boolean accept(    File pathname){
      return pathname.isDirectory();
    }
  }
;
  if (recursive) {
    List<File> subdirs=Arrays.asList(dir.listFiles(dirFilter));
    Collections.sort(subdirs);
    for (    File subdir : subdirs) {
      suite.addTest(suiteForDirectory(dataPath + "/" + subdir.getName(),recursive));
    }
  }
  List<File> files=Arrays.asList(dir.listFiles(extensionFilter));
  Collections.sort(files);
  for (  File file : files) {
    String fileName=file.getName();
    suite.addTest(new JetParsingTest(dataPath,fileName.substring(0,fileName.length() - extension.length())));
  }
  return suite;
}
