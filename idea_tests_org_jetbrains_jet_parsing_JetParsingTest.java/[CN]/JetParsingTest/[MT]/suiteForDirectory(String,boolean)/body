{
  TestSuite suite=new TestSuite(dataPath);
  final String extension=".jet";
  FilenameFilter extensionFilter=new FilenameFilter(){
    @Override public boolean accept(    File dir,    String name){
      return name.endsWith(extension);
    }
  }
;
  File dir=new File(getTestDataDir() + "/psi/" + dataPath);
  FileFilter dirFilter=new FileFilter(){
    @Override public boolean accept(    File pathname){
      return pathname.isDirectory();
    }
  }
;
  if (recursive) {
    for (    File subDir : dir.listFiles(dirFilter)) {
      suite.addTest(suiteForDirectory(dataPath + "/" + subDir.getName(),recursive));
    }
  }
  for (  File file : dir.listFiles(extensionFilter)) {
    String fileName=file.getName();
    suite.addTest(new JetParsingTest(dataPath,fileName.substring(0,fileName.length() - extension.length())));
  }
  return suite;
}
