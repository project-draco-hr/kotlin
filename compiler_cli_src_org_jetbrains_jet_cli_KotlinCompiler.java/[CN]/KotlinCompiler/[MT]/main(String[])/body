{
  System.setProperty("java.awt.headless","true");
  Arguments arguments=new Arguments();
  try {
    Args.parse(arguments,args);
  }
 catch (  Throwable t) {
    System.out.println("Usage: KotlinCompiler [-output <outputDir>|-jar <jarFileName>] -src <filename or dirname>");
    t.printStackTrace();
    return;
  }
  CompileEnvironment environment=new CompileEnvironment();
  File rtJar=initJdk();
  if (rtJar == null)   return;
  try {
    environment.setJavaRuntime(rtJar);
    if (!environment.initializeKotlinRuntime()) {
      System.out.println("No runtime library found");
      return;
    }
    if (arguments.module != null) {
      environment.compileModuleScript(arguments.module);
      return;
    }
 else {
      environment.compileBunchOfSources(arguments.src,arguments.jar,arguments.outputDir);
    }
  }
 catch (  CompileEnvironmentException e) {
    System.out.println(e.getMessage());
  }
}
