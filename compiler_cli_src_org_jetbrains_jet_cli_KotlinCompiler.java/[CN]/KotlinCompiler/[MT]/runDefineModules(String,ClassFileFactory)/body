{
  GeneratedClassLoader loader=new GeneratedClassLoader(factory);
  try {
    Class moduleSetBuilderClass=loader.loadClass("kotlin.modules.ModuleSetBuilder");
    final IModuleSetBuilder moduleSetBuilder=(IModuleSetBuilder)moduleSetBuilderClass.newInstance();
    Class namespaceClass=loader.loadClass("namespace");
    final Method[] methods=namespaceClass.getMethods();
    boolean modulesDefined=false;
    for (    Method method : methods) {
      if (method.getName().equals("defineModules")) {
        method.invoke(null,moduleSetBuilder);
        modulesDefined=true;
        break;
      }
    }
    if (!modulesDefined) {
      System.out.println("Module script " + moduleFile + " must define a defineModules() method");
      return null;
    }
    return moduleSetBuilder;
  }
 catch (  Exception e) {
    e.printStackTrace();
    return null;
  }
}
