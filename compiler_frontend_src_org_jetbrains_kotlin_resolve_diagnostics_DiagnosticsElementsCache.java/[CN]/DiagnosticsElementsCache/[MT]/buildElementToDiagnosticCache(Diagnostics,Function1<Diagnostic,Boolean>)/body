{
  MultiMap<PsiElement,Diagnostic> elementToDiagnostic=new ConcurrentMultiMap<PsiElement,Diagnostic>();
  for (  Diagnostic diagnostic : diagnostics) {
    if (filter.invoke(diagnostic)) {
      elementToDiagnostic.putValue(diagnostic.getPsiElement(),diagnostic);
    }
  }
  return elementToDiagnostic;
}
