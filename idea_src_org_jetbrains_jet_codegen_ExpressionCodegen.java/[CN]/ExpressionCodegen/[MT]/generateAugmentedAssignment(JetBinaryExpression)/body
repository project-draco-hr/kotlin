{
  DeclarationDescriptor op=bindingContext.resolveReferenceExpression(expression.getOperationReference());
  final Callable callable=resolveToCallable(op);
  final JetExpression lhs=expression.getLeft();
  Type lhsType=expressionType(lhs);
  if (bindingContext.isVariableReassignment(expression)) {
    if (isNumberPrimitive(lhsType)) {
      StackValue value=generateIntermediateValue(lhs);
      value.dupReceiver(v,0);
      value.put(lhsType,v);
      genToJVMStack(expression.getRight());
      v.visitInsn(lhsType.getOpcode(opcodeForMethod(op.getName())));
      value.store(v);
    }
 else {
      throw new UnsupportedOperationException("Augmented assignment for non-primitive types not yet implemented");
    }
  }
 else {
    if (callable instanceof IntrinsicMethod) {
      final IntrinsicMethod intrinsic=(IntrinsicMethod)callable;
      intrinsic.generate(this,v,Type.VOID_TYPE,expression,Arrays.asList(lhs,expression.getRight()),false);
    }
 else {
      CallableMethod method=(CallableMethod)callable;
      FunctionDescriptor fd=(FunctionDescriptor)op;
      StackValue value=generateIntermediateValue(lhs);
      final boolean keepReturnValue=!fd.getReturnType().equals(JetStandardClasses.getUnitType());
      if (keepReturnValue) {
        value.dupReceiver(v,0);
      }
      value.put(lhsType,v);
      genToJVMStack(expression.getRight());
      method.invoke(v);
      if (keepReturnValue) {
        value.store(v);
      }
    }
  }
}
