{
  JetType returnType=op.getUnsubstitutedReturnType();
  final Type asmType=typeMapper.mapType(returnType);
  if (asmType == Type.INT_TYPE || asmType == Type.LONG_TYPE) {
    gen(expression.getLeft(),asmType);
    gen(expression.getRight(),asmType);
    v.visitInsn(asmType.getOpcode(opcode));
    myStack.push(StackValue.onStack(asmType));
  }
 else {
    throw new UnsupportedOperationException("Don't know how to generate binary op with return type " + returnType);
  }
}
