{
  if (!(operand instanceof JetReferenceExpression)) {
    throw new UnsupportedOperationException("cannot increment or decrement a non-lvalue");
  }
  int increment=op.getName().equals("inc") ? 1 : -1;
  final int index=indexOfLocal((JetReferenceExpression)operand);
  if (index < 0) {
    throw new UnsupportedOperationException("don't know how to increment or decrement something which is not a local var");
  }
  if (isIntPrimitive(asmType)) {
    v.iinc(index,increment);
  }
 else {
    gen(operand,asmType);
    if (asmType == Type.LONG_TYPE) {
      v.aconst(Long.valueOf(increment));
    }
 else     if (asmType == Type.FLOAT_TYPE) {
      v.aconst(Float.valueOf(increment));
    }
 else     if (asmType == Type.DOUBLE_TYPE) {
      v.aconst(Double.valueOf(increment));
    }
 else {
      throw new UnsupportedOperationException("unknown type in increment: " + asmType);
    }
    v.add(asmType);
    v.store(index,asmType);
  }
  return index;
}
