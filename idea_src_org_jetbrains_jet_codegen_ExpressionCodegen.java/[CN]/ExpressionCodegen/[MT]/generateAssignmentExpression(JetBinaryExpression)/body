{
  if (expression.getLeft() instanceof JetReferenceExpression) {
    final JetReferenceExpression lhs=(JetReferenceExpression)expression.getLeft();
    final DeclarationDescriptor declarationDescriptor=bindingContext.resolveReferenceExpression(lhs);
    final int index=myMap.getIndex(declarationDescriptor);
    final Type type=typeMapper.mapType(bindingContext.getExpressionType(lhs));
    gen(expression.getRight(),type);
    v.store(index,type);
  }
 else {
    throw new UnsupportedOperationException("Don't know how to generate assignment to " + expression.getLeft().getText());
  }
}
