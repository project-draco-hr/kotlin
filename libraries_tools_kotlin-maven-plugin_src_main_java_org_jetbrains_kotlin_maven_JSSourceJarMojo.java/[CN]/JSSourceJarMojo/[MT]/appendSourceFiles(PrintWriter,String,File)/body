{
  File[] files=currentDir.listFiles();
  if (files != null) {
    for (    File file : files) {
      if (file.isDirectory()) {
        appendSourceFiles(writer,rootPath,file);
      }
 else {
        String name=file.getName();
        if (name.toLowerCase().endsWith(".kt")) {
          String fullPath=file.getCanonicalPath();
          if (fullPath.startsWith(rootPath)) {
            String relativePath=fullPath.substring(rootPath.length());
            if (relativePath.startsWith("/") || relativePath.startsWith(File.pathSeparator)) {
              relativePath=relativePath.substring(1);
            }
            writer.println(relativePath);
          }
 else {
            getLog().warn("Could not remove the root path " + rootPath + " from file: "+ fullPath);
          }
        }
      }
    }
  }
}
