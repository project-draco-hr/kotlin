{
  VirtualFile virtualFile=fileToCache.getVirtualFile();
  if (LightClassUtil.belongsToKotlinBuiltIns(fileToCache) || virtualFile != null && LibraryUtil.findLibraryEntry(virtualFile,fileToCache.getProject()) != null) {
    fileToCache.putUserData(LibrarySourceHacks.SKIP_TOP_LEVEL_MEMBERS,true);
    return AnalyzerFacadeForJVM.INSTANCE.analyzeFiles(fileToCache.getProject(),Collections.singleton(fileToCache),Collections.<AnalyzerScriptParameter>emptyList(),Predicates.<PsiFile>alwaysFalse());
  }
  KotlinDeclarationsCache cache=KotlinCacheManagerUtil.getDeclarationsFromProject(fileToCache);
  return ((KotlinDeclarationsCacheImpl)cache).getAnalyzeExhaust();
}
