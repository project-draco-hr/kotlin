{
  VirtualFile virtualFile=fileToCache.getVirtualFile();
  if (LightClassUtil.belongsToKotlinBuiltIns(fileToCache) || virtualFile != null && LibraryUtil.findLibraryEntry(virtualFile,fileToCache.getProject()) != null) {
    fileToCache.putUserData(LibrarySourceHacks.SKIP_TOP_LEVEL_MEMBERS,true);
    return AnalyzerFacadeForJVM.analyzeFilesWithJavaIntegrationInGlobalContext(fileToCache.getProject(),Collections.singleton(fileToCache),new BindingTraceContext(),Collections.<AnalyzerScriptParameter>emptyList(),Predicates.<PsiFile>alwaysFalse(),true,AnalyzerFacadeForJVM.createJavaModule("<module>"),globalContext,MemberFilter.ALWAYS_TRUE);
  }
  KotlinDeclarationsCache cache=KotlinCacheManagerUtil.getDeclarationsFromProject(fileToCache);
  return ((KotlinDeclarationsCacheImpl)cache).getAnalyzeExhaust();
}
