{
  MutableClosure top=closure;
  StackValue myOuter=null;
  if (top != null) {
    EnclosedValueDescriptor answer=closure.getCaptureVariables().get(d);
    if (answer != null) {
      StackValue innerValue=answer.getInnerValue();
      return result == null ? innerValue : StackValue.composed(result,innerValue);
    }
    for (    LocalLookup.LocalLookupCase aCase : LocalLookup.LocalLookupCase.values()) {
      if (aCase.isCase(d,state)) {
        Type classType=state.getBindingContext().get(ASM_TYPE,getThisDescriptor());
        StackValue innerValue=aCase.innerValue(d,enclosingLocalLookup,state,closure,classType);
        if (innerValue == null) {
          break;
        }
 else {
          return result == null ? innerValue : StackValue.composed(result,innerValue);
        }
      }
    }
    myOuter=getOuterExpression(null,ignoreNoOuter,false);
    result=result == null || myOuter == null ? myOuter : StackValue.composed(result,myOuter);
  }
  StackValue resultValue=parentContext != null ? parentContext.lookupInContext(d,result,state,ignoreNoOuter) : null;
  if (myOuter != null && resultValue != null) {
    closure.setCaptureThis();
  }
  return resultValue;
}
