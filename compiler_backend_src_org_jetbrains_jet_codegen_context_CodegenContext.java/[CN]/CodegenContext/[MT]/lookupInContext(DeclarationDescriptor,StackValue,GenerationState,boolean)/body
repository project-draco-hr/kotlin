{
  StackValue myOuter=null;
  if (closure != null) {
    EnclosedValueDescriptor answer=closure.getCaptureVariables().get(d);
    if (answer != null) {
      StackValue innerValue=answer.getInnerValue();
      return result == null ? innerValue : StackValue.composed(result,innerValue);
    }
    for (    LocalLookup.LocalLookupCase aCase : LocalLookup.LocalLookupCase.values()) {
      if (aCase.isCase(d)) {
        Type classType=state.getTypeMapper().mapType(getThisDescriptor());
        StackValue innerValue=aCase.innerValue(d,enclosingLocalLookup,state,closure,classType);
        if (innerValue == null) {
          break;
        }
 else {
          return result == null ? innerValue : composedOrStatic(result,innerValue);
        }
      }
    }
    myOuter=getOuterExpression(null,ignoreNoOuter,false);
    result=result == null || myOuter == null ? myOuter : StackValue.composed(result,myOuter);
  }
  StackValue resultValue;
  if (myOuter != null && getEnclosingClass() == d) {
    resultValue=result;
  }
 else {
    resultValue=parentContext != null ? parentContext.lookupInContext(d,result,state,ignoreNoOuter) : null;
  }
  if (myOuter != null && resultValue != null && !isStaticField(resultValue)) {
    closure.setCaptureThis();
  }
  return resultValue;
}
