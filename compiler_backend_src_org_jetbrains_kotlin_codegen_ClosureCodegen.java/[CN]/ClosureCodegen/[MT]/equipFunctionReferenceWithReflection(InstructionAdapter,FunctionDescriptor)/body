{
  DeclarationDescriptor container=target.getContainingDeclaration();
  Type type;
  if (container instanceof PackageFragmentDescriptor) {
    type=target.getExtensionReceiverParameter() != null ? K_TOP_LEVEL_EXTENSION_FUNCTION : K_TOP_LEVEL_FUNCTION;
  }
 else   if (container instanceof ClassDescriptor) {
    type=K_MEMBER_FUNCTION;
  }
 else {
    type=K_LOCAL_FUNCTION;
  }
  Method method=method("function",K_FUNCTION,FUNCTION_REFERENCE);
  v.invokestatic(REFLECTION,method.getName(),method.getDescriptor(),false);
  StackValue.coerce(K_FUNCTION,type,v);
}
