{
  KotlinParsing jetParsing=KotlinParsing.createForTopLevel(new SemanticWhitespaceAwarePsiBuilderImpl(psiBuilder));
  if (scriptDefinitionProvider != null && scriptDefinitionProvider.isScript(psiFile.getOriginalFile().getVirtualFile()) || psiFile.getName().endsWith(KotlinParserDefinition.STD_SCRIPT_EXT)) {
    jetParsing.parseScript();
  }
 else {
    jetParsing.parseFile();
  }
  return psiBuilder.getTreeBuilt();
}
