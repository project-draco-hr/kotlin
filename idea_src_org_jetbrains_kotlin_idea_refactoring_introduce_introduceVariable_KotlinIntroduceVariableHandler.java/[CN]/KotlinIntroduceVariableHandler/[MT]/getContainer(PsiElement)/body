{
  if (place instanceof JetBlockExpression || place instanceof JetClassInitializer) {
    return place;
  }
  while (place != null) {
    PsiElement parent=place.getParent();
    if (parent instanceof JetContainerNode) {
      if (!isBadContainerNode((JetContainerNode)parent,place)) {
        return parent;
      }
    }
    if (parent instanceof JetBlockExpression || parent instanceof JetWhenEntry || parent instanceof JetClassInitializer) {
      return parent;
    }
    if (parent instanceof JetDeclarationWithBody && ((JetDeclarationWithBody)parent).getBodyExpression() == place) {
      return parent;
    }
    place=parent;
  }
  return null;
}
