{
  PsiElement result=null;
  while (place != null) {
    PsiElement parent=place.getParent();
    if (parent instanceof KtContainerNode) {
      if (!(place instanceof KtBlockExpression) && !isBadContainerNode((KtContainerNode)parent,place)) {
        result=parent;
      }
    }
 else     if (parent instanceof KtClassBody || parent instanceof KtFile) {
      return result;
    }
 else     if (parent instanceof KtBlockExpression) {
      result=parent;
    }
 else     if (parent instanceof KtWhenEntry) {
      if (!(place instanceof KtBlockExpression)) {
        result=parent;
      }
    }
 else     if (parent instanceof KtDeclarationWithBody) {
      KtDeclarationWithBody function=(KtDeclarationWithBody)parent;
      if (function.getBodyExpression() == place) {
        if (!(place instanceof KtBlockExpression)) {
          result=parent;
        }
      }
    }
    place=parent;
  }
  return null;
}
