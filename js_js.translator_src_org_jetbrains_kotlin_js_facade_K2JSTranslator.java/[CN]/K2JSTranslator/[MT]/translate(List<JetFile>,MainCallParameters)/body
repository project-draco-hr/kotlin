{
  JsAnalysisResult analysisResult=TopDownAnalyzerFacadeForJS.analyzeFiles(files,Predicates.<PsiFile>alwaysTrue(),config);
  BindingTrace bindingTrace=analysisResult.getBindingTrace();
  TopDownAnalyzerFacadeForJS.checkForErrors(Config.withJsLibAdded(files,config),bindingTrace.getBindingContext());
  ModuleDescriptor moduleDescriptor=analysisResult.getModuleDescriptor();
  TranslationContext context=Translation.generateAst(bindingTrace,files,mainCallParameters,moduleDescriptor,config);
  Diagnostics diagnostics=bindingTrace.getBindingContext().getDiagnostics();
  if (hasError(diagnostics))   return new TranslationResult.Fail(diagnostics);
  JsProgram program=JsInliner.process(context);
  return new TranslationResult.Success(config,files,program,diagnostics);
}
