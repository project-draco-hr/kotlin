{
  for (  OrderEntry entry : ModuleRootManager.getInstance(dependentModule).getOrderEntries()) {
    if (entry instanceof ModuleOrderEntry) {
      ModuleOrderEntry moduleEntry=(ModuleOrderEntry)entry;
      if (!moduleEntry.getScope().isForProductionCompile()) {
        continue;
      }
      Module module=moduleEntry.getModule();
      if (module == null) {
        continue;
      }
      if (modules.add(module) && moduleEntry.isExported()) {
        collectModuleDependencies(module,modules);
      }
    }
  }
}
