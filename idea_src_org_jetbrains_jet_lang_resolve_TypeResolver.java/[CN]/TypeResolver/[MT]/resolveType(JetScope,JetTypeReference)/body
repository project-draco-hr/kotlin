{
  JetType cachedType=trace.getBindingContext().resolveTypeReference(typeReference);
  if (cachedType != null)   return cachedType;
  final List<Annotation> annotations=AnnotationResolver.INSTANCE.resolveAnnotations(typeReference.getAttributes());
  JetTypeElement typeElement=typeReference.getTypeElement();
  JetType type=resolveTypeElement(scope,annotations,typeElement,false);
  trace.recordTypeResolution(typeReference,type);
  return type;
}
