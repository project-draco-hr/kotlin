{
  if (context.getFile() instanceof JetFile) {
    final JetFile jetFile=(JetFile)context.getFile();
    ApplicationManager.getApplication().runReadAction(new Runnable(){
      @Override public void run(){
        int startOffset=context.getStartOffset();
        PsiElement element=context.getFile().findElementAt(startOffset);
        if (element == null) {
          return;
        }
        if (context.getFile() instanceof JetFile && item.getObject() instanceof JetLookupObject) {
          JetLookupObject lookupObject=(JetLookupObject)item.getObject();
          final DeclarationDescriptor descriptor=lookupObject.getDescriptor();
          PsiElement targetElement=lookupObject.getPsiElement();
          if (descriptor != null) {
            final FqName fqn=DescriptorUtils.getFQName(descriptor).toSafe();
            if (targetElement != null) {
              ImportInsertHelper.addImportDirectiveOrChangeToFqName(fqn,jetFile,context.getStartOffset(),targetElement);
            }
 else             if (JsModuleDetector.isJsModule(jetFile)) {
              ImportInsertHelper.addImportDirective(fqn,jetFile);
            }
          }
        }
      }
    }
);
  }
}
