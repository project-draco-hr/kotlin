{
  if (context.getFile() instanceof JetFile) {
    if (item.getObject() instanceof JetLookupObject) {
      JetLookupObject lookupObject=(JetLookupObject)item.getObject();
      DeclarationDescriptor descriptor=lookupObject.getDescriptor();
      if (descriptor != null) {
        int startOffset=context.getStartOffset();
        Document document=context.getDocument();
        if (!isAfterDot(document,startOffset)) {
          String fqName=DescriptorUtils.getFqName(descriptor).asString();
          String tempSuffix=".xxx";
          document.replaceString(startOffset,context.getTailOffset(),fqName + tempSuffix);
          int classNameEnd=startOffset + fqName.length();
          PsiDocumentManager psiDocumentManager=PsiDocumentManager.getInstance(context.getProject());
          psiDocumentManager.commitAllDocuments();
          RangeMarker rangeMarker=document.createRangeMarker(classNameEnd,classNameEnd + tempSuffix.length());
          ShortenReferences.instance$.process((JetFile)context.getFile(),startOffset,classNameEnd);
          psiDocumentManager.commitAllDocuments();
          psiDocumentManager.doPostponedOperationsAndUnblockDocument(document);
          if (rangeMarker.isValid()) {
            document.deleteString(rangeMarker.getStartOffset(),rangeMarker.getEndOffset());
          }
        }
      }
    }
  }
}
