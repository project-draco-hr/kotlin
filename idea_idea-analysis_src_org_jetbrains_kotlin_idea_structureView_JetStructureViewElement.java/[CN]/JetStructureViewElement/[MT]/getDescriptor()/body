{
  if (!(element.isValid() && element instanceof KtDeclaration)) {
    return null;
  }
  final KtDeclaration declaration=(KtDeclaration)element;
  if (declaration instanceof KtClassInitializer) {
    return null;
  }
  return ApplicationManager.getApplication().runReadAction(new Computable<DeclarationDescriptor>(){
    @Override public DeclarationDescriptor compute(){
      if (!DumbService.isDumb(element.getProject())) {
        return ResolutionUtils.resolveToDescriptor(declaration);
      }
      return null;
    }
  }
);
}
