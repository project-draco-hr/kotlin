{
  ClassOrNamespaceDescriptor containerDescriptor=DescriptorUtils.getParentOfType(referencedDescriptor,ClassOrNamespaceDescriptor.class,false);
  if (containerDescriptor instanceof PackageFragmentDescriptor) {
    return PackageClassUtils.getPackageClassFqName(((PackageFragmentDescriptor)containerDescriptor).getFqName());
  }
  if (containerDescriptor instanceof ClassDescriptor) {
    ClassKind classKind=((ClassDescriptor)containerDescriptor).getKind();
    if (classKind == ClassKind.CLASS_OBJECT || classKind == ClassKind.ENUM_ENTRY) {
      return getContainerFqName(containerDescriptor.getContainingDeclaration());
    }
    return getFqName(containerDescriptor).toSafe();
  }
  return null;
}
