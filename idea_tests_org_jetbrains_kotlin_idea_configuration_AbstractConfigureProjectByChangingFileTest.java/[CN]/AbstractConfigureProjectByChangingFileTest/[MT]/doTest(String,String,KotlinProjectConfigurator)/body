{
  configureByFile(beforeFile);
  String versionFromFile=InTextDirectivesUtils.findStringWithPrefixes(getFile().getText(),"// VERSION:");
  String version=versionFromFile != null ? versionFromFile : DEFAULT_VERSION;
  NotificationMessageCollector collector=NotificationMessageCollectorKt.createConfigureKotlinNotificationCollector(getProject());
  if (configurator instanceof KotlinWithGradleConfigurator) {
    ((KotlinWithGradleConfigurator)configurator).changeGradleFile((GroovyFile)getFile(),true,version,collector);
    ((KotlinWithGradleConfigurator)configurator).changeGradleFile((GroovyFile)getFile(),false,version,collector);
  }
 else   if (configurator instanceof KotlinMavenConfigurator) {
    ((KotlinMavenConfigurator)configurator).changePomFile(getModule(),getFile(),version,collector);
  }
  collector.showNotification();
  KotlinTestUtils.assertEqualsToFile(new File(afterFile),getFile().getText().replace(version,"$VERSION$"));
}
