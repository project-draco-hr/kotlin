{
  DeclarationDescriptor containingDeclaration=descriptor.getContainingDeclaration();
  if (descriptor instanceof ModuleDescriptor || containingDeclaration instanceof ModuleDescriptor) {
    return FqName.ROOT.toUnsafe();
  }
  if (containingDeclaration == null) {
    if (descriptor instanceof NamespaceDescriptor) {
      if (descriptor.getName().equals(Name.identifier("jet"))) {
        return FqNameUnsafe.topLevel(Name.identifier("jet"));
      }
      if (descriptor.getName().equals(Name.special("<java_root>"))) {
        return FqName.ROOT.toUnsafe();
      }
    }
    throw new IllegalStateException("descriptor is not module descriptor and has null containingDeclaration: " + containingDeclaration);
  }
  return getFQName(containingDeclaration).child(descriptor.getName());
}
