{
  if (initializedClassLoader != null) {
    fail("Double initialization of class loader in same test");
  }
  List<URL> urls=Lists.newArrayList();
  for (  File file : myEnvironment.getConfiguration().getList(JVMConfigurationKeys.CLASSPATH_KEY)) {
    try {
      urls.add(file.toURI().toURL());
    }
 catch (    MalformedURLException e) {
      throw new RuntimeException(e);
    }
  }
  final URL[] urlsArray=urls.toArray(new URL[urls.size()]);
  if (!classPathInTheSameClassLoader) {
    ClassLoader parentClassLoader=new URLClassLoader(urlsArray,CodegenTestCase.class.getClassLoader());
    initializedClassLoader=new GeneratedClassLoader(codegens,parentClassLoader);
  }
 else {
    initializedClassLoader=new GeneratedClassLoader(codegens,CodegenTestCase.class.getClassLoader(),urlsArray);
  }
  return initializedClassLoader;
}
