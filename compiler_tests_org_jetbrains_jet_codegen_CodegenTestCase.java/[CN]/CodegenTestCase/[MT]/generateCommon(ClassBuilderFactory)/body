{
  final AnalyzeExhaust analyzeExhaust=AnalyzerFacadeForJVM.analyzeFilesWithJavaIntegrationAndCheckForErrors(myEnvironment.getProject(),myFiles.getPsiFiles(),myFiles.getScriptParameterTypes(),Predicates.<PsiFile>alwaysTrue(),BuiltinsScopeExtensionMode.ALL);
  analyzeExhaust.throwIfError();
  AnalyzingUtils.throwExceptionOnErrors(analyzeExhaust.getBindingContext());
  GenerationState state=new GenerationState(myEnvironment.getProject(),classBuilderFactory,analyzeExhaust,myFiles.getPsiFiles());
  state.compileCorrectFiles(CompilationErrorHandler.THROW_EXCEPTION);
  return state;
}
