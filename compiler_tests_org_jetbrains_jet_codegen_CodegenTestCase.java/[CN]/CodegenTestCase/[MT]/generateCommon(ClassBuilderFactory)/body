{
  final AnalyzeExhaust analyzeExhaust=AnalyzerFacadeForJVM.analyzeOneFileWithJavaIntegrationAndCheckForErrors(myFile.getPsiFile(),myEnvironment.getCompilerDependencies());
  analyzeExhaust.throwIfError();
  AnalyzingUtils.throwExceptionOnErrors(analyzeExhaust.getBindingContext());
  GenerationState state=new GenerationState(myEnvironment.getProject(),classBuilderFactory,analyzeExhaust,Collections.singletonList(myFile.getPsiFile()));
  state.compileCorrectFiles(CompilationErrorHandler.THROW_EXCEPTION);
  return state;
}
