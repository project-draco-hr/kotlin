{
  AnalyzeExhaust analyzeExhaust=AnalyzerFacadeForJVM.analyzeFilesWithJavaIntegrationAndCheckForErrors(environment.getProject(),files.getPsiFiles(),files.getScriptParameterTypes(),Predicates.<PsiFile>alwaysTrue());
  analyzeExhaust.throwIfError();
  AnalyzingUtils.throwExceptionOnErrors(analyzeExhaust.getBindingContext());
  CompilerConfiguration configuration=environment.getConfiguration();
  GenerationState state=new GenerationState(environment.getProject(),classBuilderFactory,Progress.DEAF,analyzeExhaust,files.getPsiFiles(),configuration.get(JVMConfigurationKeys.BUILTIN_TO_JAVA_TYPES_MAPPING_KEY,BuiltinToJavaTypesMapping.ENABLED),configuration.get(JVMConfigurationKeys.GENERATE_NOT_NULL_ASSERTIONS,true),configuration.get(JVMConfigurationKeys.GENERATE_NOT_NULL_PARAMETER_ASSERTIONS,true));
  GenerationStrategy.STANDARD.compileCorrectFiles(state,CompilationErrorHandler.THROW_EXCEPTION);
  return state;
}
