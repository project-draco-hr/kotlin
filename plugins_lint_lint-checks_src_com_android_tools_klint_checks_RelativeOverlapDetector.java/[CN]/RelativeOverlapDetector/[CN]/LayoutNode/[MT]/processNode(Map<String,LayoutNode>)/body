{
  if (mProcessed) {
    return;
  }
  mProcessed=true;
  if (isInvisible() || hasAttr(ATTR_LAYOUT_ALIGN_RIGHT) || hasAttr(ATTR_LAYOUT_ALIGN_END)|| hasAttr(ATTR_LAYOUT_ALIGN_LEFT)|| hasAttr(ATTR_LAYOUT_ALIGN_START)) {
    mBucket=Bucket.SKIP;
  }
 else   if (hasTrueAttr(ATTR_LAYOUT_ALIGN_PARENT_TOP)) {
    mBucket=Bucket.TOP;
  }
 else   if (hasTrueAttr(ATTR_LAYOUT_ALIGN_PARENT_BOTTOM)) {
    mBucket=Bucket.BOTTOM;
  }
 else {
    if (hasAttr(ATTR_LAYOUT_ABOVE) || hasAttr(ATTR_LAYOUT_BELOW)) {
      mBucket=Bucket.SKIP;
    }
 else {
      String[] checkAlignment={ATTR_LAYOUT_ALIGN_TOP,ATTR_LAYOUT_ALIGN_BOTTOM,ATTR_LAYOUT_ALIGN_BASELINE};
      for (      String alignment : checkAlignment) {
        String value=mNode.getAttributeNS(ANDROID_URI,alignment);
        if (!value.isEmpty()) {
          LayoutNode otherNode=nodes.get(uniformId(value));
          if (otherNode != null) {
            otherNode.processNode(nodes);
            mBucket=otherNode.mBucket;
          }
        }
      }
    }
  }
  if (mBucket == null) {
    mBucket=Bucket.TOP;
  }
  boolean positioned=false;
  mToLeft=findNodeByAttr(nodes,ATTR_LAYOUT_TO_START_OF);
  if (mToLeft == null) {
    mToLeft=findNodeByAttr(nodes,ATTR_LAYOUT_TO_LEFT_OF);
  }
  for (LayoutNode n=mToLeft; n != null; n=n.mToLeft) {
    if (n.equals(this)) {
      mToLeft=null;
      mBucket=Bucket.SKIP;
      break;
    }
  }
  if (mToLeft != null) {
    mToLeft.mLastLeft=false;
    mLastRight=false;
    positioned=true;
  }
  mToRight=findNodeByAttr(nodes,ATTR_LAYOUT_TO_END_OF);
  if (mToRight == null) {
    mToRight=findNodeByAttr(nodes,ATTR_LAYOUT_TO_RIGHT_OF);
  }
  for (LayoutNode n=mToRight; n != null; n=n.mToRight) {
    if (n.equals(this)) {
      mToRight=null;
      mBucket=Bucket.SKIP;
      break;
    }
  }
  if (mToRight != null) {
    mToRight.mLastRight=false;
    mLastLeft=false;
    positioned=true;
  }
  if (hasTrueAttr(ATTR_LAYOUT_ALIGN_PARENT_END) || hasTrueAttr(ATTR_LAYOUT_ALIGN_PARENT_RIGHT)) {
    mLastRight=false;
    positioned=true;
  }
  if (hasTrueAttr(ATTR_LAYOUT_ALIGN_PARENT_START) || hasTrueAttr(ATTR_LAYOUT_ALIGN_PARENT_LEFT)) {
    mLastLeft=false;
    positioned=true;
  }
  if (!positioned) {
    mLastLeft=false;
  }
}
