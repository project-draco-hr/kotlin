{
  Set<TemplateContextType> contextTypes=TemplateManagerImpl.getApplicableContextTypes(file,offset);
  ArrayList<TemplateImpl> result=ContainerUtil.newArrayList();
  for (  TemplateImpl template : TemplateSettings.getInstance().getTemplates()) {
    if (!template.isDeactivated() && !template.isSelectionTemplate() && TemplateManagerImpl.isApplicable(template,contextTypes)) {
      result.add(template);
    }
  }
  return result;
}
