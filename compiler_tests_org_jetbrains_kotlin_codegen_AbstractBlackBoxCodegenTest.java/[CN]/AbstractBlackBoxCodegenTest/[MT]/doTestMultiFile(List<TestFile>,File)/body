{
  TestJdkKind jdkKind=TestJdkKind.MOCK_JDK;
  List<String> javacOptions=new ArrayList<String>(0);
  for (  TestFile file : files) {
    if (isFullJdkDirectiveDefined(file.content)) {
      jdkKind=TestJdkKind.FULL_JDK;
      break;
    }
    javacOptions.addAll(InTextDirectivesUtils.findListWithPrefixes(file.content,"// JAVAC_OPTIONS:"));
  }
  compileAndRun(files,javaSourceDir,jdkKind,javacOptions);
}
