{
  TestJdkKind jdkKind=TestJdkKind.MOCK_JDK;
  List<String> javacOptions=new ArrayList<String>(0);
  for (  TestFile file : files) {
    if (InTextDirectivesUtils.isDirectiveDefined(file.content,"FULL_JDK")) {
      jdkKind=TestJdkKind.FULL_JDK;
    }
    if (InTextDirectivesUtils.isDirectiveDefined(file.content,"NO_KOTLIN_REFLECT")) {
      configurationKind=ConfigurationKind.NO_KOTLIN_REFLECT;
    }
    javacOptions.addAll(InTextDirectivesUtils.findListWithPrefixes(file.content,"// JAVAC_OPTIONS:"));
  }
  compileAndRun(files,javaFilesDir,jdkKind,javacOptions);
}
