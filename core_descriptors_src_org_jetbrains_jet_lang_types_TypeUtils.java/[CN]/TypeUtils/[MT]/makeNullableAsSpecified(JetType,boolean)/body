{
  if (type.isNullable() == nullable) {
    return type;
  }
  if (type instanceof AbstractTypeWithKnownNullability) {
    return makeNullableAsSpecified(((AbstractTypeWithKnownNullability)type).delegate,nullable);
  }
  return nullable ? new NullableType(type) : new NotNullType(type);
}
