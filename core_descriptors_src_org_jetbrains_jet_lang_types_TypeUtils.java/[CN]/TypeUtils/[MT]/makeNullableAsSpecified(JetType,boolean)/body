{
  if (TypesPackage.isFlexible(type))   return type;
  if (type instanceof AbstractTypeWithKnownNullability) {
    return makeNullableAsSpecified(((AbstractTypeWithKnownNullability)type).delegate,nullable);
  }
  if (!(type instanceof LazyType) && type.isNullable() == nullable) {
    return type;
  }
  return nullable ? new NullableType(type) : new NotNullType(type);
}
