{
  List<FunctionDescriptor> answer=Lists.newArrayList();
  for (  JetDeclaration declaration : declarations) {
    JetScope scope=null;
    if (declaration instanceof JetClass) {
      JetClass klass=(JetClass)declaration;
      ClassDescriptor classDescriptor=BindingUtils.getClassDescriptor(bindingContext,klass);
      if (classDescriptor.getModality() != Modality.ABSTRACT) {
        scope=classDescriptor.getDefaultType().getMemberScope();
      }
    }
    if (scope != null) {
      Collection<DeclarationDescriptor> allDescriptors=scope.getAllDescriptors();
      List<FunctionDescriptor> testFunctions=ContainerUtil.mapNotNull(allDescriptors,new Function<DeclarationDescriptor,FunctionDescriptor>(){
        @Override public FunctionDescriptor fun(        DeclarationDescriptor descriptor){
          if (descriptor instanceof FunctionDescriptor) {
            FunctionDescriptor functionDescriptor=(FunctionDescriptor)descriptor;
            if (isTest(functionDescriptor))             return functionDescriptor;
          }
          return null;
        }
      }
);
      answer.addAll(testFunctions);
    }
  }
  return answer;
}
