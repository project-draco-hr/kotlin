{
  final BytecodeCompiler compiler=new BytecodeCompiler(this.stdlib);
  if ((this.srcdir != null) || (this.file != null)) {
    if ((this.destdir == null) && (this.destjar == null)) {
      throw new RuntimeException("\"destdir\" or \"destjar\" should be specified");
    }
    String src=getPath(this.srcdir != null ? this.srcdir : this.file);
    String dest=getPath(this.destdir != null ? this.destdir : this.destjar);
    log(String.format("[%s] => [%s]",src,dest));
    if (this.destdir != null) {
      compiler.sourcesToDir(src,dest);
    }
 else {
      compiler.sourcesToJar(src,dest,this.includeRuntime);
    }
  }
 else   if (this.module != null) {
    if (this.destdir != null) {
      throw new RuntimeException("Module compilation is only supported for jar destination");
    }
    String modulePath=getPath(this.module);
    String jarPath=(this.destjar != null ? getPath(this.destjar) : null);
    compiler.moduleToJar(modulePath,jarPath,this.includeRuntime);
  }
 else {
    throw new RuntimeException("This operation is not supported");
  }
}
