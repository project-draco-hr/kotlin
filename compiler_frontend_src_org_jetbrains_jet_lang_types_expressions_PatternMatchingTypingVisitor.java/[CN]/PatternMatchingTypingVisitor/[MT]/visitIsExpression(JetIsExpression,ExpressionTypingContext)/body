{
  ExpressionTypingContext context=contextWithExpectedType.replaceExpectedType(TypeUtils.NO_EXPECTED_TYPE);
  JetType knownType=facade.safeGetType(expression.getLeftHandSide(),context.replaceScope(context.scope));
  JetPattern pattern=expression.getPattern();
  if (pattern != null) {
    WritableScopeImpl scopeToExtend=newWritableScopeImpl(context).setDebugName("Scope extended in 'is'");
    DataFlowInfo newDataFlowInfo=checkPatternType(pattern,knownType,scopeToExtend,context,AutoCastUtils.getVariableDescriptorFromSimpleName(context.trace.getBindingContext(),expression.getLeftHandSide()));
    context.patternsToDataFlowInfo.put(pattern,newDataFlowInfo);
    context.patternsToBoundVariableLists.put(pattern,scopeToExtend.getDeclaredVariables());
  }
  return ExpressionTypingUtils.checkType(context.semanticServices.getStandardLibrary().getBooleanType(),expression,contextWithExpectedType);
}
