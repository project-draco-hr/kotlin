{
  PsiFile file=statement.getContainingFile();
  if (file instanceof JetFile) {
    if (PsiPackage.getDoNotAnalyze((JetFile)file) != null) {
      return null;
    }
  }
  Document document=file.getViewProvider().getDocument();
  TextRange textRange=statement.getTextRange();
  return document != null ? document.getLineNumber(markEndOffset ? textRange.getEndOffset() : textRange.getStartOffset()) + 1 : null;
}
