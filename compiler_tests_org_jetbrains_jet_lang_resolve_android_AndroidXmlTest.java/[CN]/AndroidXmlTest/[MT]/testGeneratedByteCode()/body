{
  String resPath=getTestDataPath() + "/converter/singleFile/res/layout/";
  List<File> files=addDefaultFiles();
  files.add(fakeMyActivitySrc);
  GenerationState state=compileManyFilesGetGenerationState(files,resPath);
  ByteArrayClassLoader classLoader=new ByteArrayClassLoader(new URL[]{},getClass().getClassLoader(),state.getFactory().asList());
  classLoader.loadFiles();
  Class<?> activity=classLoader.findClass("com.myapp.MyActivity");
  String res=(String)activity.getMethod("test").invoke(activity.newInstance());
  Disposer.dispose(getTestRootDisposable());
  assertEquals("OK",res);
}
