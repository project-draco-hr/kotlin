{
  builder.enterSubroutine(subroutine);
  CFPVisitor cfpVisitor=new CFPVisitor(builder);
  if (subroutine instanceof KtDeclarationWithBody && !(subroutine instanceof KtSecondaryConstructor)) {
    KtDeclarationWithBody declarationWithBody=(KtDeclarationWithBody)subroutine;
    List<KtParameter> valueParameters=declarationWithBody.getValueParameters();
    for (    KtParameter valueParameter : valueParameters) {
      cfpVisitor.generateInstructions(valueParameter);
    }
    KtExpression bodyExpression=declarationWithBody.getBodyExpression();
    if (bodyExpression != null) {
      cfpVisitor.generateInstructions(bodyExpression);
      if (!declarationWithBody.hasBlockBody()) {
        generateImplicitReturnValue(bodyExpression,subroutine);
      }
    }
  }
 else {
    cfpVisitor.generateInstructions(subroutine);
  }
  return builder.exitSubroutine(subroutine);
}
