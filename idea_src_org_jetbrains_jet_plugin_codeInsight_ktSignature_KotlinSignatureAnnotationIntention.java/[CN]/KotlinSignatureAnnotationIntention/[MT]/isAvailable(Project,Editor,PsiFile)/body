{
  PsiModifierListOwner annotationOwner=findAnnotationOwner(file,editor);
  if (annotationOwner == null) {
    return false;
  }
  PsiModifierList modifierList=annotationOwner.getModifierList();
  if (modifierList == null || modifierList.hasExplicitModifier(PsiModifier.PRIVATE)) {
    return false;
  }
  if (!PsiUtil.isLanguageLevel5OrHigher(annotationOwner))   return false;
  if (findKotlinSignatureAnnotation(annotationOwner) != null) {
    if (isAnnotationEditable(annotationOwner)) {
      setText(JetBundle.message("edit.kotlin.signature.action.text"));
    }
 else {
      setText(JetBundle.message("view.kotlin.signature.action.text"));
    }
  }
 else {
    setText(JetBundle.message("add.kotlin.signature.action.text"));
  }
  return true;
}
