{
  if (canBeCasted) {
    trace.record(SMARTCAST,expression,type);
    if (recordExpressionType) {
      trace.record(EXPRESSION_TYPE,expression,type);
    }
  }
 else {
    trace.report(SMARTCAST_IMPOSSIBLE.on(expression,type,expression.getText()));
  }
}
