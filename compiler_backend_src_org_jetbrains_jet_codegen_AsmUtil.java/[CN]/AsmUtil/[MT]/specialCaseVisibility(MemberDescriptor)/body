{
  DeclarationDescriptor containingDeclaration=memberDescriptor.getContainingDeclaration();
  if (isInterface(containingDeclaration)) {
    return ACC_PUBLIC;
  }
  Visibility memberVisibility=memberDescriptor.getVisibility();
  if (memberVisibility == Visibilities.LOCAL && memberDescriptor instanceof CallableMemberDescriptor) {
    return ACC_PUBLIC;
  }
  if (isEnumEntry(memberDescriptor)) {
    return NO_FLAG_PACKAGE_PRIVATE;
  }
  if (memberDescriptor instanceof ConstructorDescriptor && isAnonymousObject(memberDescriptor.getContainingDeclaration())) {
    return NO_FLAG_PACKAGE_PRIVATE;
  }
  if (!Visibilities.isPrivate(memberVisibility)) {
    return null;
  }
  if (memberDescriptor instanceof ConstructorDescriptor) {
    ClassKind kind=((ClassDescriptor)containingDeclaration).getKind();
    if (kind == ClassKind.OBJECT || kind == ClassKind.ENUM_ENTRY) {
      return NO_FLAG_PACKAGE_PRIVATE;
    }
    if (kind == ClassKind.ENUM_CLASS) {
      return ACC_PROTECTED;
    }
  }
  if (containingDeclaration instanceof PackageFragmentDescriptor) {
    return ACC_PUBLIC;
  }
  return null;
}
