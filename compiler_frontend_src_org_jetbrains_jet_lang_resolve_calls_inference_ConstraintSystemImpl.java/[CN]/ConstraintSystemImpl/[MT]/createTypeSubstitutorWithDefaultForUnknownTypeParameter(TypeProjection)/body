{
  return TypeSubstitutor.create(new TypeSubstitution(){
    @Override public TypeProjection get(    TypeConstructor key){
      DeclarationDescriptor declarationDescriptor=key.getDeclarationDescriptor();
      if (declarationDescriptor instanceof TypeParameterDescriptor) {
        TypeParameterDescriptor descriptor=(TypeParameterDescriptor)declarationDescriptor;
        JetType value=ConstraintsUtil.getValue(getTypeConstraints(descriptor));
        if (value != null && !TypeUtils.dependsOnTypeParameterConstructors(value,Collections.singleton(DONT_CARE.getConstructor()))) {
          return new TypeProjection(value);
        }
        if (typeParameterConstraints.containsKey(descriptor)) {
          return defaultTypeProjection;
        }
      }
      return null;
    }
    @Override public boolean isEmpty(){
      return false;
    }
    @Override public String toString(){
      return typeParameterConstraints.toString();
    }
  }
);
}
