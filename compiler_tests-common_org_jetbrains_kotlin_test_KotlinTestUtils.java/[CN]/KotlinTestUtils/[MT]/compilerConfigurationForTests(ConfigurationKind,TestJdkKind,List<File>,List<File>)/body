{
  CompilerConfiguration configuration=new CompilerConfiguration();
  JvmContentRootsKt.addJavaSourceRoots(configuration,javaSource);
  if (jdkKind == TestJdkKind.MOCK_JDK) {
    JvmContentRootsKt.addJvmClasspathRoot(configuration,findMockJdkRtJar());
  }
 else   if (jdkKind == TestJdkKind.MODIFIED_MOCK_JDK) {
    JvmContentRootsKt.addJvmClasspathRoot(configuration,findMockJdkRtModified());
  }
 else   if (jdkKind == TestJdkKind.ANDROID_API) {
    JvmContentRootsKt.addJvmClasspathRoot(configuration,findAndroidApiJar());
  }
 else {
    JvmContentRootsKt.addJvmClasspathRoots(configuration,PathUtil.getJdkClassesRoots());
  }
  if (configurationKind.getWithRuntime()) {
    JvmContentRootsKt.addJvmClasspathRoot(configuration,ForTestCompileRuntime.runtimeJarForTests());
    JvmContentRootsKt.addJvmClasspathRoot(configuration,ForTestCompileRuntime.kotlinTestJarForTests());
  }
 else   if (configurationKind.getWithMockRuntime()) {
    JvmContentRootsKt.addJvmClasspathRoot(configuration,ForTestCompileRuntime.mockRuntimeJarForTests());
  }
  if (configurationKind.getWithReflection()) {
    JvmContentRootsKt.addJvmClasspathRoot(configuration,ForTestCompileRuntime.reflectJarForTests());
  }
  JvmContentRootsKt.addJvmClasspathRoots(configuration,classpath);
  configuration.put(MODULE_NAME,TEST_MODULE_NAME);
  return configuration;
}
