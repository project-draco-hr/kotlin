{
  ConstructorDescriptor primaryConstructor=null;
  if (GENERATE_CONSTRUCTORS_FOR.contains(thisDescriptor.getKind())) {
    JetClassOrObject classOrObject=declarationProvider.getOwnerInfo().getCorrespondingClassOrObject();
    if (!thisDescriptor.getKind().isSingleton()) {
      JetClass jetClass=(JetClass)classOrObject;
      ConstructorDescriptorImpl constructor=resolveSession.getDescriptorResolver().resolvePrimaryConstructorDescriptor(thisDescriptor.getScopeForClassHeaderResolution(),thisDescriptor,jetClass,resolveSession.getTrace());
      primaryConstructor=constructor;
      setDeferredReturnType(constructor);
    }
 else {
      ConstructorDescriptorImpl constructor=DescriptorResolver.createAndRecordPrimaryConstructorForObject(classOrObject,thisDescriptor,resolveSession.getTrace());
      setDeferredReturnType(constructor);
      primaryConstructor=constructor;
    }
  }
  return primaryConstructor;
}
