{
  if (node instanceof JsBlock) {
    JsBlock block=(JsBlock)node;
    List<JsStatement> statements=block.getStatements();
    if (statements.isEmpty())     return block;
    int size=statements.size();
    statements.set(size - 1,AstUtil.convertToStatement(mutateLastExpression(statements.get(size - 1),mutator)));
    return block;
  }
  if (node instanceof JsIf) {
    JsIf ifExpr=(JsIf)node;
    ifExpr.setThenStmt(AstUtil.convertToStatement(mutateLastExpression(ifExpr.getThenStmt(),mutator)));
    JsStatement elseStmt=ifExpr.getElseStmt();
    if (elseStmt != null) {
      ifExpr.setElseStmt(AstUtil.convertToStatement(mutateLastExpression(elseStmt,mutator)));
    }
    return ifExpr;
  }
  if (node instanceof JsExprStmt) {
    return AstUtil.convertToStatement(mutateLastExpression(((JsExprStmt)node).getExpression(),mutator));
  }
  return mutator.mutate(node);
}
