{
  return new JetPsiReference(){
    @Override public PsiElement getElement(){
      return getReferencedNameElement();
    }
    @Override public TextRange getRangeInElement(){
      return new TextRange(0,getElement().getTextLength());
    }
    @NotNull @Override public Object[] getVariants(){
      PsiElement parent=getParent();
      if (parent instanceof JetQualifiedExpression) {
        JetQualifiedExpression qualifiedExpression=(JetQualifiedExpression)parent;
        JetExpression receiverExpression=qualifiedExpression.getReceiverExpression();
        JetFile file=(JetFile)getContainingFile();
        BindingContext bindingContext=AnalyzingUtils.analyzeFileWithCache(file);
        final JetType expressionType=bindingContext.getExpressionType(receiverExpression);
        if (expressionType != null) {
          List<LookupElement> result=Lists.newArrayList();
          for (          final DeclarationDescriptor descriptor : expressionType.getMemberScope().getAllDescriptors()) {
            result.add(new LookupElement(){
              @NotNull @Override public String getLookupString(){
                return descriptor.getName();
              }
              @Override public void renderElement(              LookupElementPresentation presentation){
                presentation.setItemText(descriptor.getName());
                presentation.setTypeText(DescriptorRenderer.TEXT.render(descriptor));
              }
            }
);
          }
          return result.toArray();
        }
      }
      return EMPTY_ARRAY;
    }
  }
;
}
