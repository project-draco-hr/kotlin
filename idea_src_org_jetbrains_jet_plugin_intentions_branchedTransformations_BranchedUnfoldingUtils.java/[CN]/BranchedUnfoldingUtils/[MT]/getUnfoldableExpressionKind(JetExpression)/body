{
  if (root == null)   return null;
  if (JetPsiUtil.isAssignment(root)) {
    JetBinaryExpression assignment=(JetBinaryExpression)root;
    if (assignment.getLeft() == null)     return null;
    JetExpression rhs=assignment.getRight();
    if (rhs instanceof JetIfExpression)     return UnfoldableKind.ASSIGNMENT_TO_IF;
    if (rhs instanceof JetWhenExpression && JetPsiUtil.checkWhenExpressionHasSingleElse((JetWhenExpression)rhs)) {
      return UnfoldableKind.ASSIGNMENT_TO_WHEN;
    }
  }
 else   if (root instanceof JetReturnExpression) {
    JetExpression resultExpr=((JetReturnExpression)root).getReturnedExpression();
    if (resultExpr instanceof JetIfExpression)     return UnfoldableKind.RETURN_TO_IF;
    if (resultExpr instanceof JetWhenExpression && JetPsiUtil.checkWhenExpressionHasSingleElse((JetWhenExpression)resultExpr)) {
      return UnfoldableKind.RETURN_TO_WHEN;
    }
  }
 else   if (root instanceof JetProperty) {
    JetProperty property=(JetProperty)root;
    if (!property.isLocal())     return null;
    JetExpression initializer=property.getInitializer();
    if (initializer instanceof JetIfExpression)     return UnfoldableKind.PROPERTY_TO_IF;
    if (initializer instanceof JetWhenExpression && JetPsiUtil.checkWhenExpressionHasSingleElse((JetWhenExpression)initializer)) {
      return UnfoldableKind.PROPERTY_TO_WHEN;
    }
  }
  return null;
}
