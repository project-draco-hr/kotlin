{
  TypeConstructor constructor=subtype.getConstructor();
  if (typeCheckingProcedureCallbacks.assertEqualTypeConstructors(constructor,supertype.getConstructor())) {
    return subtype;
  }
  for (  JetType immediateSupertype : constructor.getSupertypes()) {
    JetType correspondingSupertype=findCorrespondingSupertype(immediateSupertype,supertype,typeCheckingProcedureCallbacks);
    if (correspondingSupertype != null) {
      return TypeSubstitutor.create(subtype).safeSubstitute(correspondingSupertype,Variance.INVARIANT);
    }
  }
  return null;
}
