{
  JetType type=whenSubjectType(expression,trace.getBindingContext());
  ClassDescriptor classDescriptor=getClassDescriptorOfTypeIfEnum(type);
  if (type == null || classDescriptor == null)   return false;
  boolean isExhaust=true;
  boolean notEmpty=false;
  for (  DeclarationDescriptor descriptor : classDescriptor.getUnsubstitutedInnerClassesScope().getAllDescriptors()) {
    if (isEnumEntry(descriptor)) {
      notEmpty=true;
      if (!containsEnumEntryCase(expression,(ClassDescriptor)descriptor,trace)) {
        isExhaust=false;
      }
    }
  }
  boolean exhaustive=isExhaust && notEmpty && (!TypeUtils.isNullableType(type) || containsNullCase(expression,trace));
  if (exhaustive) {
    trace.record(BindingContext.EXHAUSTIVE_WHEN,expression);
  }
  return exhaustive;
}
