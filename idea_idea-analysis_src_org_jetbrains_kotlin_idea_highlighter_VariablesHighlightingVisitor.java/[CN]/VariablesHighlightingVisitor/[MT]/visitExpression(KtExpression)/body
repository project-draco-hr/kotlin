{
  KotlinType implicitSmartCast=bindingContext.get(IMPLICIT_RECEIVER_SMARTCAST,expression);
  if (implicitSmartCast != null) {
    holder.createInfoAnnotation(expression,"Implicit receiver smart cast to " + DescriptorRenderer.FQ_NAMES_IN_TYPES.renderType(implicitSmartCast)).setTextAttributes(KotlinHighlightingColors.SMART_CAST_RECEIVER);
  }
  boolean nullSmartCast=bindingContext.get(SMARTCAST_NULL,expression) == Boolean.TRUE;
  if (nullSmartCast) {
    holder.createInfoAnnotation(expression,"Always null").setTextAttributes(KotlinHighlightingColors.SMART_CONSTANT);
  }
  KotlinType smartCast=bindingContext.get(SMARTCAST,expression);
  if (smartCast != null) {
    PsiElement target=expression;
    if (expression instanceof KtIfExpression) {
      target=((KtIfExpression)expression).getIfKeyword();
    }
 else     if (expression instanceof KtWhenExpression) {
      target=((KtWhenExpression)expression).getWhenKeyword();
    }
    holder.createInfoAnnotation(target,"Smart cast to " + DescriptorRenderer.FQ_NAMES_IN_TYPES.renderType(smartCast)).setTextAttributes(KotlinHighlightingColors.SMART_CAST_VALUE);
  }
  super.visitExpression(expression);
}
