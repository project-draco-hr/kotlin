{
  Object _value=value;
  if (!(value instanceof NotValue))   return WrappedValues.unescapeThrowable(_value);
  lock.lock();
  try {
    _value=value;
    if (!(_value instanceof NotValue))     return WrappedValues.unescapeThrowable(_value);
    if (_value == NotValue.COMPUTING) {
      Object result=recursionDetected();
      if (result != NotValue.NOT_COMPUTED) {
        return WrappedValues.unescapeThrowable(result);
      }
    }
    value=NotValue.COMPUTING;
    try {
      T typedValue=computable.compute();
      value=typedValue;
      postCompute(typedValue);
      return typedValue;
    }
 catch (    Throwable throwable) {
      value=WrappedValues.escapeThrowable(throwable);
      throw ExceptionUtils.rethrow(throwable);
    }
  }
  finally {
    lock.unlock();
  }
}
