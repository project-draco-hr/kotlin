{
  Set<SuccessfulLookupResult> results=Sets.newLinkedHashSet();
  for (  DeclarationDescriptor declarationDescriptor : declarationDescriptors) {
    if (declarationDescriptor instanceof PackageViewDescriptor) {
      addResult(results,lookupSimpleNameReference(selector,((PackageViewDescriptor)declarationDescriptor).getMemberScope(),lookupMode,true));
    }
    if (declarationDescriptor instanceof ClassDescriptor) {
      addResultsForClass(results,selector,lookupMode,(ClassDescriptor)declarationDescriptor);
    }
  }
  return filterAndStoreResolutionResult(results,selector,trace,scopeToCheckVisibility,lookupMode,storeResult);
}
