{
  Set<SuccessfulLookupResult> results=Sets.newHashSet();
  for (  DeclarationDescriptor declarationDescriptor : declarationDescriptors) {
    if (declarationDescriptor instanceof PackageViewDescriptor) {
      addResult(results,lookupSimpleNameReference(selector,((PackageViewDescriptor)declarationDescriptor).getMemberScope(),lookupMode,true));
    }
    if (declarationDescriptor instanceof ClassDescriptor) {
      addResult(results,lookupSimpleNameReference(selector,getAppropriateScope((ClassDescriptor)declarationDescriptor,lookupMode),lookupMode,false));
      ClassDescriptor classObjectDescriptor=((ClassDescriptor)declarationDescriptor).getClassObjectDescriptor();
      if (classObjectDescriptor != null) {
        addResult(results,lookupSimpleNameReference(selector,getAppropriateScope(classObjectDescriptor,lookupMode),lookupMode,false));
      }
    }
  }
  return filterAndStoreResolutionResult(results,selector,trace,scopeToCheckVisibility,lookupMode,storeResult);
}
