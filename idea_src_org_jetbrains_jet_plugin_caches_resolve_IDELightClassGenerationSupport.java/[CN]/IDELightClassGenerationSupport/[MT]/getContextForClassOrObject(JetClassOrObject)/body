{
  ResolveSessionForBodies session=ResolvePackage.getLazyResolveSession(classOrObject);
  if (JetPsiUtil.isLocal(classOrObject)) {
    BindingContext bindingContext=session.resolveToElement(classOrObject);
    ClassDescriptor descriptor=bindingContext.get(BindingContext.CLASS,classOrObject);
    if (descriptor == null) {
      LOG.warn("No class descriptor in context for class: " + JetPsiUtil.getElementTextWithContext(classOrObject));
      return new LightClassConstructionContext(BindingContext.EMPTY,null);
    }
    ForceResolveUtil.forceResolveAllContents(descriptor);
    return new LightClassConstructionContext(bindingContext,null);
  }
  ForceResolveUtil.forceResolveAllContents(session.getClassDescriptor(classOrObject));
  return new LightClassConstructionContext(session.getBindingContext(),null);
}
