{
  try {
    if (!expectedFile.exists()) {
      FileUtil.writeToFile(expectedFile,actual);
      Assert.fail("Expected data file did not exist. Generating: " + expectedFile);
    }
    String expected=FileUtil.loadFile(expectedFile,CharsetToolkit.UTF8,true);
    String expectedText=StringUtil.convertLineSeparators(expected.trim());
    String actualText=StringUtil.convertLineSeparators(actual.trim());
    if (!Comparing.equal(expectedText,actualText)) {
      throw new FileComparisonFailure("Expected and actual namespaces differ from " + expectedFile.getName(),expected,actual,expectedFile.getAbsolutePath());
    }
  }
 catch (  IOException e) {
    throw new RuntimeException(e);
  }
}
