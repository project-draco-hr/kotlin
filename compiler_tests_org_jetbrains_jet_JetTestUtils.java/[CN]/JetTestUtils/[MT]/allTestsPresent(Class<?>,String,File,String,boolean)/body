{
  Set<String> methodNames=new HashSet<String>();
  for (  Method method : testCaseClass.getDeclaredMethods()) {
    boolean isTestMethod=method.getName().startsWith("test");
    if (isTestMethod) {
      methodNames.add(method.getName().toLowerCase() + "." + extension);
    }
  }
  for (  File file : testDataDir.listFiles()) {
    if (file.isDirectory()) {
      if (recursive) {
        allTestsPresent(testCaseClass,generatorClassFqName,file,extension,recursive);
      }
    }
 else {
      String name=file.getName();
      if (name.endsWith("." + extension) && !methodNames.contains("test" + name.toLowerCase())) {
        String generatorClassSimpleName=generatorClassFqName.substring(generatorClassFqName.lastIndexOf(".") + 1);
        junit.framework.Assert.fail("Test data file missing from the generated test class: " + file + "\nPlease re-run the generator: "+ generatorClassFqName+ "("+ generatorClassSimpleName+ ".java:1)");
      }
    }
  }
}
