{
  ProjectFileIndex projectFileIndex=ProjectFileIndex.SERVICE.getInstance(project);
  GlobalSearchScope resultScope=GlobalSearchScope.EMPTY_SCOPE;
  for (  OrderEntry orderEntry : projectFileIndex.getOrderEntriesForFile(libraryFile)) {
    for (    VirtualFile sourceDir : orderEntry.getFiles(OrderRootType.SOURCES)) {
      resultScope=resultScope.uniteWith(GlobalSearchScopes.directoryScope(project,sourceDir,true));
    }
  }
  return resultScope;
}
