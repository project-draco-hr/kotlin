{
  JetFile containingFile=decompiledDeclaration.getContainingJetFile();
  VirtualFile libraryFile=containingFile.getVirtualFile();
  if (libraryFile == null) {
    return GlobalSearchScope.EMPTY_SCOPE;
  }
  Project project=decompiledDeclaration.getProject();
  ProjectFileIndex projectFileIndex=ProjectFileIndex.SERVICE.getInstance(project);
  GlobalSearchScope resultScope=GlobalSearchScope.EMPTY_SCOPE;
  for (  OrderEntry orderEntry : projectFileIndex.getOrderEntriesForFile(libraryFile)) {
    for (    VirtualFile sourceDir : orderEntry.getFiles(OrderRootType.SOURCES)) {
      resultScope=resultScope.uniteWith(GlobalSearchScopesCore.directoryScope(project,sourceDir,true));
    }
  }
  return resultScope;
}
