{
  if (descriptor instanceof VariableAsFunctionDescriptor) {
    descriptor=((VariableAsFunctionDescriptor)descriptor).getVariableDescriptor();
    if (descriptor == null)     return;
  }
  if (descriptor instanceof VariableDescriptor) {
    VariableDescriptor variableDescriptor=(VariableDescriptor)descriptor;
    if (variableDescriptor.isVar()) {
      JetPsiChecker.highlightName(holder,elementToHighlight,JetHighlightingColors.MUTABLE_VARIABLE);
    }
    if (Boolean.TRUE.equals(bindingContext.get(MUST_BE_WRAPPED_IN_A_REF,variableDescriptor))) {
      holder.createInfoAnnotation(elementToHighlight,"Wrapped into a reference object to be modified when captured in a closure").setTextAttributes(JetHighlightingColors.WRAPPED_INTO_REF);
    }
    if (descriptor instanceof LocalVariableDescriptor) {
      JetPsiChecker.highlightName(holder,elementToHighlight,JetHighlightingColors.LOCAL_VARIABLE);
    }
    if (descriptor instanceof ValueParameterDescriptor) {
      JetPsiChecker.highlightName(holder,elementToHighlight,JetHighlightingColors.PARAMETER);
    }
  }
}
