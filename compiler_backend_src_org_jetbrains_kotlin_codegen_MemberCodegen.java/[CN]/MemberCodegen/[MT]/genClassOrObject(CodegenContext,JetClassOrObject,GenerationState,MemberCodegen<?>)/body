{
  ClassDescriptor descriptor=state.getBindingContext().get(BindingContext.CLASS,aClass);
  if (descriptor == null || ErrorUtils.isError(descriptor)) {
    badDescriptor(descriptor,state.getClassBuilderMode());
    return;
  }
  if (descriptor.getName().equals(SpecialNames.NO_NAME_PROVIDED)) {
    badDescriptor(descriptor,state.getClassBuilderMode());
  }
  Type classType=state.getTypeMapper().mapClass(descriptor);
  ClassBuilder classBuilder=state.getFactory().newVisitor(OtherOrigin(aClass,descriptor),classType,aClass.getContainingFile());
  ClassContext classContext=parentContext.intoClass(descriptor,OwnerKind.IMPLEMENTATION,state);
  new ImplementationBodyCodegen(aClass,classContext,classBuilder,state,parentCodegen).generate();
  if (aClass instanceof JetClass && ((JetClass)aClass).isInterface()) {
    Type defaultImplsType=state.getTypeMapper().mapTraitImpl(descriptor);
    ClassBuilder defaultImplsBuilder=state.getFactory().newVisitor(TraitImpl(aClass,descriptor),defaultImplsType,aClass.getContainingFile());
    ClassContext defaultImplsContext=parentContext.intoClass(descriptor,OwnerKind.DEFAULT_IMPLS,state);
    new InterfaceImplBodyCodegen(aClass,defaultImplsContext,defaultImplsBuilder,state,parentCodegen).generate();
  }
}
