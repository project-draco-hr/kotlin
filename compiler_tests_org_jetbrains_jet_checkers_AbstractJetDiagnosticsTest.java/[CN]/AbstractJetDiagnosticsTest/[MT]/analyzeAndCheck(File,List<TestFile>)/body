{
  List<JetFile> jetFiles=getJetFiles(testFiles);
  CliLightClassGenerationSupport support=CliLightClassGenerationSupport.getInstanceForCli(getProject());
  BindingContext bindingContext=AnalyzerFacadeForJVM.analyzeFilesWithJavaIntegration(getProject(),jetFiles,support.getTrace(),Collections.<AnalyzerScriptParameter>emptyList(),Predicates.<PsiFile>alwaysTrue(),false,support.getModule(),MemberFilter.ALWAYS_TRUE).getBindingContext();
  boolean ok=true;
  StringBuilder actualText=new StringBuilder();
  for (  TestFile testFile : testFiles) {
    ok&=testFile.getActualText(bindingContext,actualText);
  }
  JetTestUtils.assertEqualsToFile(testDataFile,actualText.toString());
  assertTrue("Diagnostics mismatch. See the output above",ok);
  checkAllResolvedCallsAreCompleted(jetFiles,bindingContext);
}
