{
  Map<TestModule,ModuleDescriptorImpl> modules=new HashMap<TestModule,ModuleDescriptorImpl>();
  for (  TestModule testModule : groupedByModule.keySet()) {
    ModuleDescriptorImpl module=testModule == null ? TopDownAnalyzerFacadeForJVM.createAnalyzeModule() : createModule(testModule);
    modules.put(testModule,module);
  }
  for (  TestModule testModule : groupedByModule.keySet()) {
    if (testModule == null)     continue;
    ModuleDescriptorImpl module=modules.get(testModule);
    module.addDependencyOnModule(module);
    for (    TestModule dependency : testModule.getDependencies()) {
      module.addDependencyOnModule(modules.get(dependency));
    }
    module.addDependencyOnModule(KotlinBuiltIns.getInstance().getBuiltInsModule());
    module.seal();
  }
  return modules;
}
