{
  if (fileName.endsWith(".java")) {
    PsiFileFactory.getInstance(getProject()).createFileFromText(fileName,JavaLanguage.INSTANCE,textWithMarkers);
    this.jetFile=null;
    this.expectedText=this.clearText=textWithMarkers;
  }
 else {
    expectedText=textWithMarkers;
    clearText=CheckerTestUtil.parseDiagnosedRanges(expectedText,diagnosedRanges);
    this.jetFile=createCheckAndReturnPsiFile(null,fileName,clearText);
    for (    CheckerTestUtil.DiagnosedRange diagnosedRange : diagnosedRanges) {
      diagnosedRange.setFile(jetFile);
    }
  }
}
