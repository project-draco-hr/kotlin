{
  String testFileName=name + ".kt";
  String expectedText=loadFile(testFileName);
  List<TestFile> testFileFiles=createTestFiles(testFileName,expectedText);
  boolean importJdk=expectedText.contains("+JDK");
  List<JetDeclaration> namespaces=Lists.newArrayList();
  for (  TestFile testFileFile : testFileFiles) {
    namespaces.add(testFileFile.jetFile.getRootNamespace());
  }
  BindingContext bindingContext;
  if (importJdk) {
    bindingContext=AnalyzerFacade.analyzeNamespacesWithJavaIntegration(getProject(),namespaces,Predicates.<PsiFile>alwaysTrue(),JetControlFlowDataTraceFactory.EMPTY);
  }
 else {
    bindingContext=AnalyzingUtils.analyzeNamespaces(getProject(),Configuration.EMPTY,namespaces,Predicates.<PsiFile>alwaysTrue(),JetControlFlowDataTraceFactory.EMPTY);
  }
  StringBuilder actualText=new StringBuilder();
  for (  TestFile testFileFile : testFileFiles) {
    testFileFile.getActualText(bindingContext,actualText);
  }
  assertEquals(expectedText,actualText.toString());
}
