{
  if (expression == null) {
    return TypeInfoFactoryPackage.noTypeInfo(context);
  }
  if (isFunctionLiteralArgument(expression,context)) {
    return getFunctionLiteralTypeInfo(expression,getFunctionLiteralArgument(expression,context),context,resolveArgumentsMode);
  }
  JetTypeInfo recordedTypeInfo=getRecordedTypeInfo(expression,context.trace.getBindingContext());
  if (recordedTypeInfo != null) {
    return recordedTypeInfo;
  }
  ResolutionContext newContext=context.replaceExpectedType(NO_EXPECTED_TYPE).replaceContextDependency(DEPENDENT);
  return expressionTypingServices.getTypeInfo(expression,newContext);
}
