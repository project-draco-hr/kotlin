{
  if (type.equals(substitution.getForType())) {
    return substitution.getByType();
  }
  List<TypeProjection> newArguments=new ArrayList<TypeProjection>();
  for (  TypeProjection projection : type.getArguments()) {
    JetType newArgument=substituteType(projection.getType(),substitution);
    newArguments.add(new TypeProjection(Variance.INVARIANT,newArgument));
  }
  return new JetTypeImpl(type.getAnnotations(),type.getConstructor(),type.isNullable(),newArguments,type.getMemberScope());
}
