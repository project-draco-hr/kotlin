{
  JetType actualType=context.get(BindingContext.EXPRESSION_TYPE,expr);
  if (actualType != null) {
    return new JetType[]{actualType};
  }
  if (expr.getParent() instanceof JetVariableDeclaration) {
    JetVariableDeclaration variable=(JetVariableDeclaration)expr.getParent();
    JetTypeReference variableTypeRef=variable.getTypeRef();
    if (variableTypeRef != null) {
      return new JetType[]{context.get(BindingContext.TYPE,variableTypeRef)};
    }
 else {
      return new JetType[0];
    }
  }
  if (expr instanceof JetTypeConstraint) {
    JetTypeConstraint constraint=(JetTypeConstraint)expr;
    return new JetType[]{context.get(BindingContext.TYPE,constraint.getBoundTypeReference())};
  }
 else {
    PsiElement parent=expr.getParent();
    if (parent != null && parent instanceof JetTypeConstraint) {
      JetTypeConstraint constraint=(JetTypeConstraint)parent;
      return new JetType[]{context.get(BindingContext.TYPE,constraint.getBoundTypeReference())};
    }
  }
  return new JetType[0];
}
