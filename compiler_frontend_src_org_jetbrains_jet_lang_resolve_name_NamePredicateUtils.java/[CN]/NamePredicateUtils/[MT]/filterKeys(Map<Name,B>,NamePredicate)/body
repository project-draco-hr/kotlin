{
  Name exact=predicate.getExact();
  if (predicate.isAll()) {
    return map;
  }
 else   if (exact != null) {
    B value=map.get(exact);
    if (value != null) {
      return Collections.singletonMap(exact,value);
    }
 else {
      return Collections.emptyMap();
    }
  }
 else {
    Map<Name,B> r=Maps.newHashMap();
    for (    Map.Entry<Name,B> entry : map.entrySet()) {
      if (predicate.matches(entry.getKey())) {
        r.put(entry.getKey(),entry.getValue());
      }
    }
    return r;
  }
}
