{
  JetCoreEnvironment jetCoreEnvironment=JetTestUtils.createEnvironmentWithMockJdkAndIdeaAnnotations(getTestRootDisposable(),ConfigurationKind.ALL);
  String text=new CliAndroidUIXmlParser(jetCoreEnvironment.getProject(),singleFileDir.getAbsolutePath()).parseToString();
  JetFile psiFile=JetTestUtils.createFile("dummy.kt",text,jetCoreEnvironment.getProject());
  JetFile fakeActivity=JetTestUtils.loadJetFile(jetCoreEnvironment.getProject(),fakeActivitySrc);
  JetFile fakeView=JetTestUtils.loadJetFile(jetCoreEnvironment.getProject(),fakeViewSrc);
  JetFile fakeWidgets=JetTestUtils.loadJetFile(jetCoreEnvironment.getProject(),fakeWidgetsSrc);
  JetFile fakeRClass=JetTestUtils.loadJetFile(jetCoreEnvironment.getProject(),new File(getTestDataPath() + "/converter/singleFile/R.kt"));
  List<JetFile> files=new ArrayList<JetFile>();
  files.add(psiFile);
  files.add(fakeActivity);
  files.add(fakeView);
  files.add(fakeRClass);
  files.add(fakeWidgets);
  GenerationUtils.compileManyFilesGetGenerationStateForTest(jetCoreEnvironment.getProject(),files);
  Disposer.dispose(getTestRootDisposable());
}
