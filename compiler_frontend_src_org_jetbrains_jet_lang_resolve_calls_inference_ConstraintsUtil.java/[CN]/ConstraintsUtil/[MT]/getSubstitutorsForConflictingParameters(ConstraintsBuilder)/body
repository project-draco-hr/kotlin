{
  TypeParameterDescriptor firstConflictingParameter=getFirstConflictingParameter(constraintsBuilder);
  if (firstConflictingParameter == null)   return Collections.emptyList();
  Collection<JetType> conflictingTypes=constraintsBuilder.getTypeConstraints(firstConflictingParameter).getConflicts();
  ArrayList<Map<TypeConstructor,TypeProjection>> substitutionContexts=Lists.newArrayList();
  for (  JetType type : conflictingTypes) {
    Map<TypeConstructor,TypeProjection> context=Maps.newLinkedHashMap();
    context.put(firstConflictingParameter.getTypeConstructor(),new TypeProjection(type));
    substitutionContexts.add(context);
  }
  for (  TypeParameterDescriptor typeParameter : constraintsBuilder.getTypeParameters()) {
    if (typeParameter == firstConflictingParameter)     continue;
    JetType safeType=getSafeValue(constraintsBuilder,typeParameter);
    for (    Map<TypeConstructor,TypeProjection> context : substitutionContexts) {
      TypeProjection typeProjection=new TypeProjection(safeType);
      context.put(typeParameter.getTypeConstructor(),typeProjection);
    }
  }
  Collection<TypeSubstitutor> typeSubstitutors=Lists.newArrayList();
  for (  Map<TypeConstructor,TypeProjection> context : substitutionContexts) {
    typeSubstitutors.add(TypeSubstitutor.create(context));
  }
  return typeSubstitutors;
}
