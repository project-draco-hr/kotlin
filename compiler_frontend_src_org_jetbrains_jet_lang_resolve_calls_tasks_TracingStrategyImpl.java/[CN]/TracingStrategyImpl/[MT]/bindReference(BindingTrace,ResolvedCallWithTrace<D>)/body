{
  CallableDescriptor descriptor=resolvedCall.getResultingDescriptor();
  if (resolvedCall instanceof VariableAsFunctionResolvedCall) {
    descriptor=((VariableAsFunctionResolvedCall)resolvedCall).getVariableCall().getResultingDescriptor();
  }
  DeclarationDescriptor storedReference=trace.get(REFERENCE_TARGET,reference);
  if (storedReference == null || !ErrorUtils.isError(descriptor)) {
    trace.record(REFERENCE_TARGET,reference,descriptor);
  }
}
