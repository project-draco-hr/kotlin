{
  DeclarationDescriptor descriptor=resolvedCall.getCandidateDescriptor();
  if (resolvedCall instanceof VariableAsFunctionResolvedCall) {
    descriptor=((VariableAsFunctionResolvedCall)resolvedCall).getVariableCall().getCandidateDescriptor();
  }
  if (descriptor instanceof FakeCallableDescriptorForObject) {
    descriptor=((FakeCallableDescriptorForObject)descriptor).getReferencedDescriptor();
  }
  DeclarationDescriptor storedReference=trace.get(REFERENCE_TARGET,reference);
  if (storedReference == null || !ErrorUtils.isError(descriptor)) {
    trace.record(REFERENCE_TARGET,reference,descriptor);
  }
}
