{
switch (proto.getKind()) {
case CLASS:
    ClassDescriptor classDescriptor=classDescriptors.invoke(proto.getId());
  if (classDescriptor == null)   return null;
return classDescriptor.getTypeConstructor();
case TYPE_PARAMETER:
TypeParameterDescriptor descriptor=typeParameterDescriptors.get(proto.getId());
if (descriptor == null && parent != null) {
descriptor=parent.typeParameterDescriptors.get(proto.getId());
}
if (descriptor == null) return null;
return descriptor.getTypeConstructor();
}
throw new IllegalStateException("Unknown kind " + proto.getKind());
}
