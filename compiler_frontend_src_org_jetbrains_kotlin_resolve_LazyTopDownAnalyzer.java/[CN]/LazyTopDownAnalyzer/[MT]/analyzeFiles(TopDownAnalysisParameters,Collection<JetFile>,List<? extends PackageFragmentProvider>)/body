{
  if (!topDownAnalysisParameters.isLazy()) {
    return topDownAnalyzer.analyzeFiles(topDownAnalysisParameters,files,additionalProviders.toArray(new PackageFragmentProvider[additionalProviders.size()]));
  }
  PackageFragmentProvider provider;
  if (additionalProviders.isEmpty()) {
    provider=resolveSession.getPackageFragmentProvider();
  }
 else {
    provider=new CompositePackageFragmentProvider(KotlinPackage.plus(Arrays.asList(resolveSession.getPackageFragmentProvider()),additionalProviders));
  }
  ((ModuleDescriptorImpl)resolveSession.getModuleDescriptor()).initialize(provider);
  return analyzeDeclarations(topDownAnalysisParameters,files);
}
