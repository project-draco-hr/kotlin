{
  FileInputStream classInputStream=new FileInputStream(tmpdir + "/" + className.replace('.','/')+ ".class");
  try {
class Visitor extends EmptyVisitor {
      ActualSignature readSignature;
      @Override public MethodVisitor visitMethod(      int access,      String name,      final String desc,      final String signature,      String[] exceptions){
        if (name.equals(methodName)) {
          final int parameterCount=new Method(name,desc).getArgumentTypes().length;
          return new EmptyVisitor(){
            String typeParameters="";
            String returnType;
            String[] parameterTypes=new String[parameterCount];
            @Override public AnnotationVisitor visitAnnotation(            String desc,            boolean visible){
              if (desc.equals(JvmStdlibNames.JET_METHOD.getDescriptor())) {
                return new EmptyVisitor(){
                  @Override public void visit(                  String name,                  Object value){
                    if (name.equals(JvmStdlibNames.JET_METHOD_TYPE_PARAMETERS_FIELD)) {
                      typeParameters=(String)value;
                    }
 else                     if (name.equals(JvmStdlibNames.JET_METHOD_RETURN_TYPE_FIELD)) {
                      returnType=(String)value;
                    }
                  }
                  @Override public AnnotationVisitor visitAnnotation(                  String desc,                  boolean visible){
                    return new EmptyVisitor();
                  }
                  @Override public AnnotationVisitor visitArray(                  String name){
                    return new EmptyVisitor();
                  }
                }
;
              }
 else {
                return new EmptyVisitor();
              }
            }
            @Override public AnnotationVisitor visitParameterAnnotation(            final int parameter,            String desc,            boolean visible){
              if (desc.equals(JvmStdlibNames.JET_VALUE_PARAMETER.getDescriptor())) {
                return new EmptyVisitor(){
                  @Override public void visit(                  String name,                  Object value){
                    if (name.equals(JvmStdlibNames.JET_VALUE_PARAMETER_TYPE_FIELD)) {
                      parameterTypes[parameter]=(String)value;
                    }
                  }
                  @Override public AnnotationVisitor visitAnnotation(                  String desc,                  boolean visible){
                    return new EmptyVisitor();
                  }
                  @Override public AnnotationVisitor visitArray(                  String name){
                    return new EmptyVisitor();
                  }
                }
;
              }
 else {
                return new EmptyVisitor();
              }
            }
            @Override public AnnotationVisitor visitAnnotationDefault(){
              return new EmptyVisitor();
            }
            private String makeKotlinSignature(){
              StringBuilder sb=new StringBuilder();
              sb.append(typeParameters);
              sb.append("(");
              for (              String parameterType : parameterTypes) {
                sb.append(parameterType);
              }
              sb.append(")");
              sb.append(returnType);
              return sb.toString();
            }
            @Override public void visitEnd(){
              Assert.assertNull(readSignature);
              readSignature=new ActualSignature(desc,signature,makeKotlinSignature());
            }
          }
;
        }
        return super.visitMethod(access,name,desc,signature,exceptions);
      }
    }
    Visitor visitor=new Visitor();
    new ClassReader(classInputStream).accept(visitor,ClassReader.SKIP_CODE | ClassReader.SKIP_DEBUG | ClassReader.SKIP_FRAMES);
    Assert.assertNotNull("method not found: " + className + "::"+ methodName,visitor.readSignature);
    return visitor.readSignature;
  }
  finally {
    Closeables.closeQuietly(classInputStream);
  }
}
