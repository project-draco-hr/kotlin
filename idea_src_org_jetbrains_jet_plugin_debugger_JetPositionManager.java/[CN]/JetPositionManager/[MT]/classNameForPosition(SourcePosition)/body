{
  final Ref<String> result=Ref.create();
  ApplicationManager.getApplication().runReadAction(new Runnable(){
    @Override @SuppressWarnings("unchecked") public void run(){
      JetFile file=(JetFile)sourcePosition.getFile();
      JetTypeMapper typeMapper=prepareTypeMapper(file);
      result.set(getClassNameForElement(sourcePosition.getElementAt(),typeMapper,file));
    }
  }
);
  return result.get();
}
