{
  final JetTypeMapper mapper=myTypeMappers.get(file);
  if (mapper != null) {
    return mapper;
  }
  final BindingContext bindingContext=WholeProjectAnalyzerFacade.analyzeProjectWithCacheOnAFile(file);
  final JetStandardLibrary standardLibrary=JetStandardLibrary.getInstance();
  ClosureAnnotator closureAnnotator=new ClosureAnnotator(bindingContext,Collections.singleton(file));
  final JetTypeMapper typeMapper=new JetTypeMapper(standardLibrary,bindingContext,closureAnnotator);
  myTypeMappers.put(file,typeMapper);
  return typeMapper;
}
