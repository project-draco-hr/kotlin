{
  JetElement element=getElementToCreateTypeMapperForLibraryFile(position.getElementAt());
  ResolveSessionForBodies resolveSession=ResolvePackage.getLazyResolveSession(element);
  JetFile file=(JetFile)position.getFile();
  GenerationState state=new GenerationState(file.getProject(),ClassBuilderFactories.THROW_EXCEPTION,resolveSession.getModuleDescriptor(),resolveSession.resolveToElement(element),Collections.singletonList(file));
  state.beforeCompile();
  return state.getTypeMapper();
}
