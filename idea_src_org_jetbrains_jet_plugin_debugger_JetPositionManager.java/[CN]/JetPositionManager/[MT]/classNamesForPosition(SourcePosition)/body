{
  final Collection<String> names=new ArrayList<String>();
  ApplicationManager.getApplication().runReadAction(new Runnable(){
    @Override public void run(){
      final JetFile file=(JetFile)sourcePosition.getFile();
      JetTypeMapper typeMapper=prepareTypeMapper(file);
      JetClassOrObject jetClass=PsiTreeUtil.getParentOfType(sourcePosition.getElementAt(),JetClassOrObject.class);
      if (jetClass != null) {
        names.addAll(typeMapper.allJvmNames(jetClass));
      }
 else {
        JetFile namespace=PsiTreeUtil.getParentOfType(sourcePosition.getElementAt(),JetFile.class);
        if (namespace != null) {
          names.add(NamespaceCodegen.getJVMClassName(JetPsiUtil.getFQName(namespace),true));
        }
 else {
          names.add(NamespaceCodegen.getJVMClassName(JetPsiUtil.getFQName(file),true));
        }
      }
    }
  }
);
  return names;
}
