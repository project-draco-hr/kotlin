{
  JetElement element=getElementToCreateTypeMapperForLibraryFile(notPositionedElement);
  AnalysisResult analysisResult=ResolvePackage.analyzeAndGetResult(element);
  GenerationState state=new GenerationState(file.getProject(),ClassBuilderFactories.THROW_EXCEPTION,analysisResult.getModuleDescriptor(),analysisResult.getBindingContext(),Collections.singletonList(file));
  state.beforeCompile();
  return state.getTypeMapper();
}
