{
  JetElement element=getElementToCreateTypeMapperForLibraryFile(notPositionedElement);
  ResolutionFacade resolveSession=ResolvePackage.getLazyResolveSession(element);
  GenerationState state=new GenerationState(file.getProject(),ClassBuilderFactories.THROW_EXCEPTION,resolveSession.findModuleDescriptor(element),resolveSession.analyze(element),Collections.singletonList(file));
  state.beforeCompile();
  return state.getTypeMapper();
}
