{
  if (PsiUtilBase.getLanguageAtOffset(file,offset).isKindOf(JetLanguage.INSTANCE)) {
    PsiElement element=file.findElementAt(offset);
    if (element instanceof PsiWhiteSpace || element instanceof PsiComment) {
      return false;
    }
 else     if (PsiTreeUtil.getParentOfType(element,JetNamespaceHeader.class) != null || PsiTreeUtil.getParentOfType(element,JetImportDirective.class) != null) {
      return false;
    }
 else     if (element instanceof LeafPsiElement) {
      IElementType elementType=((LeafPsiElement)element).getElementType();
      if (elementType == JetTokens.IDENTIFIER && !(element.getParent() instanceof JetReferenceExpression)) {
        return false;
      }
    }
    return element != null && isInContext(element);
  }
  return false;
}
