{
  if (!visited.add(current.getConstructor())) {
    return;
  }
  handler.beforeChildren(current);
  Map<TypeConstructor,TypeProjection> substitutionContext=getSubstitutionContext(current);
  for (  Type supertype : current.getConstructor().getSupertypes()) {
    TypeConstructor supertypeConstructor=supertype.getConstructor();
    if (visited.contains(supertypeConstructor)) {
      continue;
    }
    Type substitutedSupertype=substituteInType(substitutionContext,supertype);
    dfs(substitutedSupertype,visited,handler);
  }
  handler.afterChildren(current);
}
