{
  ProjectionKind projectionKind=subject.getProjectionKind();
  if (projectionKind == ProjectionKind.NEITHER_OUT_NOR_IN) {
    return subject;
  }
  @NotNull Type subjectType=subject.getType();
  TypeProjection value=parameterValues.get(subjectType.getConstructor());
  if (value != null) {
    return value;
  }
  List<TypeProjection> newArguments=substituteInArguments(parameterValues,subjectType);
  return new TypeProjection(projectionKind,specializeType(subjectType,newArguments));
}
