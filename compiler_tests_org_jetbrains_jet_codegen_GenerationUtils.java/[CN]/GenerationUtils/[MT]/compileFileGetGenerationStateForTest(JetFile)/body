{
  final AnalyzeExhaust analyzeExhaust=AnalyzerFacadeForJVM.analyzeOneFileWithJavaIntegrationAndCheckForErrors(psiFile,Collections.<AnalyzerScriptParameter>emptyList(),BuiltinsScopeExtensionMode.ALL);
  analyzeExhaust.throwIfError();
  GenerationState state=new GenerationState(psiFile.getProject(),ClassBuilderFactories.binaries(false),analyzeExhaust,Collections.singletonList(psiFile));
  state.compileCorrectFiles(CompilationErrorHandler.THROW_EXCEPTION);
  return state;
}
