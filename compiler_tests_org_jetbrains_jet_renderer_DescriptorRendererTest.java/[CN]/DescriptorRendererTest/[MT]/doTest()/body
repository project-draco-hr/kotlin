{
  String fileName=getTestName(false) + ".kt";
  JetFile psiFile=createPsiFile(null,fileName,loadFile(fileName));
  AnalyzeExhaust analyzeExhaust=JvmResolveUtil.analyzeOneFileWithJavaIntegration(psiFile);
  final BindingContext bindingContext=analyzeExhaust.getBindingContext();
  final List<DeclarationDescriptor> descriptors=new ArrayList<DeclarationDescriptor>();
  FqName fqName=psiFile.getPackageFqName();
  if (!fqName.isRoot()) {
    PackageViewDescriptor packageDescriptor=analyzeExhaust.getModuleDescriptor().getPackage(fqName);
    descriptors.add(packageDescriptor);
  }
  psiFile.acceptChildren(new JetVisitorVoid(){
    @Override public void visitJetElement(    @NotNull JetElement element){
      DeclarationDescriptor descriptor=bindingContext.get(BindingContext.DECLARATION_TO_DESCRIPTOR,element);
      if (descriptor != null) {
        descriptors.add(descriptor);
        if (descriptor instanceof ClassDescriptor) {
          descriptors.addAll(((ClassDescriptor)descriptor).getConstructors());
        }
      }
      element.acceptChildren(this);
    }
  }
);
  StringBuilder renderedDescriptors=new StringBuilder();
  for (  DeclarationDescriptor descriptor : descriptors) {
    if (renderedDescriptors.length() != 0) {
      renderedDescriptors.append("\n");
    }
    renderedDescriptors.append(DescriptorRenderer.FQ_NAMES_IN_TYPES.render(descriptor));
  }
  Document document=new DocumentImpl(psiFile.getText());
  assertSameLines(JetTestUtils.getLastCommentedLines(document),renderedDescriptors.toString());
}
