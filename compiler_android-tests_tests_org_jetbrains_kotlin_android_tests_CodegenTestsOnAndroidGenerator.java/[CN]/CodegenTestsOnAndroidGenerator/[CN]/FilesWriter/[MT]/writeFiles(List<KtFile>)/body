{
  if (filesToCompile.isEmpty())   return;
  System.out.println("Generating " + filesToCompile.size() + " files"+ (inheritMultifileParts ? " (JVM.INHERIT_MULTIFILE_PARTS)" : isFullJdkAndRuntime ? " (full jdk and runtime)" : "")+ "...");
  OutputFileCollection outputFiles;
  try {
    outputFiles=GenerationUtils.compileManyFilesGetGenerationStateForTest(filesToCompile.iterator().next().getProject(),filesToCompile,new JvmPackagePartProvider(environment),environment.getConfiguration()).getFactory();
  }
 catch (  Throwable e) {
    throw new RuntimeException(e);
  }
  File outputDir=new File(pathManager.getOutputForCompiledFiles());
  if (!outputDir.exists()) {
    outputDir.mkdirs();
  }
  Assert.assertTrue("Cannot create directory for compiled files",outputDir.exists());
  OutputUtilsKt.writeAllTo(outputFiles,outputDir);
}
