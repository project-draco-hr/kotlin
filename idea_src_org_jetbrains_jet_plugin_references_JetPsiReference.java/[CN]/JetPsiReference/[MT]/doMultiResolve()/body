{
  JetFile file=(JetFile)getElement().getContainingFile();
  BindingContext bindingContext=AnalyzerFacadeWithCache.analyzeFileWithCache(file).getBindingContext();
  Collection<? extends DeclarationDescriptor> declarationDescriptors=bindingContext.get(AMBIGUOUS_REFERENCE_TARGET,myExpression);
  if (declarationDescriptors == null) {
    List<PsiElement> psiElements=BindingContextUtils.resolveToDeclarationPsiElements(bindingContext,myExpression);
    if (psiElements.size() > 1) {
      return PsiElementResolveResult.createResults(psiElements);
    }
    Collection<? extends PsiElement> labelTargets=bindingContext.get(AMBIGUOUS_LABEL_TARGET,myExpression);
    if (labelTargets != null && !labelTargets.isEmpty()) {
      return PsiElementResolveResult.createResults(labelTargets);
    }
    Collection<PsiElement> standardLibraryElements=resolveStandardLibrarySymbol(bindingContext);
    if (standardLibraryElements.size() > 1) {
      return PsiElementResolveResult.createResults(standardLibraryElements);
    }
    return ResolveResult.EMPTY_ARRAY;
  }
  List<ResolveResult> results=new ArrayList<ResolveResult>(declarationDescriptors.size());
  for (  DeclarationDescriptor descriptor : declarationDescriptors) {
    List<PsiElement> elements=BindingContextUtils.descriptorToDeclarations(bindingContext,descriptor);
    for (    PsiElement element : elements) {
      results.add(new PsiElementResolveResult(element,true));
    }
  }
  return results.toArray(new ResolveResult[results.size()]);
}
