{
  JetDeclaration declaration=getValue();
  if (declaration != null) {
    String text=declaration instanceof JetClassInitializer ? CLASS_INITIALIZER : declaration.getName();
    if (text == null)     return;
    JetCodeStyleSettings settings=CodeStyleSettingsManager.getInstance(getProject()).getCurrentSettings().getCustomSettings(JetCodeStyleSettings.class);
    if (declaration instanceof JetProperty) {
      JetProperty property=(JetProperty)declaration;
      JetTypeReference ref=property.getTypeReference();
      if (ref != null) {
        if (settings.SPACE_BEFORE_TYPE_COLON)         text+=" ";
        text+=":";
        if (settings.SPACE_AFTER_TYPE_COLON)         text+=" ";
        text+=ref.getText();
      }
    }
 else     if (declaration instanceof JetFunction) {
      JetFunction function=(JetFunction)declaration;
      JetTypeReference receiverTypeRef=function.getReceiverTypeReference();
      if (receiverTypeRef != null) {
        text=receiverTypeRef.getText() + "." + text;
      }
      text+="(";
      List<JetParameter> parameters=function.getValueParameters();
      for (      JetParameter parameter : parameters) {
        if (parameter.getName() != null) {
          text+=parameter.getName();
          if (settings.SPACE_BEFORE_TYPE_COLON)           text+=" ";
          text+=":";
          if (settings.SPACE_AFTER_TYPE_COLON)           text+=" ";
        }
        JetTypeReference typeReference=parameter.getTypeReference();
        if (typeReference != null) {
          text+=typeReference.getText();
        }
        text+=", ";
      }
      if (parameters.size() > 0)       text=text.substring(0,text.length() - 2);
      text+=")";
      JetTypeReference typeReference=function.getTypeReference();
      if (typeReference != null) {
        if (settings.SPACE_BEFORE_TYPE_COLON)         text+=" ";
        text+=":";
        if (settings.SPACE_AFTER_TYPE_COLON)         text+=" ";
        text+=typeReference.getText();
      }
    }
    data.setPresentableText(text);
  }
}
