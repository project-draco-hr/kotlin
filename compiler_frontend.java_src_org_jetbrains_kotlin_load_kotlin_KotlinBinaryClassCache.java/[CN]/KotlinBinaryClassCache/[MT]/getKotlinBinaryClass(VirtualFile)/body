{
  if (file.getFileType() != JavaClassFileType.INSTANCE)   return null;
  KotlinBinaryClassCache service=ServiceManager.getService(KotlinBinaryClassCache.class);
  RequestCache requestCache=service.cache.get();
  if (file.getModificationStamp() == requestCache.modificationStamp && file.equals(requestCache.virtualFile)) {
    return requestCache.virtualFileKotlinClass;
  }
 else {
    VirtualFileKotlinClass aClass=ApplicationManager.getApplication().runReadAction(new Computable<VirtualFileKotlinClass>(){
      @Override public VirtualFileKotlinClass compute(){
        return VirtualFileKotlinClass.Factory.create(file);
      }
    }
);
    return requestCache.cache(file,aClass);
  }
}
