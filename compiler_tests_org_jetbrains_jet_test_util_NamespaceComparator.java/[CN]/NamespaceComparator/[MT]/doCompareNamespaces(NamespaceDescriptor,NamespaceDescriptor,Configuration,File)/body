{
  NamespaceComparator comparator=new NamespaceComparator(configuration);
  String actualSerialized=comparator.serializeRecursively(actualNamespace);
  if (expectedNamespace != null) {
    String expectedSerialized=comparator.serializeRecursively(expectedNamespace);
    Assert.assertEquals("Expected and actual namespaces differ",expectedSerialized,actualSerialized);
  }
  if (txtFile != null) {
    try {
      if (!txtFile.exists()) {
        FileUtil.writeToFile(txtFile,actualSerialized);
        Assert.fail("Expected data file did not exist. Generating: " + txtFile);
      }
      String expected=FileUtil.loadFile(txtFile,true);
      Assert.assertEquals("Expected and actual namespaces differ from " + txtFile.getName(),expected,actualSerialized);
    }
 catch (    IOException e) {
      throw new RuntimeException(e);
    }
  }
}
