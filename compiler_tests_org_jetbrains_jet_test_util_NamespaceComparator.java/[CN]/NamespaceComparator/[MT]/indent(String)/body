{
  String indent="    ";
  StringBuilder r=new StringBuilder(string.length());
  r.append(indent);
  boolean lastCharIsNewLine=false;
  for (int i=0; i < string.length(); i++) {
    char c=string.charAt(i);
    r.append(c);
    if (c == '\n') {
      if (i != string.length() - 1) {
        r.append(indent);
      }
 else {
        lastCharIsNewLine=true;
      }
    }
  }
  if (!lastCharIsNewLine) {
    r.append("\n");
  }
  return r.toString();
}
