{
  if (fileIndex.isInSourceContent(file)) {
    return !JetModuleTypeManager.getInstance().isKtFileInGradleProjectInWrongFolder(file,project);
  }
  if (!withLibraries)   return false;
  return (withClassesRoots && fileIndex.isInLibraryClasses(file)) || fileIndex.isInLibrarySource(file);
}
