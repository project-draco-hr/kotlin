{
  PsiElement element=findElementOfClassAtRange(file,startOffset,endOffset,JetExpression.class);
  if (element == null)   return null;
  if (element instanceof JetOperationReferenceExpression && ((JetOperationReferenceExpression)element).getReferencedNameElementType() != JetTokens.IDENTIFIER && element.getParent() instanceof JetBinaryExpression) {
    return null;
  }
  if (JetPsiUtil.isLabelIdentifierExpression(element)) {
    element=PsiTreeUtil.getParentOfType(element,JetExpression.class);
  }
  if (element instanceof JetBlockExpression) {
    List<JetExpression> statements=((JetBlockExpression)element).getStatements();
    if (statements.size() == 1) {
      JetExpression statement=statements.get(0);
      if (statement.getText().equals(element.getText())) {
        return statement;
      }
    }
  }
  return (JetExpression)element;
}
