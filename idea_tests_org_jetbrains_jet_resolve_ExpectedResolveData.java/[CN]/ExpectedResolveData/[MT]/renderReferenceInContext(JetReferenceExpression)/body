{
  JetExpression statement=referenceExpression;
  while (true) {
    PsiElement parent=statement.getParent();
    if (!(parent instanceof JetExpression))     break;
    if (parent instanceof JetBlockExpression)     break;
    statement=(JetExpression)parent;
  }
  JetDeclaration declaration=PsiTreeUtil.getParentOfType(referenceExpression,JetDeclaration.class);
  return referenceExpression.getText() + " at " + DiagnosticUtils.atLocation(referenceExpression)+ " in "+ statement.getText()+ (declaration == null ? "" : " in " + declaration.getText());
}
