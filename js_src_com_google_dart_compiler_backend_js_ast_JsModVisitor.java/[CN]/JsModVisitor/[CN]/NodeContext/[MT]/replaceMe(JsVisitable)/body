{
  if (replaced) {
    throw new RuntimeException("Node was already replaced");
  }
  checkReplacement(this.node,node);
  this.node=Hack.<T>cast(node);
  didChange=replaced=true;
}
