{
  NamespaceDescriptorImpl namespaceDescriptor=owner.getNamespace(name);
  if (namespaceDescriptor == null) {
    namespaceDescriptor=new NamespaceDescriptorImpl(owner.getOriginal(),Collections.<AnnotationDescriptor>emptyList(),name);
    context.getTrace().record(FQNAME_TO_NAMESPACE_DESCRIPTOR,DescriptorUtils.getFQName(namespaceDescriptor),namespaceDescriptor);
    WritableScopeImpl scope=new WritableScopeImpl(JetScope.EMPTY,namespaceDescriptor,new TraceBasedRedeclarationHandler(context.getTrace())).setDebugName("Namespace member scope");
    scope.changeLockLevel(WritableScope.LockLevel.BOTH);
    namespaceDescriptor.initialize(scope);
    configuration.extendNamespaceScope(context.getTrace(),namespaceDescriptor,scope);
    owner.addNamespace(namespaceDescriptor);
    if (file != null) {
      context.getTrace().record(BindingContext.NAMESPACE,file,namespaceDescriptor);
    }
  }
  if (file != null) {
    context.getTrace().record(BindingContext.FILE_TO_NAMESPACE,file,namespaceDescriptor);
  }
  return namespaceDescriptor;
}
