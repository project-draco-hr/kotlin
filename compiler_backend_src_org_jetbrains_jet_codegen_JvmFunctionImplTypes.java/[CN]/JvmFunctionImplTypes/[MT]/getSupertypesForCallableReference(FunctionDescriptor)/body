{
  ReceiverParameterDescriptor receiverParameter=descriptor.getReceiverParameter();
  ReceiverParameterDescriptor expectedThisObject=descriptor.getExpectedThisObject();
  List<TypeProjection> typeArguments=new ArrayList<TypeProjection>(2);
  ClassDescriptor classDescriptor;
  JetType receiverType;
  if (receiverParameter != null) {
    classDescriptor=kExtensionFunctionImpl;
    receiverType=receiverParameter.getType();
    typeArguments.add(new TypeProjectionImpl(receiverType));
  }
 else   if (expectedThisObject != null) {
    classDescriptor=kMemberFunctionImpl;
    receiverType=expectedThisObject.getType();
    typeArguments.add(new TypeProjectionImpl(receiverType));
  }
 else {
    classDescriptor=kFunctionImpl;
    receiverType=null;
  }
  typeArguments.add(new TypeProjectionImpl(descriptor.getReturnType()));
  JetType kFunctionImplType=new JetTypeImpl(classDescriptor.getDefaultType().getAnnotations(),classDescriptor.getTypeConstructor(),false,typeArguments,classDescriptor.getMemberScope(typeArguments));
  JetType kFunctionType=reflectionTypes.getKFunctionType(Annotations.EMPTY,receiverType,DescriptorUtils.getValueParametersTypes(descriptor.getValueParameters()),descriptor.getReturnType(),receiverParameter != null);
  return Arrays.asList(kFunctionImplType,kFunctionType);
}
