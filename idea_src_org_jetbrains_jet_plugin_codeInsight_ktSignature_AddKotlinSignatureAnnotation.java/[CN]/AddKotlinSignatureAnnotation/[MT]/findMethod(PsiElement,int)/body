{
  PsiElement element=file.findElementAt(offset);
  PsiMethod res=PsiTreeUtil.getParentOfType(element,PsiMethod.class);
  if (res == null)   return null;
  PsiCodeBlock body=res.getBody();
  if (body != null) {
    TextRange bodyRange=body.getTextRange();
    if (bodyRange != null && bodyRange.getStartOffset() <= offset) {
      return null;
    }
  }
  return res;
}
