{
  String returnTypeFromAnnotation=method.getJetMethod().returnType();
  JetType transformedType;
  if (returnTypeFromAnnotation.length() > 0) {
    transformedType=semanticServices.getTypeTransformer().transformToType(returnTypeFromAnnotation,typeVariableResolver);
  }
 else {
    transformedType=semanticServices.getTypeTransformer().transformToType(returnType,typeVariableResolver);
  }
  if (method.getJetMethod().returnTypeNullable()) {
    return TypeUtils.makeNullableAsSpecified(transformedType,true);
  }
 else   if (method.getPsiMethod().getModifierList().findAnnotation(JvmAbi.JETBRAINS_NOT_NULL_ANNOTATION.getFqName()) != null) {
    return TypeUtils.makeNullableAsSpecified(transformedType,false);
  }
 else {
    return transformedType;
  }
}
