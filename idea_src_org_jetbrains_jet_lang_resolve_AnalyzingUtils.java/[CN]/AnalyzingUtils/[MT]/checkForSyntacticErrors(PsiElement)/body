{
  root.acceptChildren(new PsiElementVisitor(){
    @Override public void visitElement(    PsiElement element){
      element.acceptChildren(this);
    }
    @Override public void visitErrorElement(    PsiErrorElement element){
      throw new IllegalArgumentException(element.getErrorDescription() + " at offset " + element.getTextRange().getStartOffset());
    }
  }
);
}
