{
  PsiElement parent=element.getParent();
  if (parent instanceof JetFile) {
    JetFile file=(JetFile)parent;
    return getInjector().getScopeProvider().getFileScopeForDeclarationResolution(file);
  }
  if (parent instanceof JetClassBody) {
    return getEnclosingLazyClass(element).getScopeForMemberDeclarationResolution();
  }
  if (parent instanceof JetClassObject) {
    return new InnerClassesScopeWrapper(getEnclosingLazyClass(element).getScopeForMemberDeclarationResolution());
  }
  throw new IllegalArgumentException("Unsupported PSI element: " + element);
}
