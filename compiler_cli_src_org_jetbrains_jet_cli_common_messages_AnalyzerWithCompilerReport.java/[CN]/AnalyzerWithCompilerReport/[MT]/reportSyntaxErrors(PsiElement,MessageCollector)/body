{
class ErrorReportingVisitor extends AnalyzingUtils.PsiErrorElementVisitor {
    boolean hasErrors=false;
    @Override public void visitErrorElement(    PsiErrorElement element){
      String description=element.getErrorDescription();
      String message=StringUtil.isEmpty(description) ? "Syntax error" : description;
      Diagnostic diagnostic=new SyntaxErrorDiagnostic(element,Severity.ERROR,message);
      reportDiagnostic(diagnostic,messageCollector);
      hasErrors=true;
    }
  }
  ErrorReportingVisitor visitor=new ErrorReportingVisitor();
  file.accept(visitor);
  return visitor.hasErrors;
}
