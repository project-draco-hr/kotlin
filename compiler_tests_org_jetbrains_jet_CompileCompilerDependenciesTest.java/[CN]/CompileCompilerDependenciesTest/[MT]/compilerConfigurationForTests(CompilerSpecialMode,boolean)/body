{
  List<File> classpath=new ArrayList<File>();
  if (compilerSpecialMode.includeJdk()) {
    classpath.add(mockJdk ? JetTestUtils.findMockJdkRtJar() : CompilerDependencies.findRtJar());
  }
  if (compilerSpecialMode.includeKotlinRuntime()) {
    classpath.add(ForTestCompileRuntime.runtimeJarForTests());
  }
  File[] annotationsPath=new File[0];
  if (compilerSpecialMode.includeJdkAnnotations()) {
    annotationsPath=new File[]{ForTestPackJdkAnnotations.jdkAnnotationsForTests()};
  }
  CompilerConfiguration configuration=new CompilerConfiguration();
  configuration.putUserData(JVMConfigurationKeys.CLASSPATH_KEY,classpath.toArray(new File[classpath.size()]));
  configuration.putUserData(JVMConfigurationKeys.ANNOTATIONS_PATH_KEY,annotationsPath);
  return configuration;
}
