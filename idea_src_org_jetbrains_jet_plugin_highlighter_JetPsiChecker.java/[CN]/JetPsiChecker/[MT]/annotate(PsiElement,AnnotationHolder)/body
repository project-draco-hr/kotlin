{
  element.accept(new SoftKeywordsHighlightingVisitor(holder));
  element.accept(new LabelsHighlightingVisitor(holder));
  if (element instanceof JetFile) {
    JetFile file=(JetFile)element;
    try {
      BindingContext bindingContext=WholeProjectAnalyzerFacade.analyzeProjectWithCacheOnAFile(file);
      if (errorReportingEnabled) {
        Collection<Diagnostic> diagnostics=Sets.newLinkedHashSet(bindingContext.getDiagnostics());
        Set<PsiElement> redeclarations=Sets.newHashSet();
        for (        Diagnostic diagnostic : diagnostics) {
          if (diagnostic.getPsiFile() != file)           continue;
          registerDiagnosticAnnotations(diagnostic,redeclarations,holder);
        }
      }
      file.acceptChildren(new BackingFieldHighlightingVisitor(holder,bindingContext));
      file.acceptChildren(new VariablesHighlightingVisitor(holder,bindingContext));
    }
 catch (    ProcessCanceledException e) {
      throw e;
    }
catch (    AssertionError e) {
      holder.createErrorAnnotation(element,e.getClass().getCanonicalName() + ": " + e.getMessage());
      throw e;
    }
catch (    Throwable e) {
      holder.createErrorAnnotation(element,e.getClass().getCanonicalName() + ": " + e.getMessage());
      e.printStackTrace();
    }
  }
}
