{
  CompletionResultSet tempResult=result.withPrefixMatcher(CompletionUtil.findReferenceOrAlphanumericPrefix(parameters));
  JavaClassNameCompletionContributor.addAllClasses(parameters,JavaCompletionSorting.addJavaSorting(parameters,tempResult),parameters.getInvocationCount() <= 2,new Consumer<LookupElement>(){
    @Override public void consume(    @NotNull LookupElement element){
      if (element instanceof JavaPsiClassReferenceElement) {
        JavaPsiClassReferenceElement javaPsiReferenceElement=(JavaPsiClassReferenceElement)element;
        javaPsiReferenceElement.setInsertHandler(JetJavaClassInsertHandler.JAVA_CLASS_INSERT_HANDLER);
      }
      addCompletionToResult(result,element,positions,parameters.getPosition().getProject());
    }
  }
);
}
