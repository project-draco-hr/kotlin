{
  String actualPrefix=result.getPrefixMatcher().getPrefix();
  Project project=position.getProject();
  JetShortNamesCache namesCache=JetCacheManager.getInstance(position.getProject()).getNamesCache();
  GlobalSearchScope scope=GlobalSearchScope.allScope(project);
  Collection<String> functionNames=namesCache.getAllTopLevelFunctionNames();
  BindingContext resolutionContext=WholeProjectAnalyzerFacade.analyzeProjectWithCacheOnAFile((JetFile)position.getContainingFile()).getBindingContext();
  for (  String name : functionNames) {
    if (name.contains(actualPrefix)) {
      for (      FunctionDescriptor function : namesCache.getTopLevelFunctionDescriptorsByName(name,expression,scope)) {
        addCompletionToResult(result,DescriptorLookupConverter.createLookupElement(resolutionContext,function),session);
      }
    }
  }
}
