{
  String actualPrefix=getActualCompletionPrefix(position);
  if (actualPrefix != null) {
    final Project project=position.getProject();
    final JetShortNamesCache namesCache=JetCacheManager.getInstance(position.getProject()).getNamesCache();
    final GlobalSearchScope scope=GlobalSearchScope.allScope(project);
    final Collection<String> functionNames=namesCache.getAllTopLevelFunctionNames();
    for (    String name : functionNames) {
      if (name.contains(actualPrefix)) {
        for (        FunctionDescriptor function : namesCache.getTopLevelFunctionDescriptorsByName(name,scope)) {
          addCompletionToResult(result,DescriptorLookupConverter.createLookupElement(null,function,null));
        }
      }
    }
  }
}
