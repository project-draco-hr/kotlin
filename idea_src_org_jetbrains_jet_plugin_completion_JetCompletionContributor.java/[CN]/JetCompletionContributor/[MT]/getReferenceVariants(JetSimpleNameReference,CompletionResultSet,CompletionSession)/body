{
  Collection<DeclarationDescriptor> descriptors=TipsManager.getReferenceVariants(reference.getExpression(),session.expressionBindingContext);
  Collection<DeclarationDescriptor> checkedDescriptors=Collections2.filter(descriptors,new Predicate<DeclarationDescriptor>(){
    @Override public boolean apply(    @Nullable DeclarationDescriptor descriptor){
      if (descriptor == null) {
        return false;
      }
      return result.getPrefixMatcher().prefixMatches(descriptor.getName().getName()) && isVisibleDescriptor(descriptor,session);
    }
  }
);
  return DescriptorLookupConverter.collectLookupElements(session.expressionBindingContext,checkedDescriptors);
}
