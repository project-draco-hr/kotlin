{
  BindingContext bindingContext=WholeProjectAnalyzerFacade.analyzeProjectWithCacheOnAFile((JetFile)reference.getExpression().getContainingFile()).getBindingContext();
class PrefixMatcherNamePredicate extends NamePredicate {
    @Override public boolean matches(    @NotNull Name name){
      return result.getPrefixMatcher().prefixMatches(name.getName());
    }
  }
  Collection<DeclarationDescriptor> descriptors=TipsManager.getReferenceVariants(reference.getExpression(),bindingContext,new PrefixMatcherNamePredicate());
  Collection<DeclarationDescriptor> checkedDescriptors=Collections2.filter(descriptors,new Predicate<DeclarationDescriptor>(){
    @Override public boolean apply(    @Nullable DeclarationDescriptor descriptor){
      if (descriptor == null) {
        return false;
      }
      return isVisibleDescriptor(descriptor,session);
    }
  }
);
  return DescriptorLookupConverter.collectLookupElements(bindingContext,checkedDescriptors);
}
