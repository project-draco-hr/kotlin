{
  String testFileName=FileUtil.getNameWithoutExtension(testFileNameWithExtension);
  String originalFileText=FileUtil.loadFile(new File(testFileName + ".kt"),true);
  SettingsConfigurator configurator=JetFormatSettingsUtil.createConfigurator(originalFileText,JetFormatSettingsUtil.getSettings());
  configurator.configureSettings();
  doTextTest(originalFileText,new File(testFileName + ".after.kt"));
  String afterInvertedFileName=testFileName + ".after.inv.kt";
  if (new File(afterInvertedFileName).exists()) {
    configurator.configureInvertedSettings();
    doTextTest(originalFileText,new File(afterInvertedFileName));
  }
  JetFormatSettingsUtil.getSettings().clearCodeStyleSettings();
}
