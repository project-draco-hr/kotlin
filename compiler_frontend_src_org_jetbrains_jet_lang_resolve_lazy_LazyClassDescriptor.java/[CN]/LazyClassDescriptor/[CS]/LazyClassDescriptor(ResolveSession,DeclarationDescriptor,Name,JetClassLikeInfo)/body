{
  this.resolveSession=resolveSession;
  if (classLikeInfo.getCorrespondingClassOrObject() != null) {
    this.resolveSession.getTrace().record(BindingContext.CLASS,classLikeInfo.getCorrespondingClassOrObject(),this);
  }
  this.originalClassInfo=classLikeInfo;
  JetClassLikeInfo classLikeInfoForMembers=classLikeInfo.getClassKind() != ClassKind.ENUM_CLASS ? classLikeInfo : noEnumEntries(classLikeInfo);
  this.declarationProvider=resolveSession.getDeclarationProviderFactory().getClassMemberDeclarationProvider(classLikeInfoForMembers);
  this.name=name;
  this.containingDeclaration=containingDeclaration;
  this.unsubstitutedMemberScope=new LazyClassMemberScope(resolveSession,declarationProvider,this);
  this.unsubstitutedInnerClassesScope=new InnerClassesScopeWrapper(unsubstitutedMemberScope);
  this.typeConstructor=new LazyClassTypeConstructor();
  this.kind=classLikeInfo.getClassKind();
  if (kind == ClassKind.OBJECT) {
    this.modality=Modality.FINAL;
  }
 else {
    Modality defaultModality=kind == ClassKind.TRAIT ? Modality.ABSTRACT : Modality.FINAL;
    JetModifierList modifierList=classLikeInfo.getModifierList();
    this.modality=DescriptorResolver.resolveModalityFromModifiers(modifierList,defaultModality);
  }
  JetModifierList modifierList=classLikeInfo.getModifierList();
  this.visibility=DescriptorResolver.resolveVisibilityFromModifiers(modifierList,Visibilities.INTERNAL);
}
