{
  createEnvironmentWithMockJdkAndIdeaAnnotations(ConfigurationKind.ALL,getJavaFilesDir());
  loadMultiFiles(files);
  if (isMultiFileTest(files)) {
    doTestMultiFile(files);
  }
 else {
    List<OccurrenceInfo> expected=readExpectedOccurrences(file.getPath());
    String actual=generateToText();
    checkGeneratedTextAgainstExpectedOccurrences(actual,expected);
  }
}
