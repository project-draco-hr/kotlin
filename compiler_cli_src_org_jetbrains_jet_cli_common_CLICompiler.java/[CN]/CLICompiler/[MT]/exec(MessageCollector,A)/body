{
  GroupingMessageCollector groupingCollector=new GroupingMessageCollector(messageCollector);
  try {
    Disposable rootDisposable=Disposer.newDisposable();
    try {
      MessageSeverityCollector severityCollector=new MessageSeverityCollector(groupingCollector);
      ExitCode code=doExecute(arguments,severityCollector,rootDisposable);
      return severityCollector.anyReported(CompilerMessageSeverity.ERROR) ? COMPILATION_ERROR : code;
    }
  finally {
      Disposer.dispose(rootDisposable);
    }
  }
 catch (  Throwable t) {
    groupingCollector.report(CompilerMessageSeverity.EXCEPTION,OutputMessageUtil.renderException(t),CompilerMessageLocation.NO_LOCATION);
    return INTERNAL_ERROR;
  }
 finally {
    groupingCollector.flush();
  }
}
