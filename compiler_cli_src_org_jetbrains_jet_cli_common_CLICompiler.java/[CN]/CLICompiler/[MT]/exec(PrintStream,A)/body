{
  if (arguments.isHelp()) {
    usage(errStream);
    return OK;
  }
  MessageRenderer messageRenderer=getMessageRenderer(arguments);
  errStream.print(messageRenderer.renderPreamble());
  printArgumentsIfNeeded(errStream,arguments,messageRenderer);
  printVersionIfNeeded(errStream,arguments,messageRenderer);
  MessageCollector collector=new PrintingMessageCollector(errStream,messageRenderer,arguments.isVerbose());
  if (arguments.suppressAllWarnings()) {
    collector=new FilteringMessageCollector(collector,Predicates.equalTo(CompilerMessageSeverity.WARNING));
  }
  try {
    return exec(collector,arguments);
  }
  finally {
    errStream.print(messageRenderer.renderConclusion());
  }
}
