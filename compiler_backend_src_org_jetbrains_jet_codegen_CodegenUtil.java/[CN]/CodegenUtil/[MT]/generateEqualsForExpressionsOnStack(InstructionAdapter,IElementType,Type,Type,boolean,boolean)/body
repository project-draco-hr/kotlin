{
  if ((isNumberPrimitive(leftType) || leftType.getSort() == Type.BOOLEAN) && leftType == rightType) {
    return compareExpressionsOnStack(v,opToken,leftType);
  }
 else {
    if (opToken == JetTokens.EQEQEQ || opToken == JetTokens.EXCLEQEQEQ) {
      return StackValue.cmp(opToken,leftType);
    }
 else {
      return generateNullSafeEquals(v,opToken,leftNullable,rightNullable);
    }
  }
}
