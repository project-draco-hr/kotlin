{
switch (state) {
case NOT_COMPUTED:
    state=State.BEING_COMPUTED;
  value=compute();
state=State.COMPUTED;
return value;
case BEING_COMPUTED:
state=State.ERROR;
throw new ReenteringLazyValueComputationException();
case COMPUTED:
return value;
case ERROR:
throw new ReenteringLazyValueComputationException();
}
throw new IllegalStateException("Unreachable");
}
