{
  String newSignature=editor.getDocument().getText();
  if (previousSignature.equals(newSignature))   return;
  final Project project=method.getProject();
  final PsiNameValuePair[] nameValuePairs=JavaPsiFacade.getElementFactory(project).createAnnotationFromText("@" + KOTLIN_SIGNATURE_ANNOTATION + "(value=\""+ newSignature+ "\")",null).getParameterList().getAttributes();
  new WriteCommandAction(project){
    @Override protected void run(    final Result result) throws Throwable {
      ExternalAnnotationsManager.getInstance(project).deannotate(method,KOTLIN_SIGNATURE_ANNOTATION);
      ExternalAnnotationsManager.getInstance(project).annotateExternally(method,KOTLIN_SIGNATURE_ANNOTATION,method.getContainingFile(),nameValuePairs);
    }
  }
.execute();
}
