{
  DeclarationDescriptor containingDeclaration=p.getContainingDeclaration();
  if (CodegenUtil.isInterface(containingDeclaration)) {
    return ACC_PUBLIC;
  }
  if (p.getVisibility() == Visibilities.PUBLIC) {
    return ACC_PUBLIC;
  }
 else   if (p.getVisibility() == Visibilities.PROTECTED) {
    return ACC_PROTECTED;
  }
 else   if (p.getVisibility() == Visibilities.PRIVATE) {
    if (isClassObject(containingDeclaration)) {
      return defaultFlags;
    }
    if (p instanceof ConstructorDescriptor && isEnumEntry(containingDeclaration)) {
      return 0;
    }
    if (containingDeclaration instanceof NamespaceDescriptor) {
      return 0;
    }
    return ACC_PRIVATE;
  }
 else   if (p.getVisibility() == Visibilities.INTERNAL) {
    return ACC_PUBLIC;
  }
 else {
    if (p.getVisibility() == Visibilities.INHERITED) {
      throw new IllegalStateException("'inherited' visibility is unresolved on code generation stage");
    }
    return defaultFlags;
  }
}
