{
  MapTypeMode mapTypeMode=ownerKindToMapTypeMode(kind);
  DeclarationDescriptor containingDeclaration=descriptor.getContainingDeclaration();
  if (containingDeclaration instanceof NamespaceDescriptor) {
    return jvmClassNameForNamespace((NamespaceDescriptor)containingDeclaration);
  }
 else   if (containingDeclaration instanceof ClassDescriptor) {
    ClassDescriptor classDescriptor=(ClassDescriptor)containingDeclaration;
    if (kind instanceof OwnerKind.DelegateKind) {
      mapTypeMode=MapTypeMode.IMPL;
    }
 else {
      if (classDescriptor.getKind() == ClassKind.OBJECT) {
        mapTypeMode=MapTypeMode.IMPL;
      }
    }
    Type asmType=mapType(classDescriptor.getDefaultType(),mapTypeMode);
    if (asmType.getSort() != Type.OBJECT) {
      throw new IllegalStateException();
    }
    return JvmClassName.byType(asmType);
  }
 else {
    throw new UnsupportedOperationException("don't know how to generate owner for parent " + containingDeclaration);
  }
}
