{
  this.typeParameters=typeParameters;
  this.unsubstitutedValueParameters=unsubstitutedValueParameters;
  this.unsubstitutedReturnType=unsubstitutedReturnType;
  this.modality=modality;
  this.visibility=visibility;
  this.receiver=receiverType == null ? NO_RECEIVER : new ExtensionReceiver(this,receiverType);
  this.expectedThisObject=expectedThisObject;
  for (int i=0; i < typeParameters.size(); ++i) {
    if (typeParameters.get(i).getIndex() != i) {
      throw new IllegalStateException();
    }
  }
  for (int i=0; i < unsubstitutedValueParameters.size(); ++i) {
    int firstValueParameterOffset=0;
    ValueParameterDescriptor valueParameterDescriptor=unsubstitutedValueParameters.get(i);
    if (valueParameterDescriptor.getIndex() != i + firstValueParameterOffset) {
      throw new IllegalStateException(valueParameterDescriptor + "index is " + valueParameterDescriptor.getIndex()+ " but position is "+ i);
    }
  }
  return this;
}
