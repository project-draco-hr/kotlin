{
  this.typeParameters=Lists.newArrayList(typeParameters);
  this.unsubstitutedValueParameters=unsubstitutedValueParameters;
  this.unsubstitutedReturnType=unsubstitutedReturnType;
  this.modality=modality;
  this.visibility=visibility;
  this.receiverParameter=receiverParameterType == null ? NO_RECEIVER_PARAMETER : new ReceiverParameterDescriptorImpl(this,receiverParameterType);
  this.expectedThisObject=expectedThisObject;
  for (int i=0; i < typeParameters.size(); ++i) {
    TypeParameterDescriptor typeParameterDescriptor=typeParameters.get(i);
    if (typeParameterDescriptor.getIndex() != i) {
      throw new IllegalStateException(typeParameterDescriptor + " index is " + typeParameterDescriptor.getIndex()+ " but position is "+ i);
    }
  }
  for (int i=0; i < unsubstitutedValueParameters.size(); ++i) {
    int firstValueParameterOffset=0;
    ValueParameterDescriptor valueParameterDescriptor=unsubstitutedValueParameters.get(i);
    if (valueParameterDescriptor.getIndex() != i + firstValueParameterOffset) {
      throw new IllegalStateException(valueParameterDescriptor + "index is " + valueParameterDescriptor.getIndex()+ " but position is "+ i);
    }
  }
  return this;
}
