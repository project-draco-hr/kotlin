{
  Context context=createContext(ecmaVersion);
  if (variables != null) {
    context.setOptimizationLevel(getOptimizationLevel(variables));
  }
  try {
    ScriptableObject scope=getScope(ecmaVersion,context,jsLibraries);
    putGlobalVariablesIntoScope(scope,variables);
    for (    String filename : fileNames) {
      runFileWithRhino(filename,context,scope);
      String problems=lintIt(context,filename,scope);
      if (problems != null) {
        System.out.print(problems);
      }
    }
    checker.runChecks(context,scope);
  }
  finally {
    Context.exit();
  }
}
