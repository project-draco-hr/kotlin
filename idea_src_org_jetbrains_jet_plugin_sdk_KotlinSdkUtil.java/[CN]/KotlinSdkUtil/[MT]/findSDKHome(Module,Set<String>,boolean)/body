{
  checkedModuleNames.add(module.getName());
  for (  OrderEntry orderEntry : ModuleRootManager.getInstance(module).getOrderEntries()) {
    if (orderEntry instanceof ModuleOrderEntry) {
      ModuleOrderEntry moduleOrderEntry=(ModuleOrderEntry)orderEntry;
      Module depModule=moduleOrderEntry.getModule();
      if (depModule != null && !checkedModuleNames.contains(depModule.getName()) && isAvailable(moduleOrderEntry,isDependency)) {
        File sdkHome=findSDKHome(depModule,checkedModuleNames,true);
        if (sdkHome != null) {
          return sdkHome;
        }
      }
    }
 else     if (orderEntry instanceof LibraryOrderEntry) {
      LibraryOrderEntry libraryOrderEntry=(LibraryOrderEntry)orderEntry;
      if (isAvailable(libraryOrderEntry,isDependency)) {
        File sdkHome=detectSDKHome(Arrays.asList(libraryOrderEntry.getRootFiles(OrderRootType.CLASSES)));
        if (sdkHome != null) {
          return sdkHome;
        }
      }
    }
  }
  return null;
}
