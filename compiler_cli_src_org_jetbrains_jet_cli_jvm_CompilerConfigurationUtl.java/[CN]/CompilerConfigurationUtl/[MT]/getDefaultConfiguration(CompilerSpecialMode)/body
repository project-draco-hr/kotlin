{
  List<File> classpath=new ArrayList<File>();
  if (includeJdk(compilerSpecialMode)) {
    classpath.add(PathUtil.findRtJar());
  }
  if (includeKotlinRuntime(compilerSpecialMode)) {
    classpath.add(PathUtil.getDefaultRuntimePath());
  }
  File[] annotationsPath=new File[0];
  if (includeJdkAnnotations(compilerSpecialMode)) {
    annotationsPath=new File[]{PathUtil.getJdkAnnotationsPath()};
  }
  CompilerConfiguration configuration=new CompilerConfiguration();
  configuration.putUserData(JVMConfigurationKeys.CLASSPATH_KEY,classpath.toArray(new File[classpath.size()]));
  configuration.putUserData(JVMConfigurationKeys.ANNOTATIONS_PATH_KEY,annotationsPath);
  return configuration;
}
