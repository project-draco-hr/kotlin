{
  KtClass aClass=KtPsiFactoryKt.KtPsiFactory(getProject()).createClass(classWithFunction);
  ClassDescriptorWithResolutionScopes classDescriptor=createClassDescriptor(kind,aClass);
  List<KtDeclaration> declarations=aClass.getDeclarations();
  KtNamedFunction function=(KtNamedFunction)declarations.get(0);
  SimpleFunctionDescriptor functionDescriptor=functionDescriptorResolver.resolveFunctionDescriptor(classDescriptor,ScopeUtilsKt.asLexicalScope(scope),function,JetTestUtils.DUMMY_TRACE,DataFlowInfo.EMPTY);
  assertEquals(expectedFunctionModality,functionDescriptor.getModality());
}
