{
  final PsiManager manager=PsiManager.getInstance(project);
  Collection<JetFile> jetFiles=Collections2.transform(FileTypeIndex.getFiles(JetFileType.INSTANCE,scope),new com.google.common.base.Function<VirtualFile,JetFile>(){
    @Override public JetFile apply(    @Nullable VirtualFile file){
      if (file == null || !ProjectFileIndex.SERVICE.getInstance(project).isInSourceContent(file)) {
        return null;
      }
      PsiFile psiFile=manager.findFile(file);
      if (!(psiFile instanceof JetFile)) {
        return null;
      }
      return ((JetFile)psiFile);
    }
  }
);
  return Sets.newHashSet(Collections2.filter(jetFiles,Predicates.<JetFile>notNull()));
}
