{
  AbstractInsnNode loadThis=getPreviousThis(fieldInsnNode);
  int opcode=fieldInsnNode.getOpcode() == Opcodes.GETFIELD ? capturedField.getType().getOpcode(Opcodes.ILOAD) : capturedField.getType().getOpcode(Opcodes.ISTORE);
  VarInsnNode newInstruction=new VarInsnNode(opcode,capturedField.getIndex());
  node.instructions.remove(loadThis);
  node.instructions.insertBefore(fieldInsnNode,newInstruction);
  node.instructions.remove(fieldInsnNode);
  return newInstruction;
}
