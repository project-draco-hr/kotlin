{
  ClassBuilder cv=state.getFactory().newVisitor(OtherOrigin(declaration,descriptor),asmTypeForAnonymousClass(bindingContext,descriptor),declaration.getContainingFile());
  ClosureCodegen closureCodegen=new ClosureCodegen(state,declaration,samType,context.intoClosure(descriptor,this,typeMapper),functionReferenceTarget,strategy,parentCodegen,cv);
  closureCodegen.generate();
  if (closureCodegen.getReifiedTypeParametersUsages().wereUsedReifiedParameters()) {
    ReifiedTypeInliner.putNeedClassReificationMarker(v);
    propagateChildReifiedTypeParametersUsages(closureCodegen.getReifiedTypeParametersUsages());
  }
  return closureCodegen.putInstanceOnStack(this);
}
