{
  ResolvedCall<?> resolvedCall=getResolvedCallWithAssert(expression,bindingContext);
  FunctionDescriptor descriptor=(FunctionDescriptor)resolvedCall.getResultingDescriptor();
  JetExpression left=expression.getLeft();
  JetExpression right=expression.getRight();
  Callable callable=resolveToCallable(descriptor,false,resolvedCall);
  Type type;
  StackValue leftValue;
  StackValue rightValue;
  if (callable instanceof IntrinsicMethod) {
    type=comparisonOperandType(expressionType(left),expressionType(right));
    leftValue=gen(left);
    rightValue=gen(right);
  }
 else {
    type=Type.INT_TYPE;
    leftValue=invokeFunction(resolvedCall,receiver);
    rightValue=StackValue.constant(0,type);
  }
  return StackValue.cmp(expression.getOperationToken(),type,leftValue,rightValue);
}
