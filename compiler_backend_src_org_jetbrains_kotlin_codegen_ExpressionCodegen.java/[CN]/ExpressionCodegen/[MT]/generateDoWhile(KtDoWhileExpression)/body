{
  Label beginLoopLabel=new Label();
  v.mark(beginLoopLabel);
  Label breakLabel=new Label();
  Label continueLabel=new Label();
  blockStackElements.push(new LoopBlockStackElement(breakLabel,continueLabel,targetLabel(expression)));
  PseudoInsnsKt.fakeAlwaysFalseIfeq(v,continueLabel);
  KtExpression body=expression.getBody();
  KtExpression condition=expression.getCondition();
  StackValue conditionValue;
  StackValueWithLeaveTask leaveTask=null;
  if (body instanceof KtBlockExpression) {
    List<KtExpression> doWhileStatements=((KtBlockExpression)body).getStatements();
    List<KtExpression> statements=new ArrayList<KtExpression>(doWhileStatements.size() + 1);
    statements.addAll(doWhileStatements);
    statements.add(condition);
    leaveTask=generateBlock((KtBlockExpression)body,statements,false,continueLabel,null);
    conditionValue=leaveTask.getStackValue();
  }
 else {
    if (body != null) {
      gen(body,Type.VOID_TYPE);
    }
    v.mark(continueLabel);
    conditionValue=gen(condition);
  }
  BranchedValue.Companion.loopJump(conditionValue,beginLoopLabel,false,v);
  if (leaveTask != null) {
    leaveTask.getLeaveTasks().invoke(conditionValue);
  }
  v.mark(breakLabel);
  blockStackElements.pop();
}
