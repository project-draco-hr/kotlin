{
  DeclarationDescriptor descriptor=bindingContext.get(REFERENCE_TARGET,expression.getInstanceReference());
  if (descriptor instanceof ClassDescriptor) {
    return StackValue.thisOrOuter(this,(ClassDescriptor)descriptor,false,true);
  }
  if (descriptor instanceof CallableDescriptor) {
    return generateReceiver((CallableDescriptor)descriptor);
  }
  throw new UnsupportedOperationException("Neither this nor receiver: " + descriptor);
}
