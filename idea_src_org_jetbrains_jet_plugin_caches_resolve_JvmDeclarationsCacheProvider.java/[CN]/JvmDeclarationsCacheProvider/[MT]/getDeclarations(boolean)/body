{
synchronized (declarationAnalysisLock) {
    if (allowIncomplete) {
      if (incompleteTrace != null) {
        final BindingContext context=incompleteTrace.getBindingContext();
        return new KotlinDeclarationsCache(){
          @NotNull @Override public BindingContext getBindingContext(){
            return context;
          }
        }
;
      }
    }
    return CachedValuesManager.getManager(project).getCachedValue(project,cachedKey,declarationsProvider,false);
  }
}
