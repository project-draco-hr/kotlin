{
  final PsiElement elementAtCaret=file.findElementAt(editor.getCaretModel().getOffset());
  if (elementAtCaret instanceof LeafPsiElement) {
    LeafPsiElement leafElement=(LeafPsiElement)elementAtCaret;
    if (leafElement.getElementType() == JetTokens.EXCLEXCL) {
      return elementAtCaret;
    }
    LeafPsiElement prevLeaf=(LeafPsiElement)PsiTreeUtil.prevLeaf(leafElement);
    if (prevLeaf != null && prevLeaf.getElementType() == JetTokens.EXCLEXCL) {
      return prevLeaf;
    }
  }
  return null;
}
