{
  if (!FileModificationService.getInstance().prepareFileForWrite(file)) {
    return;
  }
  if (!isRemove) {
    JetExpression modifiedExpression=getExpressionForIntroduceCall(editor,file);
    JetExpression exclExclExpression=JetPsiFactory.createExpression(project,modifiedExpression.getText() + "!!");
    modifiedExpression.replace(exclExclExpression);
  }
 else {
    JetPostfixExpression postfixExpression=getExclExclPostfixExpression(editor,file);
    JetExpression expression=JetPsiFactory.createExpression(project,postfixExpression.getBaseExpression().getText());
    postfixExpression.replace(expression);
  }
}
