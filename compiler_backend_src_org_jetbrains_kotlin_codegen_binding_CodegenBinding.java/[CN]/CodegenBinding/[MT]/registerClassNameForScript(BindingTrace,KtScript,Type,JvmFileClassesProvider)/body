{
  ScriptDescriptor descriptor=trace.getBindingContext().get(SCRIPT,script);
  if (descriptor == null) {
    throw new IllegalStateException("Script descriptor is not found for PSI: " + PsiUtilsKt.getElementTextWithContext(script));
  }
  String simpleName=asmType.getInternalName().substring(asmType.getInternalName().lastIndexOf('/') + 1);
  ClassDescriptorImpl classDescriptor=new ClassDescriptorImpl(descriptor,Name.special("<script-" + simpleName + ">"),Modality.FINAL,Collections.singleton(DescriptorUtilsKt.getBuiltIns(descriptor).getAnyType()),KotlinSourceElementKt.toSourceElement(script));
  classDescriptor.initialize(MemberScope.Companion.empty(classDescriptor),Collections.<ConstructorDescriptor>emptySet(),null);
  recordClosure(trace,classDescriptor,null,asmType,fileClassesManager);
  trace.record(CLASS_FOR_SCRIPT,descriptor,classDescriptor);
}
