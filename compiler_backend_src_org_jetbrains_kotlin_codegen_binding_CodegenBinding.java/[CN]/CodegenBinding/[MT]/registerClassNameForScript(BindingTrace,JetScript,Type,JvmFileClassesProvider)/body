{
  ScriptDescriptor descriptor=trace.getBindingContext().get(SCRIPT,script);
  if (descriptor == null) {
    throw new IllegalStateException("Script descriptor is not found for PSI: " + PsiUtilPackage.getElementTextWithContext(script));
  }
  String simpleName=asmType.getInternalName().substring(asmType.getInternalName().lastIndexOf('/') + 1);
  ClassDescriptorImpl classDescriptor=new ClassDescriptorImpl(descriptor,Name.special("<script-" + simpleName + ">"),Modality.FINAL,Collections.singleton(DescriptorUtilPackage.getBuiltIns(descriptor).getAnyType()),toSourceElement(script));
  classDescriptor.initialize(JetScope.Empty.INSTANCE$,Collections.<ConstructorDescriptor>emptySet(),null);
  recordClosure(trace,classDescriptor,null,asmType,fileClassesManager);
  trace.record(CLASS_FOR_SCRIPT,descriptor,classDescriptor);
}
