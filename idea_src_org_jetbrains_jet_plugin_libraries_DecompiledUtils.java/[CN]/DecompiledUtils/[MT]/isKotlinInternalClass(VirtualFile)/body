{
  String name=file.getName();
  int pos=name.indexOf('$');
  if (pos > 0) {
    name=name.substring(0,pos) + ".class";
    VirtualFile supposedHost=file.getParent().findChild(name);
    if (supposedHost != null) {
      return checkFile(supposedHost);
    }
  }
  if (name.contains(PACKAGE_FRAGMENT_SIGNATURE)) {
    KotlinClassHeader header=new VirtualFileKotlinClass(LockBasedStorageManager.NO_LOCKS,file).getClassHeader();
    if (header != null && header.getKind() == KotlinClassHeader.Kind.PACKAGE_FRAGMENT) {
      return true;
    }
  }
  return false;
}
