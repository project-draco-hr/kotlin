{
  try {
    replWriter.printlnInit("Welcome to Kotlin version " + KotlinVersion.VERSION + " (JRE "+ System.getProperty("java.runtime.version")+ ")");
    replWriter.printlnInit("Type :help for help, :quit for quit");
    WhatNextAfterOneLine next=WhatNextAfterOneLine.READ_LINE;
    while (true) {
      next=one(next);
      if (next == WhatNextAfterOneLine.QUIT) {
        break;
      }
    }
  }
 catch (  Exception e) {
    replErrorLogger.logException(e);
  }
 finally {
    try {
      if (commandReader instanceof ConsoleReplCommandReader) {
        ((ConsoleReplCommandReader)commandReader).getFileHistory().flush();
      }
    }
 catch (    Exception e) {
      replErrorLogger.logException(e);
    }
  }
}
