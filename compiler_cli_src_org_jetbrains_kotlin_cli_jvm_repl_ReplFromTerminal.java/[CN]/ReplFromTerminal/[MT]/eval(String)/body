{
  ReplInterpreter.LineResult lineResult=getReplInterpreter().eval(line);
  if (lineResult.getType() == ReplInterpreter.LineResultType.SUCCESS) {
    if (!lineResult.isUnit()) {
      System.out.println(lineResult.getValue());
    }
  }
 else   if (lineResult.getType() == ReplInterpreter.LineResultType.INCOMPLETE) {
  }
 else   if (lineResult.getType() == ReplInterpreter.LineResultType.ERROR) {
    if (ideMode) {
      replWriter.printlnWithEscaping(lineResult.getErrorText(),EscapeType.REPORT);
    }
 else {
      System.out.print(lineResult.getErrorText());
    }
  }
 else {
    throw new IllegalStateException("unknown line result type: " + lineResult);
  }
  return lineResult.getType();
}
