{
  List<TypeParameterDescriptor> clazzTypeParameters=clazz.getTypeConstructor().getParameters();
  if (clazzTypeParameters.size() != projections.size()) {
    throw new IllegalArgumentException("type parameter counts do not match: " + clazz + ", "+ projections);
  }
  Map<TypeConstructor,TypeProjection> substitutions=Maps.newHashMap();
  for (int i=0; i < clazzTypeParameters.size(); ++i) {
    TypeConstructor typeConstructor=clazzTypeParameters.get(i).getTypeConstructor();
    substitutions.put(typeConstructor,projections.get(i));
  }
  return TypeSubstitutor.create(substitutions).substitute(clazz.getDefaultType(),Variance.INVARIANT);
}
