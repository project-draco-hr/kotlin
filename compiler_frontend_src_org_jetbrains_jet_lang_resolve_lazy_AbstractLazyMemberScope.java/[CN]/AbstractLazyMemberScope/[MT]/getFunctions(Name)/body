{
  Set<FunctionDescriptor> known=functionDescriptors.get(name);
  if (known != null)   return known;
  if (allDescriptorsComputed)   return Collections.emptySet();
  Set<FunctionDescriptor> result=Sets.newLinkedHashSet();
  Collection<JetNamedFunction> declarations=declarationProvider.getFunctionDeclarations(name);
  for (  JetNamedFunction functionDeclaration : declarations) {
    JetScope resolutionScope=getScopeForMemberDeclarationResolution(functionDeclaration);
    result.add(resolveSession.getInjector().getDescriptorResolver().resolveFunctionDescriptor(thisDescriptor,resolutionScope,functionDeclaration,resolveSession.getTrace()));
  }
  getNonDeclaredFunctions(name,result);
  if (!result.isEmpty()) {
    Set<FunctionDescriptor> oldValue=functionDescriptors.putIfAbsent(name,result);
    if (oldValue != null)     return oldValue;
    registerDescriptors(result);
  }
  return result;
}
