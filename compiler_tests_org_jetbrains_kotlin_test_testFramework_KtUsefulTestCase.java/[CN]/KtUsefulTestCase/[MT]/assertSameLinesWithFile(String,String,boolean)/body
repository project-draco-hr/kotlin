{
  String fileText;
  try {
    fileText=FileUtil.loadFile(new File(filePath),CharsetToolkit.UTF8_CHARSET);
  }
 catch (  FileNotFoundException e) {
    VfsTestUtil.overwriteTestData(filePath,actualText);
    throw new AssertionFailedError("No output text found. File " + filePath + " created.");
  }
catch (  IOException e) {
    throw new RuntimeException(e);
  }
  String expected=StringUtil.convertLineSeparators(trimBeforeComparing ? fileText.trim() : fileText);
  String actual=StringUtil.convertLineSeparators(trimBeforeComparing ? actualText.trim() : actualText);
  if (!Comparing.equal(expected,actual)) {
    throw new FileComparisonFailure(null,expected,actual,filePath);
  }
}
