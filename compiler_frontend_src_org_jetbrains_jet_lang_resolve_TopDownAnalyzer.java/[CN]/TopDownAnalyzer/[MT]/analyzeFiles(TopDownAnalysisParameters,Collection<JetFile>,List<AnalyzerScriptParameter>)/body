{
  ((ModuleDescriptorImpl)moduleDescriptor).addFragmentProvider(DependencyKind.SOURCES,packageFragmentProvider);
  ((ModuleDescriptorImpl)moduleDescriptor).addFragmentProvider(DependencyKind.BUILT_INS,KotlinBuiltIns.getInstance().getBuiltInsModule().getPackageFragmentProvider());
  TopDownAnalysisContext c=new TopDownAnalysisContext(topDownAnalysisParameters);
  doProcess(c,JetModuleUtil.getSubpackagesOfRootScope(moduleDescriptor),new PackageLikeBuilderDummy(),files);
  return c;
}
