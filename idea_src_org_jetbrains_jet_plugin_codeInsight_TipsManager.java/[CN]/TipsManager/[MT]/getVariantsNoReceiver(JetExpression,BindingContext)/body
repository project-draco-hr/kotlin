{
  JetScope resolutionScope=context.get(BindingContext.RESOLUTION_SCOPE,expression);
  if (resolutionScope != null) {
    if (expression.getParent() instanceof JetImportDirective || expression.getParent() instanceof JetPackageDirective) {
      return excludeNonPackageDescriptors(resolutionScope.getAllDescriptors());
    }
 else {
      Collection<DeclarationDescriptor> descriptorsSet=Sets.newHashSet();
      List<ReceiverParameterDescriptor> result=resolutionScope.getImplicitReceiversHierarchy();
      for (      ReceiverParameterDescriptor receiverDescriptor : result) {
        JetType receiverType=receiverDescriptor.getType();
        descriptorsSet.addAll(receiverType.getMemberScope().getAllDescriptors());
      }
      descriptorsSet.addAll(resolutionScope.getAllDescriptors());
      return excludeNotCallableExtensions(excludePrivateDescriptors(descriptorsSet),resolutionScope);
    }
  }
  return Collections.emptyList();
}
