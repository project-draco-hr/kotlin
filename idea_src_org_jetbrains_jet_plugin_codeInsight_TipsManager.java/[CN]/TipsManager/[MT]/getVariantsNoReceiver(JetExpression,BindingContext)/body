{
  JetScope resolutionScope=context.get(BindingContext.RESOLUTION_SCOPE,expression);
  if (resolutionScope != null) {
    if (expression.getParent() instanceof JetImportDirective || expression.getParent() instanceof JetPackageDirective) {
      return excludeNonPackageDescriptors(resolutionScope.getAllDescriptors());
    }
 else {
      Collection<DeclarationDescriptor> descriptorsSet=Sets.newHashSet();
      List<ReceiverParameterDescriptor> result=resolutionScope.getImplicitReceiversHierarchy();
      for (      ReceiverParameterDescriptor receiverDescriptor : result) {
        JetType receiverType=receiverDescriptor.getType();
        for (        DeclarationDescriptor member : receiverType.getMemberScope().getAllDescriptors()) {
          if (member instanceof CallableDescriptor && ((CallableDescriptor)member).getReceiverParameter() != null)           continue;
          descriptorsSet.add(member);
        }
      }
      descriptorsSet.addAll(resolutionScope.getAllDescriptors());
      DataFlowInfo info=getDataFlowInfo(context,expression);
      return excludeNotCallableExtensions(excludePrivateDescriptors(descriptorsSet),resolutionScope,context,info);
    }
  }
  return Collections.emptyList();
}
