{
  PsiAnnotation nullableAnnotation=nullManager.getNullableAnnotation(element,false);
  PsiAnnotation notNullAnnotation=nullManager.getNotNullAnnotation(element,false);
  if (notNullAnnotation != null && nullableAnnotation == null && element instanceof PsiMethod)   return;
  String annotationQualifiedName=annotation != null ? annotation.getQualifiedName() : null;
  if (annotationQualifiedName != null && javaPsiFacade.findClass(annotationQualifiedName,element.getResolveScope()) == null)   return;
  if (notNullAnnotation != null) {
    notNullAnnotation.delete();
  }
  if (nullableAnnotation != null) {
    nullableAnnotation.delete();
  }
  if (annotationQualifiedName == null)   return;
  PsiModifierList modifierList=element.getModifierList();
  if (modifierList != null) {
    modifierList.addAnnotation(annotationQualifiedName);
    javaCodeStyleManager.shortenClassReferences(element);
  }
}
