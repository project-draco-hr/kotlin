{
  String referencedName=expression.getReferencedName();
  JsName jsName=context.enclosingScope().findExistingNameNoRecurse(referencedName);
  if (jsName != null) {
    return jsName.makeRef();
  }
  jsName=context.classScope().findExistingNameNoRecurse(referencedName);
  if (jsName != null) {
    return context.getNamespaceQualifiedReference(jsName);
  }
  jsName=context.namespaceScope().findExistingNameNoRecurse(referencedName);
  if (jsName != null) {
    return context.getNamespaceQualifiedReference(jsName);
  }
  throw new AssertionError("Unindentified name " + expression.getReferencedName());
}
