{
  JetType expectedType;
  if (function instanceof JetFunction) {
    if (((JetFunction)function).getReturnTypeRef() != null || ((JetFunction)function).hasBlockBody()) {
      expectedType=descriptor.getReturnType();
    }
 else {
      expectedType=TypeUtils.NO_EXPECTED_TYPE;
    }
  }
 else {
    expectedType=descriptor.getReturnType();
  }
  return expectedType != null ? expectedType : TypeUtils.NO_EXPECTED_TYPE;
}
