{
  JetExpression tryBlock=expression.getTryBlock();
  List<JetCatchClause> catchClauses=expression.getCatchClauses();
  JetFinallySection finallyBlock=expression.getFinallyBlock();
  List<JetType> types=new ArrayList<JetType>();
  for (  JetCatchClause catchClause : catchClauses) {
    JetParameter catchParameter=catchClause.getCatchParameter();
    JetExpression catchBody=catchClause.getCatchBody();
    if (catchParameter != null) {
      ASTNode valOrVarNode=catchParameter.getValOrVarNode();
      if (valOrVarNode != null) {
        context.trace.report(VAL_OR_VAR_ON_CATCH_PARAMETER.on(valOrVarNode.getPsi(),((JetKeywordToken)valOrVarNode.getElementType())));
      }
      VariableDescriptor variableDescriptor=context.expressionTypingServices.getDescriptorResolver().resolveLocalVariableDescriptor(context.scope.getContainingDeclaration(),context.scope,catchParameter,context.trace);
      JetType throwableType=KotlinBuiltIns.getInstance().getThrowable().getDefaultType();
      DataFlowUtils.checkType(variableDescriptor.getType(),catchParameter,context.replaceExpectedType(throwableType));
      if (catchBody != null) {
        WritableScope catchScope=newWritableScopeImpl(context,"Catch scope");
        catchScope.addVariableDescriptor(variableDescriptor);
        JetType type=facade.getTypeInfo(catchBody,context.replaceScope(catchScope)).getType();
        if (type != null) {
          types.add(type);
        }
      }
    }
  }
  DataFlowInfo dataFlowInfo=context.dataFlowInfo;
  if (finallyBlock != null) {
    dataFlowInfo=facade.getTypeInfo(finallyBlock.getFinalExpression(),context.replaceExpectedType(TypeUtils.NO_EXPECTED_TYPE)).getDataFlowInfo();
  }
  JetType type=facade.getTypeInfo(tryBlock,context).getType();
  if (type != null) {
    types.add(type);
  }
  if (types.isEmpty()) {
    return JetTypeInfo.create(null,dataFlowInfo);
  }
 else {
    return JetTypeInfo.create(CommonSupertypes.commonSupertype(types),dataFlowInfo);
  }
}
