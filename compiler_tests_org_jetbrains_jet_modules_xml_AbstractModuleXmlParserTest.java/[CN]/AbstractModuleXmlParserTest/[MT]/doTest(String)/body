{
  File txtFile=new File(FileUtil.getNameWithoutExtension(xmlPath) + ".txt");
  List<ModuleDescription> result=ModuleXmlParser.parse(xmlPath,new MessageCollector(){
    @Override public void report(    @NotNull CompilerMessageSeverity severity,    @NotNull String message,    @NotNull CompilerMessageLocation location){
      throw new AssertionError(MessageRenderer.PLAIN.render(severity,message,location));
    }
  }
);
  StringBuilder sb=new StringBuilder();
  Printer p=new Printer(sb);
  for (  ModuleDescription description : result) {
    p.println(description);
  }
  String actual=sb.toString();
  if (!txtFile.exists()) {
    FileUtil.writeToFile(txtFile,actual);
    fail("Expected data file does not exist. A new file created: " + txtFile);
  }
  assertEquals(FileUtil.loadFile(txtFile,true),actual);
}
