{
  File txtFile=new File(FileUtil.getNameWithoutExtension(xmlPath) + ".txt");
  Pair<List<ModuleDescription>,String> result=ModuleXmlParser.parseModuleDescriptionsAndIncrementalCacheDir(xmlPath,new MessageCollector(){
    @Override public void report(    @NotNull CompilerMessageSeverity severity,    @NotNull String message,    @NotNull CompilerMessageLocation location){
      throw new AssertionError(MessageRenderer.PLAIN.render(severity,message,location));
    }
  }
);
  StringBuilder sb=new StringBuilder();
  if (result.second != null) {
    sb.append("incrementalCacheDir=").append(result.second).append("\n\n");
  }
  for (  ModuleDescription description : result.first) {
    sb.append(description).append("\n");
  }
  String actual=sb.toString();
  if (!txtFile.exists()) {
    FileUtil.writeToFile(txtFile,actual);
    fail("Expected data file does not exist. A new file created: " + txtFile);
  }
  JetTestUtils.assertEqualsToFile(txtFile,actual);
}
