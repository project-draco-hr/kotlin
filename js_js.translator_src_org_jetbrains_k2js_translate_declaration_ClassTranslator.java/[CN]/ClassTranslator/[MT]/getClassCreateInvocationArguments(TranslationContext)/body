{
  List<JsExpression> invocationArguments=new ArrayList<JsExpression>();
  final List<JsPropertyInitializer> properties=new SmartList<JsPropertyInitializer>();
  final List<JsPropertyInitializer> staticProperties=new SmartList<JsPropertyInitializer>();
  boolean isTopLevelDeclaration=context() == declarationContext;
  final JsNameRef qualifiedReference;
  if (!isTopLevelDeclaration) {
    qualifiedReference=null;
  }
 else   if (descriptor.getKind().isSingleton()) {
    qualifiedReference=null;
    declarationContext.literalFunctionTranslator().setDefinitionPlace(new NotNullLazyValue<Trinity<List<JsPropertyInitializer>,LabelGenerator,JsExpression>>(){
      @Override @NotNull public Trinity<List<JsPropertyInitializer>,LabelGenerator,JsExpression> compute(){
        return createPlace(properties,context().getThisObject(descriptor));
      }
    }
);
  }
 else {
    qualifiedReference=declarationContext.getQualifiedReference(descriptor);
    declarationContext.literalFunctionTranslator().setDefinitionPlace(new NotNullLazyValue<Trinity<List<JsPropertyInitializer>,LabelGenerator,JsExpression>>(){
      @Override @NotNull public Trinity<List<JsPropertyInitializer>,LabelGenerator,JsExpression> compute(){
        return createPlace(staticProperties,qualifiedReference);
      }
    }
);
  }
  invocationArguments.add(getSuperclassReferences(declarationContext));
  if (!isTrait()) {
    JsFunction initializer=new ClassInitializerTranslator(classDeclaration,declarationContext).generateInitializeMethod();
    invocationArguments.add(initializer.getBody().getStatements().isEmpty() ? JsLiteral.NULL : initializer);
  }
  translatePropertiesAsConstructorParameters(declarationContext,properties);
  DeclarationBodyVisitor bodyVisitor=new DeclarationBodyVisitor(properties,staticProperties);
  bodyVisitor.traverseContainer(classDeclaration,declarationContext);
  mayBeAddEnumEntry(bodyVisitor.getEnumEntryList(),staticProperties,declarationContext);
  if (isTopLevelDeclaration) {
    declarationContext.literalFunctionTranslator().setDefinitionPlace(null);
  }
  boolean hasStaticProperties=!staticProperties.isEmpty();
  if (!properties.isEmpty() || hasStaticProperties) {
    if (properties.isEmpty()) {
      invocationArguments.add(JsLiteral.NULL);
    }
 else {
      if (qualifiedReference != null) {
        invocationArguments.add(new JsDocComment(JsAstUtils.LENDS_JS_DOC_TAG,new JsNameRef("prototype",qualifiedReference)));
      }
      invocationArguments.add(new JsObjectLiteral(properties,true));
    }
  }
  if (hasStaticProperties) {
    invocationArguments.add(new JsDocComment(JsAstUtils.LENDS_JS_DOC_TAG,qualifiedReference));
    invocationArguments.add(new JsObjectLiteral(staticProperties,true));
  }
  return invocationArguments;
}
