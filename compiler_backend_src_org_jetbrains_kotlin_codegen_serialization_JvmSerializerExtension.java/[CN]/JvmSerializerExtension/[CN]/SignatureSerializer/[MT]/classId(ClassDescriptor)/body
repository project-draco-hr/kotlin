{
  DeclarationDescriptor container=descriptor.getContainingDeclaration();
  if (container instanceof PackageFragmentDescriptor) {
    return ClassId.topLevel(((PackageFragmentDescriptor)container).getFqName().child(descriptor.getName()));
  }
 else   if (container instanceof ClassDescriptor) {
    ClassId outerClassId=classId((ClassDescriptor)container);
    return outerClassId == null ? null : outerClassId.createNestedClassId(descriptor.getName());
  }
 else {
    return null;
  }
}
