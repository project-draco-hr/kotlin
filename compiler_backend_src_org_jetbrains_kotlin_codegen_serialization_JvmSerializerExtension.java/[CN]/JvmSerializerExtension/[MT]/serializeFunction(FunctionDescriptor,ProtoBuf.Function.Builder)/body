{
  SignatureSerializer signatureSerializer=new SignatureSerializer();
  JvmProtoBuf.JvmMethodSignature signature;
  if (descriptor instanceof DeserializedSimpleFunctionDescriptor) {
    DeserializedSimpleFunctionDescriptor deserialized=(DeserializedSimpleFunctionDescriptor)descriptor;
    signature=signatureSerializer.copyMethodSignature(deserialized.getProto().getExtension(JvmProtoBuf.oldMethodSignature),deserialized.getNameResolver());
  }
 else {
    Method method=bindings.get(METHOD_FOR_FUNCTION,descriptor);
    signature=method != null ? signatureSerializer.methodSignature(method) : null;
  }
  if (signature != null) {
    proto.setExtension(JvmProtoBuf.methodSignature,signature);
  }
  saveImplClassName(descriptor,proto);
}
