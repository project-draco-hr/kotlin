{
  PsiElement parent=property.getParent();
  assertNotNull(parent);
  JetExpression initializer=property.getInitializer();
  assertNotNull(initializer);
  JetPsiFactory psiFactory=JetPsiFactory(property);
  JetExpression newInitializer=createExpressionByPattern(psiFactory,"$0 = $1",property.getName(),initializer);
  newInitializer=(JetBinaryExpression)parent.addAfter(newInitializer,property);
  parent.addAfter(psiFactory.createNewLine(),property);
  Project project=newInitializer.getProject();
  PsiFile file=parent.getContainingFile();
  PsiDocumentManager.getInstance(project).doPostponedOperationsAndUnblockDocument(PsiDocumentManager.getInstance(project).getDocument(file));
  JetType inferredType=getPropertyTypeIfNeeded(property);
  String typeStr=inferredType != null ? IdeDescriptorRenderers.SOURCE_CODE.renderType(inferredType) : JetPsiUtil.getNullableText(property.getTypeReference());
  property=(JetProperty)property.replace(psiFactory.createProperty(property.getNameIdentifier().getText(),typeStr,property.isVar()));
  if (inferredType != null) {
    ShortenReferences.DEFAULT.process(property.getTypeReference());
  }
  return (JetBinaryExpression)newInitializer;
}
