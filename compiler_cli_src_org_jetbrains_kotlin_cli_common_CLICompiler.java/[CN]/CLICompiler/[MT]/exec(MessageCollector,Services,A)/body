{
  printVersionIfNeeded(messageCollector,arguments);
  if (arguments.suppressWarnings) {
    messageCollector=new FilteringMessageCollector(messageCollector,Predicates.equalTo(CompilerMessageSeverity.WARNING));
  }
  GroupingMessageCollector groupingCollector=new GroupingMessageCollector(messageCollector);
  try {
    ExitCode exitCode=OK;
    int repeatCount=1;
    if (arguments.repeat != null) {
      try {
        repeatCount=Integer.parseInt(arguments.repeat);
      }
 catch (      NumberFormatException ignored) {
      }
    }
    for (int i=0; i < repeatCount; i++) {
      if (i > 0) {
        K2JVMCompiler.Companion.resetInitStartTime();
      }
      Disposable rootDisposable=Disposer.newDisposable();
      try {
        MessageSeverityCollector severityCollector=new MessageSeverityCollector(groupingCollector);
        ExitCode code=doExecute(arguments,services,severityCollector,rootDisposable);
        exitCode=severityCollector.anyReported(CompilerMessageSeverity.ERROR) ? COMPILATION_ERROR : code;
      }
  finally {
        Disposer.dispose(rootDisposable);
      }
    }
    return exitCode;
  }
 catch (  Throwable t) {
    groupingCollector.report(CompilerMessageSeverity.EXCEPTION,OutputMessageUtil.renderException(t),CompilerMessageLocation.NO_LOCATION);
    return INTERNAL_ERROR;
  }
 finally {
    groupingCollector.flush();
  }
}
