{
  PsiFile psiFile=myFixture.getFile();
  Map<PsiElement,JetPsiReference> referenceContainersToReferences=new LinkedHashMap<PsiElement,JetPsiReference>();
  for (int offset=0; offset < psiFile.getTextLength(); offset++) {
    PsiReference ref=psiFile.findReferenceAt(offset);
    if (ref instanceof JetPsiReference && !referenceContainersToReferences.containsKey(ref.getElement())) {
      PsiElement target=ref.resolve();
      if (target == null)       continue;
      PsiFile targetNavPsiFile=target.getNavigationElement().getContainingFile();
      if (targetNavPsiFile == null)       continue;
      VirtualFile targetNavFile=targetNavPsiFile.getVirtualFile();
      if (targetNavFile == null)       continue;
      if (ProjectFileIndex.SERVICE.getInstance(getProject()).isInLibrarySource(targetNavFile)) {
        referenceContainersToReferences.put(ref.getElement(),(JetPsiReference)ref);
      }
    }
  }
  return referenceContainersToReferences.values();
}
