{
  WritableScope constructorScope=new WritableScopeImpl(declaringScope,declaringScope.getContainingDeclaration(),new TraceBasedRedeclarationHandler(context.getTrace())).setDebugName("Inner scope for constructor");
  for (  PropertyDescriptor propertyDescriptor : ((MutableClassDescriptor)descriptor.getContainingDeclaration()).getProperties()) {
    constructorScope.addPropertyDescriptorByFieldName("$" + propertyDescriptor.getName(),propertyDescriptor);
  }
  for (  ValueParameterDescriptor valueParameterDescriptor : descriptor.getValueParameters()) {
    JetParameter parameter=(JetParameter)context.getTrace().getBindingContext().get(BindingContext.DESCRIPTOR_TO_DECLARATION,valueParameterDescriptor);
    if (parameter.getValOrVarNode() == null || !primary) {
      constructorScope.addVariableDescriptor(valueParameterDescriptor);
    }
  }
  constructorScope.addLabeledDeclaration(descriptor);
  return constructorScope;
}
