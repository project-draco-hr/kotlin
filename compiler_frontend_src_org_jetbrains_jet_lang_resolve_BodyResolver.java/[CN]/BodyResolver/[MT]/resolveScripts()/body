{
  for (  Map.Entry<JetScript,ScriptDescriptor> e : context.getScripts().entrySet()) {
    JetScript declaration=e.getKey();
    ScriptDescriptor descriptor=e.getValue();
    JetScope scope=context.getScriptScopes().get(declaration);
    ExpressionTypingContext context=ExpressionTypingContext.newContext(expressionTypingServices,Maps.<JetPattern,DataFlowInfo>newHashMap(),Maps.<JetPattern,List<VariableDescriptor>>newHashMap(),new LabelResolver(),trace,this.context.getRootScope(),DataFlowInfo.EMPTY,NO_EXPECTED_TYPE,false);
    JetType returnType=expressionTypingServices.getBlockReturnedType(scope,declaration.getBlockExpression(),CoercionStrategy.NO_COERCION,context,trace);
    descriptor.initialize(returnType);
  }
}
