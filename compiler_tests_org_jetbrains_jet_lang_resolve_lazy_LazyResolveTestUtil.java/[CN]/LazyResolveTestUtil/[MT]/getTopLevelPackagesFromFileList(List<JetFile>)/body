{
  Set<Name> shortNames=Sets.newLinkedHashSet();
  for (  JetFile file : files) {
    JetPackageDirective directive=file.getPackageDirective();
    if (directive != null) {
      List<JetSimpleNameExpression> names=directive.getPackageNames();
      Name name=names.isEmpty() ? SpecialNames.ROOT_PACKAGE : names.get(0).getReferencedNameAsName();
      shortNames.add(name);
    }
 else {
      throw new IllegalStateException("Scripts are not supported: " + file.getName());
    }
  }
  return shortNames;
}
