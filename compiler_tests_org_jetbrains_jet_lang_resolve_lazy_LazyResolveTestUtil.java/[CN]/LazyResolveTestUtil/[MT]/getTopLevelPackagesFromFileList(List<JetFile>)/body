{
  Set<Name> shortNames=Sets.newLinkedHashSet();
  for (  JetFile file : files) {
    JetNamespaceHeader header=file.getNamespaceHeader();
    if (header != null) {
      List<JetSimpleNameExpression> names=header.getParentNamespaceNames();
      Name name=names.isEmpty() ? header.getNameAsName() : names.get(0).getReferencedNameAsName();
      shortNames.add(name);
    }
 else {
      throw new IllegalStateException("There's a file that declares the default package: " + file.getName());
    }
  }
  return shortNames;
}
