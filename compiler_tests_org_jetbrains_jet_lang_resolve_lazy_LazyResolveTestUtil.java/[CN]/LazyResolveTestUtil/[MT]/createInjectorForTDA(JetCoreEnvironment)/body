{
  JetTestUtils.newTrace(environment);
  TopDownAnalysisParameters params=new TopDownAnalysisParameters(Predicates.<PsiFile>alwaysTrue(),false,false,Collections.<AnalyzerScriptParameter>emptyList());
  CliLightClassGenerationSupport support=CliLightClassGenerationSupport.getInstanceForCli(environment.getProject());
  BindingTrace sharedTrace=support.getTrace();
  ModuleDescriptorImpl sharedModule=support.getModule();
  InjectorForTopDownAnalyzerForJvm injector=new InjectorForTopDownAnalyzerForJvm(environment.getProject(),params,sharedTrace,sharedModule);
  sharedModule.addFragmentProvider(DependencyKind.BINARIES,injector.getJavaDescriptorResolver().getPackageFragmentProvider());
  return injector;
}
