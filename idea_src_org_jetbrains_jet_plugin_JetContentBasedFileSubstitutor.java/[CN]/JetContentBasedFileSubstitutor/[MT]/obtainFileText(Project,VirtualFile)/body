{
  StringBuilder builder=new StringBuilder();
  JavaSemanticServices jss=new JavaSemanticServices(project,JetSemanticServices.createSemanticServices(project),new BindingTraceContext());
  PsiJavaFileStub js=getJavaStub(project,file);
  if (js != null) {
    if (js.getPackageName() != null && js.getPackageName().length() > 0) {
      builder.append("package ").append(js.getPackageName()).append("\n\n\n");
    }
    PsiClass psiClass=js.getClasses()[0];
    JavaDescriptorResolver jdr=jss.getDescriptorResolver();
    if (psiClass.getName().equals("namespace")) {
      NamespaceDescriptor nd=jdr.resolveNamespace(js.getPackageName());
      if (nd != null) {
        for (        DeclarationDescriptor member : nd.getMemberScope().getAllDescriptors()) {
          if (member instanceof ClassDescriptor && member.getName().equals("namespace")) {
            continue;
          }
          builder.append(DescriptorRenderer.COMPACT.render(member)).append("\n\n");
        }
      }
    }
 else {
      ClassDescriptor cd=jdr.resolveClass(psiClass);
      if (cd != null) {
        builder.append(DescriptorRenderer.COMPACT.render(cd));
        builder.append(" {\n");
        for (        DeclarationDescriptor member : cd.getDefaultType().getMemberScope().getAllDescriptors()) {
          if (member.getContainingDeclaration() == cd) {
            builder.append("    ").append(DescriptorRenderer.COMPACT.render(member)).append("\n\n");
          }
        }
        builder.append("}");
      }
    }
  }
  return builder.toString();
}
