{
  LockBasedLazyResolveStorageManager storageManager=new LockBasedLazyResolveStorageManager();
  FileBasedDeclarationProviderFactory declarationProviderFactory=new FileBasedDeclarationProviderFactory(storageManager,Config.withJsLibAdded(files,config),Predicates.<FqName>alwaysFalse());
  ModuleDescriptorImpl module=createJsModule("<lazy module>");
  module.addFragmentProvider(KotlinBuiltIns.getInstance().getBuiltInsModule().getPackageFragmentProvider());
  return new ResolveSession(config.getProject(),storageManager,module,declarationProviderFactory);
}
