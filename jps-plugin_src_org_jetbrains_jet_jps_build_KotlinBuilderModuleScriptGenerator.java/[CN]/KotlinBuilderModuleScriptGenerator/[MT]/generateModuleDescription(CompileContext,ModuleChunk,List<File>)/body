{
  KotlinModuleDescriptionBuilder builder=FACTORY.create();
  boolean noSources=true;
  Set<File> outputDirs=new HashSet<File>();
  for (  ModuleBuildTarget target : chunk.getTargets()) {
    outputDirs.add(getOutputDir(target));
  }
  ProjectBuilderLogger logger=context.getLoggingManager().getProjectBuilderLogger();
  for (  ModuleBuildTarget target : chunk.getTargets()) {
    File outputDir=getOutputDir(target);
    if (!IncrementalCompilation.ENABLED) {
      sourceFiles=new ArrayList<File>(KotlinSourceFileCollector.getAllKotlinSourceFiles(target));
    }
    if (sourceFiles.size() > 0) {
      noSources=false;
      if (logger.isEnabled()) {
        logger.logCompiledFiles(sourceFiles,KotlinBuilder.KOTLIN_BUILDER_NAME,"Compiling files:");
      }
    }
    builder.addModule(target.getId(),outputDir.getAbsolutePath(),getKotlinModuleDependencies(context,target),sourceFiles,target.isTests(),outputDirs);
  }
  if (noSources)   return null;
  File scriptFile=new File(getOutputDir(chunk.representativeTarget()),"script." + FACTORY.getFileExtension());
  writeScriptToFile(context,builder.asText(),scriptFile);
  return scriptFile;
}
