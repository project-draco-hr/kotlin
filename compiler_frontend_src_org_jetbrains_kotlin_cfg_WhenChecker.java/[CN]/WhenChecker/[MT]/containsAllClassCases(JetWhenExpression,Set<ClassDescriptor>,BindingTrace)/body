{
  Set<ClassDescriptor> checkedDescriptors=new HashSet<ClassDescriptor>();
  for (  JetWhenEntry whenEntry : whenExpression.getEntries()) {
    for (    JetWhenCondition condition : whenEntry.getConditions()) {
      boolean negated=false;
      ClassDescriptor checkedDescriptor=null;
      if (condition instanceof JetWhenConditionIsPattern) {
        JetWhenConditionIsPattern conditionIsPattern=(JetWhenConditionIsPattern)condition;
        JetType checkedType=trace.get(BindingContext.TYPE,conditionIsPattern.getTypeReference());
        if (checkedType != null) {
          checkedDescriptor=TypeUtils.getClassDescriptor(checkedType);
        }
        negated=conditionIsPattern.isNegated();
      }
 else       if (condition instanceof JetWhenConditionWithExpression) {
        JetWhenConditionWithExpression conditionWithExpression=(JetWhenConditionWithExpression)condition;
        if (conditionWithExpression.getExpression() != null) {
          JetSimpleNameExpression reference=getReference(conditionWithExpression.getExpression());
          if (reference != null) {
            DeclarationDescriptor target=trace.get(BindingContext.REFERENCE_TARGET,reference);
            if (target instanceof ClassDescriptor) {
              checkedDescriptor=(ClassDescriptor)target;
            }
          }
        }
      }
      if (checkedDescriptor == null || !memberDescriptors.contains(checkedDescriptor) || (condition instanceof JetWhenConditionWithExpression && !DescriptorUtils.isObject(checkedDescriptor) && !DescriptorUtils.isEnumEntry(checkedDescriptor))) {
        continue;
      }
      if (negated) {
        if (checkedDescriptors.contains(checkedDescriptor))         return true;
        checkedDescriptors.addAll(memberDescriptors);
        checkedDescriptors.remove(checkedDescriptor);
      }
 else {
        checkedDescriptors.add(checkedDescriptor);
      }
    }
  }
  return checkedDescriptors.containsAll(memberDescriptors);
}
