{
  super.setUp();
  String libraryDir=FileUtil.getTempDirectory();
  KotlinCompiler.ExitCode compilerExec=new KotlinCompiler().exec("-src",TEST_DATA_PATH + "/library","-output",libraryDir);
  assertEquals(KotlinCompiler.ExitCode.OK,compilerExec);
  myLibraryDir=LocalFileSystem.getInstance().findFileByPath(libraryDir);
  assertNotNull(myLibraryDir);
  ApplicationManager.getApplication().runWriteAction(new Runnable(){
    @Override public void run(){
      ModifiableRootModel moduleModel=ModuleRootManager.getInstance(myModule).getModifiableModel();
      Library.ModifiableModel libraryModel=moduleModel.getModuleLibraryTable().getModifiableModel().createLibrary("myKotlinLib").getModifiableModel();
      libraryModel.addRoot(myLibraryDir,OrderRootType.CLASSES);
      libraryModel.commit();
      moduleModel.commit();
    }
  }
);
}
