{
  List<JetFile> files=Lists.newArrayList(JetFilesProvider.getInstance(getProject()).allInScope(GlobalSearchScope.allScope(getProject())));
  final List<Breakpoint> breakpoints=Lists.newArrayList();
  for (  JetFile file : files) {
    breakpoints.addAll(extractBreakpointsInfo(file,file.getText()));
  }
  GenerationState state=GenerationUtils.compileManyFilesGetGenerationStateForTest(getProject(),files);
  Map<String,ReferenceType> referencesByName=getReferenceMap(state.getFactory());
  DebugProcess debugProcess=createDebugProcess(referencesByName);
  final PositionManager positionManager=createPositionManager(debugProcess,files,state);
  ApplicationManager.getApplication().runReadAction(new Runnable(){
    public void run(){
      try {
        for (        Breakpoint breakpoint : breakpoints) {
          assertBreakpointIsHandledCorrectly(breakpoint,positionManager);
        }
      }
 catch (      NoDataException e) {
        ExceptionUtils.rethrow(e);
      }
    }
  }
);
}
