{
  File file=new File(getTestDataPath(),getTestName(true) + ".kt");
  String fileContent;
  try {
    fileContent=FileUtil.loadFile(file);
  }
 catch (  IOException e) {
    throw ExceptionUtils.rethrow(e);
  }
  final PsiFile psiFile=JetTestUtils.createFile(file.getAbsolutePath(),fileContent,getProject());
  final Map<Integer,String> breakpoints=extractBreakpointsInfo(fileContent);
  Map<String,ReferenceType> referencesByName=compileFileGetReferenceMap((JetFile)psiFile);
  final DebugProcess debugProcess=createDebugProcess(referencesByName);
  ApplicationManager.getApplication().runReadAction(new Runnable(){
    public void run(){
      try {
        PositionManager positionManager=getPositionManagerFactory().createPositionManager(debugProcess);
        assertNotNull(positionManager);
        for (        Integer lineNumber : breakpoints.keySet()) {
          String className=breakpoints.get(lineNumber);
          SourcePosition position=SourcePosition.createFromLine(psiFile,lineNumber);
          assertPositionIsValid(position,className,positionManager);
        }
      }
 catch (      NoDataException e) {
        ExceptionUtils.rethrow(e);
      }
    }
  }
);
}
