{
  ReceiverParameterDescriptor receiver=descriptor.getExtensionReceiverParameter();
  if (descriptor instanceof AnonymousFunctionDescriptor && (((AnonymousFunctionDescriptor)descriptor).isCoroutine()) && receiver != null && receiver.getValue() instanceof ExtensionReceiver) {
    receiver=new ReceiverParameterDescriptorImpl(descriptor,new CoroutineReceiverValue(((ExtensionReceiver)receiver.getValue()).getDeclarationDescriptor(),receiver.getValue().getType()));
  }
  return new LexicalScopeImpl(outerScope,descriptor,true,receiver,LexicalScopeKind.FUNCTION_INNER_SCOPE,redeclarationChecker,new Function1<LexicalScopeImpl.InitializeHandler,Unit>(){
    @Override public Unit invoke(    LexicalScopeImpl.InitializeHandler handler){
      for (      TypeParameterDescriptor typeParameter : descriptor.getTypeParameters()) {
        handler.addClassifierDescriptor(typeParameter);
      }
      for (      ValueParameterDescriptor valueParameterDescriptor : descriptor.getValueParameters()) {
        if (valueParameterDescriptor instanceof ValueParameterDescriptorImpl.WithDestructuringDeclaration) {
          List<VariableDescriptor> entries=((ValueParameterDescriptorImpl.WithDestructuringDeclaration)valueParameterDescriptor).getDestructuringVariables();
          for (          VariableDescriptor entry : entries) {
            handler.addVariableDescriptor(entry);
          }
        }
 else {
          handler.addVariableDescriptor(valueParameterDescriptor);
        }
      }
      return Unit.INSTANCE;
    }
  }
);
}
