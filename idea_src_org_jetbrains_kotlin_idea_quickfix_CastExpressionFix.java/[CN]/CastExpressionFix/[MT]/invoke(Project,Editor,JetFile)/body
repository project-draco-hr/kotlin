{
  String renderedType=IdeDescriptorRenderers.SOURCE_CODE.renderType(type);
  JetPsiFactory psiFactory=JetPsiFactory(file);
  JetBinaryExpressionWithTypeRHS castExpression=(JetBinaryExpressionWithTypeRHS)psiFactory.createExpression("(" + element.getText() + ") as "+ renderedType);
  if (JetPsiUtil.areParenthesesUseless((JetParenthesizedExpression)castExpression.getLeft())) {
    castExpression=(JetBinaryExpressionWithTypeRHS)psiFactory.createExpression(element.getText() + " as " + renderedType);
  }
  JetParenthesizedExpression castExpressionInParentheses=(JetParenthesizedExpression)element.replace(psiFactory.createExpression("(" + castExpression.getText() + ")"));
  if (JetPsiUtil.areParenthesesUseless(castExpressionInParentheses)) {
    castExpressionInParentheses.replace(castExpression);
  }
  QuickFixUtil.shortenReferencesOfType(type,file);
}
