{
  if (firstPhase) {
    return Collections2.filter(descriptors,new Predicate<DeclarationDescriptor>(){
      @Override public boolean apply(      @Nullable DeclarationDescriptor descriptor){
        return (descriptor instanceof ClassDescriptor) || (descriptor instanceof NamespaceDescriptor);
      }
    }
);
  }
  Collection<? extends DeclarationDescriptor> filteredDescriptors;
  if (namespaceLevel) {
    filteredDescriptors=descriptors;
  }
 else {
    filteredDescriptors=Collections2.filter(descriptors,new Predicate<DeclarationDescriptor>(){
      @Override public boolean apply(      @Nullable DeclarationDescriptor descriptor){
        return (descriptor instanceof NamespaceDescriptor) || (descriptor instanceof ClassDescriptor) || (descriptor instanceof VariableDescriptor && ((VariableDescriptor)descriptor).isObjectDeclaration());
      }
    }
);
  }
  storeResolutionResult(descriptors,filteredDescriptors,referenceExpression,resolutionScope);
  return filteredDescriptors;
}
