{
  String referencedName=referenceExpression.getReferencedName();
  if (referencedName == null) {
    return Collections.emptyList();
  }
  List<DeclarationDescriptor> descriptors=Lists.newArrayList();
  NamespaceDescriptor namespaceDescriptor=outerScope.getNamespace(referencedName);
  if (namespaceDescriptor != null) {
    descriptors.add(namespaceDescriptor);
  }
  ClassifierDescriptor classifierDescriptor=outerScope.getClassifier(referencedName);
  if (classifierDescriptor != null) {
    descriptors.add(classifierDescriptor);
  }
  if (firstPhase) {
    descriptors.add(outerScope.getObjectDescriptor(referencedName));
  }
 else {
    descriptors.addAll(outerScope.getFunctions(referencedName));
    descriptors.addAll(outerScope.getProperties(referencedName));
    VariableDescriptor localVariable=outerScope.getLocalVariable(referencedName);
    if (localVariable != null) {
      descriptors.add(localVariable);
    }
  }
  return filterResolutionResult(descriptors,referenceExpression,outerScope,namespaceLevel);
}
