{
  boolean leftNullable=true;
  JetExpression rightExpr;
  if (element instanceof JetCallExpression) {
    receiver.put(JetTypeMapper.TYPE_OBJECT,v);
    JetCallExpression jetCallExpression=(JetCallExpression)element;
    JetExpression calleeExpression=jetCallExpression.getCalleeExpression();
    if (calleeExpression != null) {
      JetType leftType=codegen.getBindingContext().get(BindingContext.EXPRESSION_TYPE,calleeExpression);
      if (leftType != null)       leftNullable=leftType.isNullable();
    }
    rightExpr=arguments.get(0);
  }
 else {
    JetExpression leftExpr=arguments.get(0);
    leftNullable=codegen.getBindingContext().get(BindingContext.EXPRESSION_TYPE,leftExpr).isNullable();
    codegen.gen(leftExpr).put(JetTypeMapper.TYPE_OBJECT,v);
    rightExpr=arguments.get(1);
  }
  JetType rightType=codegen.getBindingContext().get(BindingContext.EXPRESSION_TYPE,rightExpr);
  codegen.gen(rightExpr).put(JetTypeMapper.TYPE_OBJECT,v);
  return codegen.generateEqualsForExpressionsOnStack(JetTokens.EQEQ,JetTypeMapper.TYPE_OBJECT,JetTypeMapper.TYPE_OBJECT,leftNullable,rightType.isNullable());
}
