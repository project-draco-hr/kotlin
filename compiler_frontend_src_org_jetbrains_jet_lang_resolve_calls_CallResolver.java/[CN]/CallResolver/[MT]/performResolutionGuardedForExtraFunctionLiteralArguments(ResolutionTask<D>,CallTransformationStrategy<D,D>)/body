{
  OverloadResolutionResultsImpl<D> results=performResolution(task,callTransformationStrategy);
  EnumSet<OverloadResolutionResults.Code> someFailed=EnumSet.of(OverloadResolutionResults.Code.MANY_FAILED_CANDIDATES,OverloadResolutionResults.Code.SINGLE_CANDIDATE_ARGUMENT_MISMATCH);
  if (someFailed.contains(results.getResultCode()) && !task.call.getFunctionLiteralArguments().isEmpty()) {
    Collection<ResolutionCandidate<D>> newCandidates=Lists.newArrayList();
    for (    ResolutionCandidate<D> candidate : task.getCandidates()) {
      newCandidates.add(ResolutionCandidate.create(candidate.getDescriptor()));
    }
    ResolutionTask<D> newContext=new ResolutionTask<D>(newCandidates,task.reference,TemporaryBindingTrace.create(task.trace),task.scope,new DelegatingCall(task.call){
      @NotNull @Override public List<JetExpression> getFunctionLiteralArguments(){
        return Collections.emptyList();
      }
    }
,task.expectedType,task.dataFlowInfo);
    OverloadResolutionResultsImpl<D> resultsWithFunctionLiteralsStripped=performResolution(newContext,callTransformationStrategy);
    if (resultsWithFunctionLiteralsStripped.isSuccess() || resultsWithFunctionLiteralsStripped.isAmbiguity()) {
      task.tracing.danglingFunctionLiteralArgumentSuspected(task.trace,task.call.getFunctionLiteralArguments());
    }
  }
  return results;
}
