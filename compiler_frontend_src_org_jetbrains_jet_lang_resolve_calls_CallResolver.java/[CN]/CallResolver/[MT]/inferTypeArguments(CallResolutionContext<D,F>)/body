{
  ResolvedCallImpl<D> candidateCall=context.candidateCall;
  D candidate=candidateCall.getCandidateDescriptor();
  ResolutionDebugInfo.Data debugInfo=context.trace.get(ResolutionDebugInfo.RESOLUTION_DEBUG_INFO,context.call.getCallElement());
  ConstraintsBuilder constraintsBuilder=new ConstraintsBuilderImpl();
  CallableDescriptor candidateWithFreshVariables=FunctionDescriptorUtil.alphaConvertTypeParameters(candidate);
  for (  TypeParameterDescriptor typeParameterDescriptor : candidateWithFreshVariables.getTypeParameters()) {
    constraintsBuilder.registerTypeVariable(typeParameterDescriptor,Variance.INVARIANT);
  }
  TypeSubstitutor substituteDontCare=ConstraintSystemWithPriorities.makeConstantSubstitutor(candidateWithFreshVariables.getTypeParameters(),ConstraintsBuilderImpl.DONT_CARE);
  for (  Map.Entry<ValueParameterDescriptor,ResolvedValueArgument> entry : candidateCall.getValueArguments().entrySet()) {
    ResolvedValueArgument resolvedValueArgument=entry.getValue();
    ValueParameterDescriptor valueParameterDescriptor=candidateWithFreshVariables.getValueParameters().get(entry.getKey().getIndex());
    for (    ValueArgument valueArgument : resolvedValueArgument.getArguments()) {
      if (JetPsiUtil.isFunctionLiteralWithoutDeclaredParameterTypes(valueArgument.getArgumentExpression()))       continue;
      boolean success=addConstraintForValueArgument(valueArgument,valueParameterDescriptor,substituteDontCare,constraintsBuilder,context);
      if (!success) {
        candidateCall.argumentHasNoType();
      }
    }
  }
  ReceiverDescriptor receiverArgument=candidateCall.getReceiverArgument();
  ReceiverDescriptor receiverParameter=candidateWithFreshVariables.getReceiverParameter();
  if (receiverArgument.exists() && receiverParameter.exists()) {
    constraintsBuilder.addSubtypingConstraint(receiverArgument.getType(),receiverParameter.getType(),ConstraintPosition.RECEIVER_POSITION);
  }
  ConstraintsBuilderImpl constraintsBuilderWithRightTypeParameters=new ConstraintsBuilderImpl(constraintsBuilder.hasTypeConstructorMismatch(),constraintsBuilder.getTypeConstructorMismatchConstraintPositions());
  for (  TypeParameterDescriptor typeParameterDescriptor : candidate.getTypeParameters()) {
    TypeConstraints typeConstraints=constraintsBuilder.getTypeConstraints(candidateWithFreshVariables.getTypeParameters().get(typeParameterDescriptor.getIndex()));
    constraintsBuilderWithRightTypeParameters.registerTypeVariable(typeParameterDescriptor,typeConstraints);
  }
  candidateCall.setConstraintsBuilder(constraintsBuilderWithRightTypeParameters);
  if (!constraintsBuilder.hasContradiction()) {
    candidateCall.setHasUnknownTypeParameters(true);
    return SUCCESS;
  }
 else {
    List<JetType> argumentTypes=Lists.newArrayList();
    ResolutionStatus argumentsStatus=checkAllValueArguments(context,argumentTypes);
    JetType receiverType=candidateCall.getReceiverArgument().exists() ? candidateCall.getReceiverArgument().getType() : null;
    reportTypeInferenceFailed(context.trace,context.call,InferenceErrorData.create(candidate,constraintsBuilderWithRightTypeParameters,argumentTypes,receiverType));
    return TYPE_INFERENCE_ERROR.combine(argumentsStatus);
  }
}
