{
  if (candidates.size() != 1) {
    Set<ResolvedCall<D>> cleanCandidates=Sets.newLinkedHashSet(candidates);
    boolean allClean=true;
    for (Iterator<ResolvedCall<D>> iterator=cleanCandidates.iterator(); iterator.hasNext(); ) {
      ResolvedCall<D> candidate=iterator.next();
      if (candidate.isDirty()) {
        iterator.remove();
        allClean=false;
      }
    }
    if (cleanCandidates.isEmpty()) {
      cleanCandidates=candidates;
    }
    ResolvedCall<D> maximallySpecific=overloadingConflictResolver.findMaximallySpecific(cleanCandidates,false);
    if (maximallySpecific != null) {
      return OverloadResolutionResults.success(maximallySpecific);
    }
    ResolvedCall<D> maximallySpecificGenericsDiscriminated=overloadingConflictResolver.findMaximallySpecific(cleanCandidates,true);
    if (maximallySpecificGenericsDiscriminated != null) {
      return OverloadResolutionResults.success(maximallySpecificGenericsDiscriminated);
    }
    Set<ResolvedCall<D>> noOverrides=OverridingUtil.filterOverrides(candidates,MAP_TO_RESULT);
    if (allClean) {
      tracing.ambiguity(trace,noOverrides);
    }
    tracing.recordAmbiguity(trace,noOverrides);
    return OverloadResolutionResults.ambiguity(noOverrides);
  }
 else {
    ResolvedCall<D> result=candidates.iterator().next();
    TemporaryBindingTrace temporaryTrace=result.getTrace();
    temporaryTrace.commit();
    return OverloadResolutionResults.success(result);
  }
}
