{
  List<D> fromSourcesGoesFirst=sortedBy(candidateSet,new Function1<D,Integer>(){
    @Override public Integer invoke(    D d){
      return DescriptorToSourceUtils.descriptorToDeclaration(transform.invoke(d)) != null ? 0 : 1;
    }
  }
);
  return HashSetUtil.linkedHashSet(fromSourcesGoesFirst,new EqualityPolicy<D>(){
    @Override public int getHashCode(    D d){
      return DescriptorUtils.getFqName(transform.invoke(d).getContainingDeclaration()).hashCode();
    }
    @Override public boolean isEqual(    D d1,    D d2){
      CallableDescriptor f=transform.invoke(d1).getOriginal();
      CallableDescriptor g=transform.invoke(d2).getOriginal();
      boolean ignoreReturnType=(DescriptorToSourceUtils.descriptorToDeclaration(f) == null) != (DescriptorToSourceUtils.descriptorToDeclaration(g) == null);
      return DescriptorEquivalenceForOverrides.INSTANCE.areCallableDescriptorsEquivalent(f,g,ignoreReturnType);
    }
  }
);
}
