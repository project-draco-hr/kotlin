{
  DeclarationDescriptor owner=descriptor.getContainingDeclaration();
  if (owner instanceof PackageFragmentDescriptor) {
    return new ClassId(((PackageFragmentDescriptor)owner).getFqName(),descriptor.getName());
  }
 else   if (owner instanceof ClassDescriptor) {
    return getClassId((ClassDescriptor)owner).createNestedClassId(descriptor.getName());
  }
 else {
    throw new IllegalStateException("Illegal container: " + descriptor);
  }
}
