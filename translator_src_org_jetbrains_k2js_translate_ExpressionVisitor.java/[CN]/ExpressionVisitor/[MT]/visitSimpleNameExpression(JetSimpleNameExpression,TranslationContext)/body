{
  String referencedName=expression.getReferencedName();
  JsName jsName=context.enclosingScope().findExistingName(referencedName);
  if (jsName == null) {
    throw new AssertionError("Unindentified name " + expression.getReferencedName());
  }
  if (context.namespaceScope().ownsName(jsName)) {
    return context.getNamespaceQualifiedReference(jsName);
  }
  return jsName.makeRef();
}
