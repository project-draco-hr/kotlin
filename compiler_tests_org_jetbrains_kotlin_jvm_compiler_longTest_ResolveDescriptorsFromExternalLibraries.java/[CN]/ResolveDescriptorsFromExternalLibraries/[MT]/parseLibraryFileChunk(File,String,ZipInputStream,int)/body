{
  Disposable junk=new Disposable(){
    @Override public void dispose(){
    }
  }
;
  JetCoreEnvironment jetCoreEnvironment;
  if (jar != null) {
    jetCoreEnvironment=JetCoreEnvironment.createForTests(junk,JetTestUtils.compilerConfigurationForTests(ConfigurationKind.JDK_AND_ANNOTATIONS,TestJdkKind.MOCK_JDK,JetTestUtils.getAnnotationsJar(),jar),EnvironmentConfigFiles.JVM_CONFIG_FILES);
  }
 else {
    CompilerConfiguration configuration=JetTestUtils.compilerConfigurationForTests(ConfigurationKind.JDK_AND_ANNOTATIONS,TestJdkKind.FULL_JDK);
    jetCoreEnvironment=JetCoreEnvironment.createForTests(junk,configuration,EnvironmentConfigFiles.JVM_CONFIG_FILES);
    if (!findRtJar().equals(jar)) {
      throw new RuntimeException("rt.jar mismatch: " + jar + ", "+ findRtJar());
    }
  }
  InjectorForLazyResolveWithJava injector=InjectorForLazyResolveWithJavaUtil.create(jetCoreEnvironment.getProject(),new BindingTraceContext(),false);
  ModuleDescriptor moduleDescriptor=injector.getResolveSession().getModuleDescriptor();
  boolean hasErrors;
  try {
    hasErrors=false;
    for (int count=0; count < classesPerChunk; ) {
      ZipEntry entry=zip.getNextEntry();
      if (entry == null) {
        break;
      }
      if (count == 0) {
        System.err.println("chunk from " + entry.getName());
      }
      System.err.println(entry.getName());
      String entryName=entry.getName();
      if (!entryName.endsWith(".class")) {
        continue;
      }
      if (entryName.matches("(.*/|)package-info\\.class")) {
        continue;
      }
      if (entryName.contains("$")) {
        continue;
      }
      String className=entryName.substring(0,entryName.length() - ".class".length()).replace("/",".");
      try {
        ClassDescriptor clazz=resolveTopLevelClass(moduleDescriptor,new FqName(className));
        if (clazz == null) {
          throw new IllegalStateException("class not found by name " + className + " in "+ libDescription);
        }
        clazz.getDefaultType().getMemberScope().getAllDescriptors();
      }
 catch (      Exception e) {
        System.err.println("failed to resolve " + className);
        e.printStackTrace();
        hasErrors=true;
      }
      ++count;
    }
  }
  finally {
    Disposer.dispose(junk);
  }
  return hasErrors;
}
