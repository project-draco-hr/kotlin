{
  ProtoBuf.Property.Builder builder=ProtoBuf.Property.newBuilder();
  DescriptorSerializer local=createChildSerializer();
  boolean hasGetter=false;
  boolean hasSetter=false;
  boolean lateInit=descriptor.isLateInit();
  boolean isConst=descriptor.isConst();
  ConstantValue<?> compileTimeConstant=descriptor.getCompileTimeInitializer();
  boolean hasConstant=!(compileTimeConstant == null || compileTimeConstant instanceof NullValue);
  boolean hasAnnotations=!descriptor.getAnnotations().getAllAnnotations().isEmpty();
  int propertyFlags=Flags.getAccessorFlags(hasAnnotations,descriptor.getVisibility(),descriptor.getModality(),false);
  PropertyGetterDescriptor getter=descriptor.getGetter();
  if (getter != null) {
    hasGetter=true;
    int accessorFlags=getAccessorFlags(getter);
    if (accessorFlags != propertyFlags) {
      builder.setGetterFlags(accessorFlags);
    }
  }
  PropertySetterDescriptor setter=descriptor.getSetter();
  if (setter != null) {
    hasSetter=true;
    int accessorFlags=getAccessorFlags(setter);
    if (accessorFlags != propertyFlags) {
      builder.setSetterFlags(accessorFlags);
    }
    if (!setter.isDefault()) {
      for (      ValueParameterDescriptor valueParameterDescriptor : setter.getValueParameters()) {
        builder.setSetterValueParameter(local.valueParameter(valueParameterDescriptor));
      }
    }
  }
  int flags=Flags.getPropertyFlags(hasAnnotations,descriptor.getVisibility(),descriptor.getModality(),descriptor.getKind(),descriptor.isVar(),hasGetter,hasSetter,hasConstant,isConst,lateInit);
  if (flags != builder.getFlags()) {
    builder.setFlags(flags);
  }
  builder.setName(getSimpleNameIndex(descriptor.getName()));
  if (useTypeTable()) {
    builder.setReturnTypeId(local.typeId(descriptor.getType()));
  }
 else {
    builder.setReturnType(local.type(descriptor.getType()));
  }
  for (  TypeParameterDescriptor typeParameterDescriptor : descriptor.getTypeParameters()) {
    builder.addTypeParameter(local.typeParameter(typeParameterDescriptor));
  }
  ReceiverParameterDescriptor receiverParameter=descriptor.getExtensionReceiverParameter();
  if (receiverParameter != null) {
    if (useTypeTable()) {
      builder.setReceiverTypeId(local.typeId(receiverParameter.getType()));
    }
 else {
      builder.setReceiverType(local.type(receiverParameter.getType()));
    }
  }
  extension.serializeProperty(descriptor,builder);
  return builder;
}
