{
  ProtoBuf.Callable.Builder builder=ProtoBuf.Callable.newBuilder();
  DescriptorSerializer local=createChildSerializer();
  boolean hasGetter=false;
  boolean hasSetter=false;
  boolean hasConstant=false;
  boolean lateInit=false;
  boolean isConst=false;
  boolean isOperator=false;
  if (descriptor instanceof FunctionDescriptor) {
    isOperator=((FunctionDescriptor)descriptor).isOperator();
  }
  if (descriptor instanceof PropertyDescriptor) {
    PropertyDescriptor propertyDescriptor=(PropertyDescriptor)descriptor;
    lateInit=propertyDescriptor.isLateInit();
    isConst=propertyDescriptor.isConst();
    int propertyFlags=Flags.getAccessorFlags(hasAnnotations(propertyDescriptor),propertyDescriptor.getVisibility(),propertyDescriptor.getModality(),false);
    PropertyGetterDescriptor getter=propertyDescriptor.getGetter();
    if (getter != null) {
      hasGetter=true;
      int accessorFlags=getAccessorFlags(getter);
      if (accessorFlags != propertyFlags) {
        builder.setGetterFlags(accessorFlags);
      }
    }
    PropertySetterDescriptor setter=propertyDescriptor.getSetter();
    if (setter != null) {
      hasSetter=true;
      int accessorFlags=getAccessorFlags(setter);
      if (accessorFlags != propertyFlags) {
        builder.setSetterFlags(accessorFlags);
      }
      if (!setter.isDefault()) {
        for (        ValueParameterDescriptor valueParameterDescriptor : setter.getValueParameters()) {
          builder.addValueParameter(local.valueParameter(valueParameterDescriptor));
        }
      }
    }
    ConstantValue<?> compileTimeConstant=propertyDescriptor.getCompileTimeInitializer();
    hasConstant=!(compileTimeConstant == null || compileTimeConstant instanceof NullValue);
  }
  boolean hasAnnotations=(descriptor instanceof PropertyDescriptor) ? !descriptor.getAnnotations().getAllAnnotations().isEmpty() : hasAnnotations(descriptor);
  builder.setFlags(Flags.getCallableFlags(hasAnnotations,descriptor.getVisibility(),descriptor.getModality(),descriptor.getKind(),callableKind(descriptor),hasGetter,hasSetter,hasConstant,lateInit,isConst,isOperator));
  for (  TypeParameterDescriptor typeParameterDescriptor : descriptor.getTypeParameters()) {
    builder.addTypeParameter(local.typeParameter(typeParameterDescriptor));
  }
  ReceiverParameterDescriptor receiverParameter=descriptor.getExtensionReceiverParameter();
  if (receiverParameter != null) {
    builder.setReceiverType(local.type(receiverParameter.getType()));
  }
  builder.setName(getSimpleNameIndex(descriptor.getName()));
  for (  ValueParameterDescriptor valueParameterDescriptor : descriptor.getValueParameters()) {
    builder.addValueParameter(local.valueParameter(valueParameterDescriptor));
  }
  builder.setReturnType(local.type(descriptor.getReturnType()));
  extension.serializeCallable(descriptor,builder);
  return builder;
}
