{
  ProtoBuf.Package.Builder builder=ProtoBuf.Package.newBuilder();
  for (  DeclarationDescriptor declaration : sort(members)) {
    if (declaration instanceof PropertyDescriptor) {
      builder.addProperty(propertyProto((PropertyDescriptor)declaration));
    }
 else     if (declaration instanceof FunctionDescriptor) {
      builder.addFunction(functionProto((FunctionDescriptor)declaration));
    }
 else     if (declaration instanceof TypeAliasDescriptor) {
      builder.addTypeAlias(typeAliasProto((TypeAliasDescriptor)declaration));
    }
  }
  ProtoBuf.TypeTable typeTableProto=typeTable.serialize();
  if (typeTableProto != null) {
    builder.setTypeTable(typeTableProto);
  }
  extension.serializePackage(builder);
  return builder;
}
