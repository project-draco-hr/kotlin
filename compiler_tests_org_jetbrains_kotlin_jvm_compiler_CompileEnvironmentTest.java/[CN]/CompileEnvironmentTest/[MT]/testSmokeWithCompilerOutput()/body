{
  File tempDir=FileUtil.createTempDirectory("compilerTest","compilerTest");
  try {
    File out=new File(tempDir,"out");
    File stdlib=ForTestCompileRuntime.runtimeJarForTests();
    File jdkAnnotations=JetTestUtils.getJdkAnnotationsJar();
    ExitCode exitCode=new K2JVMCompiler().exec(System.out,JetTestUtils.getTestDataPathBase() + "/compiler/smoke/Smoke.kt","-d",out.getAbsolutePath(),"-no-stdlib","-classpath",stdlib.getAbsolutePath(),"-no-jdk-annotations","-annotations",jdkAnnotations.getAbsolutePath());
    Assert.assertEquals(ExitCode.OK,exitCode);
    assertEquals(2,out.listFiles().length);
    assertEquals(1,out.listFiles()[0].listFiles().length);
    assertEquals(2,out.listFiles()[1].listFiles().length);
  }
  finally {
    FileUtil.delete(tempDir);
  }
}
