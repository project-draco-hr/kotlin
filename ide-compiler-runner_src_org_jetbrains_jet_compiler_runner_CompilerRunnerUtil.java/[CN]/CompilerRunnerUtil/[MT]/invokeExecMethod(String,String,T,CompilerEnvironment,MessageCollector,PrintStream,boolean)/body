{
  ClassLoader loader=usePreloader ? getOrCreatePreloader(environment.getKotlinPaths(),messageCollector) : getOrCreateClassLoader(environment.getKotlinPaths(),messageCollector);
  Class<?> argumentsClass=Class.forName(argumentsClassName,true,loader);
  Object argumentsInLoader=copyObject(arguments,loader);
  Class<?> kompiler=Class.forName(compilerClassName,true,loader);
  Method exec=kompiler.getMethod("exec",PrintStream.class,argumentsClass);
  return exec.invoke(kompiler.newInstance(),out,argumentsInLoader);
}
