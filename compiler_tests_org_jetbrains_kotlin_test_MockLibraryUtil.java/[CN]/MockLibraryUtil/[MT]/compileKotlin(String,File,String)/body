{
  try {
    ByteArrayOutputStream outStream=new ByteArrayOutputStream();
    Class<?> compilerClass=getCompilerClass();
    Object compilerObject=compilerClass.newInstance();
    Method execMethod=compilerClass.getMethod("exec",PrintStream.class,String[].class);
    List<String> classpath=new ArrayList<String>();
    classpath.add(sourcesPath);
    Collections.addAll(classpath,extraClasspath);
    String newClasspath=StringUtil.join(classpath,File.pathSeparator);
    Enum<?> invocationResult=(Enum<?>)execMethod.invoke(compilerObject,new PrintStream(outStream),new String[]{sourcesPath,"-d",outDir.getAbsolutePath(),"-classpath",newClasspath});
    assertEquals(new String(outStream.toByteArray()),ExitCode.OK.name(),invocationResult.name());
  }
 catch (  Throwable e) {
    throw UtilsPackage.rethrow(e);
  }
}
