{
  IElementType elementType=expression.getNode().getElementType();
  String text=expression.getNode().getText();
  CompileTimeConstant<?> value;
  if (elementType == JetNodeTypes.INTEGER_CONSTANT) {
    value=getIntegerValue(text,expectedType);
  }
 else   if (elementType == JetNodeTypes.FLOAT_CONSTANT) {
    value=getFloatValue(text,expectedType);
  }
 else   if (elementType == JetNodeTypes.BOOLEAN_CONSTANT) {
    value=getBooleanValue(text,expectedType);
  }
 else   if (elementType == JetNodeTypes.CHARACTER_CONSTANT) {
    value=getCharValue(text,expectedType);
  }
 else   if (elementType == JetNodeTypes.NULL) {
    value=getNullValue(expectedType);
  }
 else {
    throw new IllegalArgumentException("Unsupported constant: " + expression);
  }
  return value;
}
