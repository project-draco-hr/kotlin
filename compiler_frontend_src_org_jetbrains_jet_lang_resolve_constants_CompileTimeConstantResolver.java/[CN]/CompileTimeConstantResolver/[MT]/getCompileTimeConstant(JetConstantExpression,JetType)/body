{
  IElementType elementType=expression.getNode().getElementType();
  CompileTimeConstant<?> value;
  if (elementType == JetNodeTypes.INTEGER_CONSTANT) {
    value=getIntegerValue(expression,expectedType);
  }
 else   if (elementType == JetNodeTypes.FLOAT_CONSTANT) {
    value=getFloatValue(expression,expectedType);
  }
 else   if (elementType == JetNodeTypes.BOOLEAN_CONSTANT) {
    value=getBooleanValue(expression,expectedType);
  }
 else   if (elementType == JetNodeTypes.CHARACTER_CONSTANT) {
    value=getCharValue(expression,expectedType);
  }
 else   if (elementType == JetNodeTypes.NULL) {
    value=getNullValue(expression,expectedType);
  }
 else {
    throw new IllegalArgumentException("Unsupported constant: " + expression);
  }
  return value;
}
