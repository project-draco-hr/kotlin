{
  if (!noExpectedTypeOrError(expectedType) && !JetTypeChecker.INSTANCE.isSubtypeOf(builtIns.getCharType(),expectedType)) {
    return reportError(CONSTANT_EXPECTED_TYPE_MISMATCH.on(expression,"character",expectedType));
  }
  if (constant != null) {
    return false;
  }
  CompileTimeConstant<?> compileTimeConstant=parseCharValue(expression);
  if (compileTimeConstant instanceof ErrorCharValueWithDiagnostic) {
    return reportError(((ErrorCharValueWithDiagnostic)compileTimeConstant).getDiagnostic());
  }
  return false;
}
