{
  CompileTimeConstant<?> error=checkNativeType(text,expectedType,"character",standardLibrary.getCharType());
  if (error != null) {
    return error;
  }
  if (text.charAt(0) != '\'' || text.charAt(text.length() - 1) != '\'') {
    return new ErrorValue("Incorrect character literal");
  }
  text=text.substring(1,text.length() - 1);
  if (text.length() == 0) {
    return new ErrorValue("Empty character literal");
  }
  if (text.charAt(0) != '\\') {
    if (text.length() == 1) {
      return new CharValue(text.charAt(0));
    }
    return new ErrorValue("Too many characters in a character literal '" + text + "'");
  }
  return escapedStringToCharValue(text);
}
