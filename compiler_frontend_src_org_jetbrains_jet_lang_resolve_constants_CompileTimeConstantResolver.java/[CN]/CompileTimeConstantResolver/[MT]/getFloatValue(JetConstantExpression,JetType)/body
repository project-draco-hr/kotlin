{
  String text=expression.getText();
  try {
    if (noExpectedTypeOrUnitOrError(expectedType) || JetTypeChecker.INSTANCE.isSubtypeOf(builtIns.getDoubleType(),expectedType)) {
      return new DoubleValue(Double.parseDouble(text));
    }
 else     if (JetTypeChecker.INSTANCE.isSubtypeOf(builtIns.getFloatType(),expectedType)) {
      return new FloatValue(Float.parseFloat(text));
    }
 else {
      return ErrorValue.create(CONSTANT_EXPECTED_TYPE_MISMATCH.on(expression,"floating-point",expectedType));
    }
  }
 catch (  NumberFormatException e) {
    return ErrorValue.create(FLOAT_LITERAL_OUT_OF_RANGE.on(expression));
  }
}
