{
  VirtualFile outDir=context.getModuleOutputDirectory(module);
  String outFile=outDir == null ? null : outDir.getPath() + "/" + module.getName()+ ".js";
  String[] commandLineArgs=constructArguments(module,outFile);
  Object rc=invokeExecMethod(environment,out,context,commandLineArgs,"org.jetbrains.jet.cli.js.K2JSCompiler");
  if (outDir != null && !ApplicationManager.getApplication().isUnitTestMode()) {
    outDir.refresh(false,true);
  }
  return CompilerUtils.getReturnCodeFromObject(rc);
}
