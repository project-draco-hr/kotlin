{
  WritableScope constructorScope=new WritableScopeImpl(declaringScope,declaringScope.getContainingDeclaration(),trace.getErrorHandler()).setDebugName("Inner scope for constructor");
  for (  PropertyDescriptor propertyDescriptor : ((MutableClassDescriptor)descriptor.getContainingDeclaration()).getProperties()) {
    constructorScope.addPropertyDescriptorByFieldName("$" + propertyDescriptor.getName(),propertyDescriptor);
  }
  constructorScope.setThisType(descriptor.getContainingDeclaration().getDefaultType());
  for (  ValueParameterDescriptor valueParameterDescriptor : descriptor.getValueParameters()) {
    JetParameter parameter=(JetParameter)trace.getBindingContext().get(BindingContext.DESCRIPTOR_TO_DECLARATION,valueParameterDescriptor);
    if (parameter.getValOrVarNode() == null || !primary) {
      constructorScope.addVariableDescriptor(valueParameterDescriptor);
    }
  }
  constructorScope.addLabeledDeclaration(descriptor);
  return constructorScope;
}
