{
  if (!(file instanceof JetFile)) {
    return Result.CONTINUE;
  }
  if (jetLTTyped) {
    jetLTTyped=false;
    JetLtGtTypingUtils.handleJetAutoCloseLT(editor);
    return Result.STOP;
  }
  if (c == '{' && CodeInsightSettings.getInstance().AUTOINSERT_PAIR_BRACKET) {
    PsiDocumentManager.getInstance(project).commitAllDocuments();
    int offset=editor.getCaretModel().getOffset();
    PsiElement previousElement=file.findElementAt(offset - 1);
    if (previousElement instanceof LeafPsiElement && ((LeafPsiElement)previousElement).getElementType() == JetTokens.LONG_TEMPLATE_ENTRY_START) {
      editor.getDocument().insertString(offset,"}");
      return Result.STOP;
    }
  }
  return Result.CONTINUE;
}
