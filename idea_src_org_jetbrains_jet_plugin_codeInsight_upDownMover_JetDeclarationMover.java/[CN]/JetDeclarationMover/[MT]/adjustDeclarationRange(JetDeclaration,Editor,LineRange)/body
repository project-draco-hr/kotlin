{
  Document doc=editor.getDocument();
  TextRange textRange=declaration.getTextRange();
  if (doc.getTextLength() < textRange.getEndOffset())   return null;
  int startLine=editor.offsetToLogicalPosition(textRange.getStartOffset()).line;
  int endLine=editor.offsetToLogicalPosition(textRange.getEndOffset()).line + 1;
  if (startLine == lineRange.startLine || startLine == lineRange.endLine || endLine == lineRange.startLine || endLine == lineRange.endLine) {
    return new LineRange(startLine,endLine);
  }
  TextRange lineTextRange=new TextRange(doc.getLineStartOffset(lineRange.startLine),doc.getLineEndOffset(lineRange.endLine));
  for (  PsiElement anchor : getDeclarationAnchors(declaration)) {
    TextRange suspectTextRange=anchor.getTextRange();
    if (suspectTextRange != null && lineTextRange.intersects(suspectTextRange))     return new LineRange(startLine,endLine);
  }
  return null;
}
