{
  PsiElement closingBrace=getStandaloneClosingBrace(file,editor);
  if (closingBrace == null)   return BraceStatus.NOT_FOUND;
  PsiElement blockLikeElement=closingBrace.getParent();
  if (!(blockLikeElement instanceof JetBlockExpression))   return BraceStatus.NOT_MOVABLE;
  PsiElement blockParent=blockLikeElement.getParent();
  if (blockParent instanceof JetWhenEntry)   return BraceStatus.NOT_FOUND;
  if (PsiTreeUtil.instanceOf(blockParent,FUNCTIONLIKE_ELEMENT_CLASSES))   return BraceStatus.NOT_FOUND;
  PsiElement enclosingExpression=PsiTreeUtil.getParentOfType(blockLikeElement,JetExpression.class);
  if (enclosingExpression instanceof JetDoWhileExpression)   return BraceStatus.NOT_MOVABLE;
  if (enclosingExpression instanceof JetIfExpression) {
    JetIfExpression ifExpression=(JetIfExpression)enclosingExpression;
    if (blockLikeElement == ifExpression.getThen() && ifExpression.getElse() != null)     return BraceStatus.NOT_MOVABLE;
  }
  return down ? checkForMovableDownClosingBrace(closingBrace,blockLikeElement,editor,info) : checkForMovableUpClosingBrace(closingBrace,blockLikeElement,editor,info);
}
