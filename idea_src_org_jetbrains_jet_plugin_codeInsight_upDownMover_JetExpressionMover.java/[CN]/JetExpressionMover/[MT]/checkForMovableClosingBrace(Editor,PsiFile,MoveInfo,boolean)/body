{
  PsiElement closingBrace=getStandaloneClosingBrace(file,editor);
  if (closingBrace == null)   return null;
  PsiElement blockLikeElement=closingBrace.getParent();
  if (!(blockLikeElement instanceof JetBlockExpression))   return false;
  if (blockLikeElement.getParent() instanceof JetWhenEntry)   return false;
  PsiElement enclosingExpression=PsiTreeUtil.getParentOfType(blockLikeElement,JetExpression.class);
  if (enclosingExpression instanceof JetDoWhileExpression)   return false;
  if (enclosingExpression instanceof JetIfExpression) {
    JetIfExpression ifExpression=(JetIfExpression)enclosingExpression;
    if (blockLikeElement == ifExpression.getThen() && ifExpression.getElse() != null)     return false;
  }
  return down ? checkForMovableDownClosingBrace(closingBrace,blockLikeElement,editor,info) : checkForMovableUpClosingBrace(closingBrace,blockLikeElement,editor,info);
}
