{
  String isTestMethod=targetTestFramework.getIsTestMethodCondition("method");
  String[] methodText=new String[]{"public static void allTestsPresent(Class<?> clazz, File testDataDir, boolean recursive) {","    Set<String> methodNames = new HashSet<String>();","    for (Method method : clazz.getDeclaredMethods()) {","        if (" + isTestMethod + ") {","            methodNames.add(method.getName().toLowerCase() + \"." + testDataFileExtension + "\");","        }","    }","    for (File file : testDataDir.listFiles()) {","        if (file.isDirectory()) {","            if (recursive) {","                allTestsPresent(clazz, file, recursive);","            }","        }","        else {","            String name = file.getName();","            if (name.endsWith(\"." + testDataFileExtension + "\") && !methodNames.contains(\"test\" + name.toLowerCase())) {","                Assert.fail(\"Test data file missing from the generated test class: \" + file + \"\\nPlease re-run the generator: " + generatorName + "\");","            }","        }","    }","}"};
  for (  String s : methodText) {
    p.println(s);
  }
}
