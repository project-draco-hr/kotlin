{
  if (klass.isArray() && !klass.getComponentType().isPrimitive()) {
    Signature signature=new ArraySignature(klass);
    map.put(klass,signature);
    return signature;
  }
  JetClass annotation=(JetClass)klass.getAnnotation(JetClass.class);
  if (annotation != null) {
    String value=annotation.signature();
    if (value != null) {
      Class enclosingClass=klass.getEnclosingClass();
      Signature signature=new Signature(klass);
      map.put(klass,signature);
      parse(value,signature);
      signature.afterParse();
      return signature;
    }
  }
  return getGenericSignature(klass);
}
