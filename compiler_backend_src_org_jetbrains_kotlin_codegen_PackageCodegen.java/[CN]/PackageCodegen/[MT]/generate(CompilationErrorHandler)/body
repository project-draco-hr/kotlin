{
  List<JvmSerializationBindings> bindings=new ArrayList<JvmSerializationBindings>(files.size() + 1);
  Map<CallableMemberDescriptor,Runnable> generateCallableMemberTasks=new HashMap<CallableMemberDescriptor,Runnable>();
  for (  JetFile file : files) {
    ProgressIndicatorAndCompilationCanceledStatus.checkCanceled();
    try {
      ClassBuilder builder=generateFile(file,generateCallableMemberTasks);
      if (builder != null) {
        bindings.add(builder.getSerializationBindings());
      }
    }
 catch (    ProcessCanceledException e) {
      throw e;
    }
catch (    Throwable e) {
      VirtualFile vFile=file.getVirtualFile();
      errorHandler.reportException(e,vFile == null ? "no file" : vFile.getUrl());
      DiagnosticUtils.throwIfRunningOnServer(e);
      if (ApplicationManager.getApplication().isInternal()) {
        e.printStackTrace();
      }
    }
  }
  generateDelegationsToPreviouslyCompiled(generateCallableMemberTasks);
  if (!generateCallableMemberTasks.isEmpty()) {
    generatePackageFacadeClass(generateCallableMemberTasks,bindings);
  }
}
