{
  if (state.getClassBuilderMode() != ClassBuilderMode.FULL) {
    return;
  }
  for (  JetFile file : files) {
    if (file.isScript())     return;
  }
  DescriptorSerializer serializer=DescriptorSerializer.createTopLevel(new JvmSerializerExtension(bindings,state.getTypeMapper()));
  Collection<PackageFragmentDescriptor> packageFragments=Lists.newArrayList();
  ContainerUtil.addIfNotNull(packageFragments,packageFragment);
  ContainerUtil.addIfNotNull(packageFragments,compiledPackageFragment);
  ProtoBuf.Package packageProto=serializer.packageProtoWithoutDescriptors().build();
  AnnotationVisitor av=v.newAnnotation(asmDescByFqNameWithoutInnerClasses(JvmAnnotationNames.KOTLIN_PACKAGE),true);
  JvmCodegenUtil.writeAbiVersion(av);
  AnnotationVisitor array=av.visitArray(JvmAnnotationNames.DATA_FIELD_NAME);
  for (  String string : BitEncoding.encodeBytes(serializer.serialize(packageProto))) {
    array.visit(null,string);
  }
  array.visitEnd();
  av.visitEnd();
}
