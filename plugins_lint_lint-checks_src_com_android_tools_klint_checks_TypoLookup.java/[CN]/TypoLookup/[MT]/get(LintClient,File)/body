{
  if (!xmlFile.exists()) {
    client.log(null,"The typo database file %1$s does not exist",xmlFile);
    return null;
  }
  String name=xmlFile.getName();
  if (LintUtils.endsWith(name,DOT_XML)) {
    name=name.substring(0,name.length() - DOT_XML.length());
  }
  File cacheDir=client.getCacheDir(true);
  if (cacheDir == null) {
    cacheDir=xmlFile.getParentFile();
  }
  File binaryData=new File(cacheDir,name + '-' + BINARY_FORMAT_VERSION+ ".bin");
  if (DEBUG_FORCE_REGENERATE_BINARY) {
    System.err.println("\nTemporarily regenerating binary data unconditionally \nfrom " + xmlFile + "\nto "+ binaryData);
    if (!createCache(client,xmlFile,binaryData)) {
      return null;
    }
  }
 else   if (!binaryData.exists() || binaryData.lastModified() < xmlFile.lastModified()) {
    if (!createCache(client,xmlFile,binaryData)) {
      return null;
    }
  }
  if (!binaryData.exists()) {
    client.log(null,"The typo database file %1$s does not exist",binaryData);
    return null;
  }
  return new TypoLookup(client,xmlFile,binaryData);
}
