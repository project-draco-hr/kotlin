{
  final File tmpFile=new File(getTestDataDirectory(),baseName + ".tmp");
  final File expectedFile=new File(getTestDataDirectory(),baseName + ".expected");
  if (!expectedFile.isFile()) {
    Files.write(content,tmpFile,Charsets.UTF_8);
    fail("No .expected file " + expectedFile);
  }
 else {
    final String goldContent=Files.toString(expectedFile,UTF_8);
    if (!goldContent.equals(content.toString())) {
      Files.write(content,tmpFile,Charsets.UTF_8);
      fail(".tmp and .expected files differ, tmp file: " + tmpFile);
    }
    tmpFile.delete();
  }
}
