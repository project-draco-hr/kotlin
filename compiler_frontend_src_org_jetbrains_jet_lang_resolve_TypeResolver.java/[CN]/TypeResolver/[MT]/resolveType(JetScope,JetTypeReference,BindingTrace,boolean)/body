{
  JetType cachedType=trace.getBindingContext().get(BindingContext.TYPE,typeReference);
  if (cachedType != null)   return cachedType;
  final List<AnnotationDescriptor> annotations=annotationResolver.getResolvedAnnotations(typeReference.getAnnotations(),trace);
  JetTypeElement typeElement=typeReference.getTypeElement();
  JetType type=resolveTypeElement(scope,annotations,typeElement,trace,checkBounds);
  trace.record(BindingContext.TYPE,typeReference,type);
  trace.record(BindingContext.TYPE_RESOLUTION_SCOPE,typeReference,scope);
  return type;
}
