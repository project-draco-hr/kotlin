{
  JetType cachedType=c.trace.getBindingContext().get(BindingContext.TYPE,typeReference);
  if (cachedType != null)   return type(cachedType);
  List<AnnotationDescriptor> annotations=annotationResolver.getResolvedAnnotations(typeReference.getAnnotations(),c.trace);
  JetTypeElement typeElement=typeReference.getTypeElement();
  PossiblyBareType type=resolveTypeElement(c,annotations,typeElement);
  if (!type.isBare()) {
    c.trace.record(BindingContext.TYPE,typeReference,type.getActualType());
  }
  c.trace.record(BindingContext.TYPE_RESOLUTION_SCOPE,typeReference,c.scope);
  return type;
}
