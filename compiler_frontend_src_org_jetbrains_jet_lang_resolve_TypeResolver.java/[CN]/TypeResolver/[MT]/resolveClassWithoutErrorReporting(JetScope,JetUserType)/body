{
  JetSimpleNameExpression expression=userType.getReferenceExpression();
  if (expression == null) {
    return null;
  }
  String referencedName=expression.getReferencedName();
  if (referencedName == null) {
    return null;
  }
  ClassifierDescriptor classifierDescriptor;
  if (userType.isAbsoluteInRootNamespace()) {
    classifierDescriptor=JetModuleUtil.getRootNamespaceType(userType).getMemberScope().getClassifier(referencedName);
    trace.record(BindingContext.RESOLUTION_SCOPE,userType.getReferenceExpression(),JetModuleUtil.getRootNamespaceType(userType).getMemberScope());
  }
 else {
    JetUserType qualifier=userType.getQualifier();
    if (qualifier != null) {
      scope=resolveClassLookupScope(scope,qualifier);
    }
    if (scope == null) {
      return ErrorUtils.getErrorClass();
    }
    classifierDescriptor=scope.getClassifier(referencedName);
    trace.record(BindingContext.RESOLUTION_SCOPE,userType.getReferenceExpression(),scope);
  }
  return classifierDescriptor;
}
