{
  List<Token> allTokens=Lists.newArrayList();
  for (  String fileName : FILE_NAMES_IN_ORDER) {
    File file=new File(grammarDir,fileName + "." + GRAMMAR_EXTENSION);
    used.add(file);
    String text=FileUtil.loadFile(file,true);
    StringBuilder textWithMarkedDeclarations=markDeclarations(text);
    List<Token> tokens=tokenize(createLexer(file.getPath(),textWithMarkedDeclarations));
    allTokens.addAll(tokens);
  }
  return allTokens;
}
