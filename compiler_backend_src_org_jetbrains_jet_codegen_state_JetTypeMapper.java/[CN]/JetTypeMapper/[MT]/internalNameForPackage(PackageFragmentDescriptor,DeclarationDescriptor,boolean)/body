{
  JetScope packageScope=packageFragment.getMemberScope();
  if (!(packageFragment instanceof JavaPackageFragmentDescriptor) || packageScope instanceof DeserializedPackageMemberScope || packageScope instanceof JavaFullPackageScope) {
    JetFile file=BindingContextUtils.getContainingFile(bindingContext,descriptor);
    if (insideModule && file != null) {
      return NamespaceCodegen.getNamespacePartInternalName(file);
    }
 else {
      return PackageClassUtils.getPackageClassFqName(packageFragment.getFqName()).asString().replace('.','/');
    }
  }
  if (!(packageScope instanceof JavaClassStaticMembersScope)) {
    throw new IllegalStateException("Unexpected scope: " + packageScope.getClass());
  }
  JavaPackageFragmentProvider javaFragmentProvider=((JavaPackageFragmentDescriptorImpl)packageFragment).getProvider();
  StringBuilder r=new StringBuilder();
  for (  FqName pathItem : packageFragment.getFqName().parent().path()) {
    if (pathItem.isRoot()) {
      continue;
    }
    r.append(pathItem.shortName().asString());
    JavaPackageFragmentDescriptor fragment=javaFragmentProvider.getPackageFragment(pathItem);
    if (fragment == null) {
      throw new IllegalStateException("Package fragment not found: " + pathItem);
    }
    r.append(fragment.getKind() == CLASS_STATICS ? "$" : "/");
  }
  r.append(packageFragment.getName().asString());
  return r.toString();
}
