{
  PsiElement declarationElement=BindingContextUtils.descriptorToDeclaration(descriptor);
  PsiElement parentDeclarationElement=null;
  if (declarationElement != null) {
    DeclarationDescriptor containingDeclaration=descriptor.getContainingDeclaration();
    if (containingDeclaration != null) {
      parentDeclarationElement=BindingContextUtils.descriptorToDeclaration(containingDeclaration);
    }
  }
  return String.format("Error types are not allowed when classBuilderMode = %s. " + "Type: %s (%s). Descriptor: %s. For declaration %s:%s in %s:%s",classBuilderMode,type,type.getClass().getSimpleName(),descriptor,declarationElement,declarationElement != null ? declarationElement.getText() : "null",parentDeclarationElement,parentDeclarationElement != null ? parentDeclarationElement.getText() : "null");
}
