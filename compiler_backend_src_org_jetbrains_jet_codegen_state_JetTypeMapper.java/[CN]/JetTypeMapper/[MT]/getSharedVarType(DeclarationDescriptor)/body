{
  if (descriptor instanceof PropertyDescriptor) {
    return StackValue.sharedTypeForType(mapType(((PropertyDescriptor)descriptor).getReceiverParameter().getType(),MapTypeMode.VALUE));
  }
 else   if (descriptor instanceof SimpleFunctionDescriptor && descriptor.getContainingDeclaration() instanceof FunctionDescriptor) {
    PsiElement psiElement=descriptorToDeclaration(bindingContext,descriptor);
    return classNameForAnonymousClass(bindingContext,(JetElement)psiElement).getAsmType();
  }
 else   if (descriptor instanceof FunctionDescriptor) {
    return StackValue.sharedTypeForType(mapType(((FunctionDescriptor)descriptor).getReceiverParameter().getType(),MapTypeMode.VALUE));
  }
 else   if (descriptor instanceof VariableDescriptor && isVarCapturedInClosure(bindingContext,descriptor)) {
    JetType outType=((VariableDescriptor)descriptor).getType();
    return StackValue.sharedTypeForType(mapType(outType,MapTypeMode.VALUE));
  }
  return null;
}
