{
  K2JSTranslator translator=new K2JSTranslator(config);
  String programCode=translator.generateProgramCode(files) + "\n";
  JetFile fileWithMain=JetMainDetector.getFileWithMain(files);
  if (fileWithMain == null) {
    throw new RuntimeException("No file with main detected.");
  }
  String callToMain=generateCallToMain(fileWithMain,"");
  File file=new File(outputPath);
  FileUtil.createParentDirs(file);
  FileWriter writer=new FileWriter(file);
  try {
    writer.write(programCode + callToMain);
  }
  finally {
    writer.close();
  }
}
