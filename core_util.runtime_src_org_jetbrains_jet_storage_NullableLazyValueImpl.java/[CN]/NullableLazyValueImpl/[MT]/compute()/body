{
  if (value == COMPUTING) {
    Object result=recursionDetected();
    if (result != NOT_COMPUTED) {
      return WrappedValues.unescapeThrowable(result);
    }
  }
 else   if (value != NOT_COMPUTED) {
    return WrappedValues.unescapeThrowable(value);
  }
  value=COMPUTING;
  try {
    T typedValue=doCompute();
    value=typedValue;
    postCompute(typedValue);
    return typedValue;
  }
 catch (  Throwable e) {
    value=WrappedValues.escapeThrowable(e);
    throw ExceptionUtils.rethrow(e);
  }
}
