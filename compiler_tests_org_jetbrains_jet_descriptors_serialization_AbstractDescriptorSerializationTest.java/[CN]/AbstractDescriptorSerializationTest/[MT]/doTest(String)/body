{
  File ktFile=new File(path);
  ModuleDescriptor moduleDescriptor=LazyResolveTestUtil.resolveEagerly(Collections.singletonList(JetTestUtils.createFile(ktFile.getName(),FileUtil.loadFile(ktFile),getProject())),getEnvironment());
  PackageFragmentDescriptor testPackage=DescriptorUtils.getExactlyOnePackageFragment(moduleDescriptor,FqName.topLevel(TEST_PACKAGE_NAME));
  InjectorForJavaDescriptorResolver injector=InjectorForJavaDescriptorResolverUtil.create(getProject(),new BindingTraceContext());
  JavaDescriptorResolver javaDescriptorResolver=injector.getJavaDescriptorResolver();
  PackageFragmentDescriptor deserialized=serializeAndDeserialize(javaDescriptorResolver,testPackage);
  RecursiveDescriptorComparator.validateAndCompareDescriptors(testPackage,deserialized,RecursiveDescriptorComparator.RECURSIVE,null);
}
