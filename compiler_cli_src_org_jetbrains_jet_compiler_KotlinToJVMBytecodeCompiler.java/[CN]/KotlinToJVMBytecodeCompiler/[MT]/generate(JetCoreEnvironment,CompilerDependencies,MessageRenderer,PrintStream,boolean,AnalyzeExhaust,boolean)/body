{
  Project project=environment.getProject();
class BackendProgress implements Progress {
    @Override public void log(    String message){
      errorStream.println(messageRenderer.render(Severity.LOGGING,message,null,-1,-1));
    }
  }
  GenerationState generationState=new GenerationState(project,ClassBuilderFactories.binaries(stubs),verbose ? new BackendProgress() : Progress.DEAF,exhaust,environment.getSourceFiles(),dependencies.getCompilerSpecialMode());
  generationState.compileCorrectFiles(CompilationErrorHandler.THROW_EXCEPTION);
  List<CompilerPlugin> plugins=environment.getCompilerPlugins();
  if (plugins != null) {
    CompilerPluginContext context=new CompilerPluginContext(project,exhaust.getBindingContext(),environment.getSourceFiles());
    for (    CompilerPlugin plugin : plugins) {
      plugin.processFiles(context);
    }
  }
  return generationState;
}
