{
  final Alignment parameterAlignment=shouldAlignChild ? Alignment.createAlignment() : null;
  final Alignment parenthesisAlignment=shouldAlignParenthesis ? Alignment.createAlignment() : null;
  return new ASTAlignmentStrategy(){
    @Override public Alignment getAlignment(    ASTNode node){
      IElementType childNodeType=node.getElementType();
      ASTNode prev=getPrevWithoutWhitespace(node);
      if ((prev != null && prev.getElementType() == TokenType.ERROR_ELEMENT) || childNodeType == TokenType.ERROR_ELEMENT) {
        return parameterAlignment;
      }
      if (childNodeType == openParenth || childNodeType == closeParenth) {
        return parenthesisAlignment;
      }
      if (childNodeType == parameter || childNodeType == delimiter) {
        return parameterAlignment;
      }
      return null;
    }
  }
;
}
