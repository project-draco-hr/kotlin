{
  return resolveSession.getStorageManager().compute(new Computable<Collection<D>>(){
    @Override public Collection<D> compute(){
      Set<D> descriptors=Sets.newHashSet();
      for (      JetImportDirective directive : importsProvider.getAllImports()) {
        if (directive == directiveUnderResolve) {
          throw new IllegalStateException("Recursion while resolving many imports: " + directive.getText());
        }
        descriptors.addAll(descriptorsSelector.get(getImportScope(directive,lookupMode)));
      }
      return descriptors;
    }
  }
);
}
