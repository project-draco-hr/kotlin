{
  final WritableScope toplevelScope=new WritableScopeImpl(outerScope,outerScope.getContainingDeclaration(),trace.getErrorHandler(),null);
  collectTypeDeclarators(toplevelScope,declarations);
  resolveTypeDeclarations();
  processBehaviorDeclarators(toplevelScope,declarations);
  readyToProcessExpressions=true;
  resolveBehaviorDeclarationBodies();
  return toplevelScope;
}
