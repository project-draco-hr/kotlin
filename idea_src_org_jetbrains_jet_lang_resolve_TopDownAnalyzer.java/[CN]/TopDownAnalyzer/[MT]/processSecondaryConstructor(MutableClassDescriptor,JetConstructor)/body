{
  if (classDescriptor.isTrait()) {
    trace.getErrorHandler().genericError(constructor.getNameNode(),"A trait may not have a constructor");
  }
  ConstructorDescriptor constructorDescriptor=classDescriptorResolver.resolveSecondaryConstructorDescriptor(classDescriptor.getScopeForMemberResolution(),classDescriptor,constructor);
  classDescriptor.addConstructor(constructorDescriptor);
  constructors.put(constructor,constructorDescriptor);
  declaringScopes.put(constructor,classDescriptor.getScopeForMemberLookup());
}
