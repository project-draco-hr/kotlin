{
  declaringScopes.put(function,declaringScope);
  FunctionDescriptor descriptor=classDescriptorResolver.resolveFunctionDescriptor(declaringScope.getContainingDeclaration(),declaringScope,function);
  declaringScope.addFunctionDescriptor(descriptor);
  functions.put(function,descriptor);
  JetExpression bodyExpression=function.getBodyExpression();
  if (bodyExpression != null) {
    JetControlFlowInstructionsGenerator instructionsGenerator=new JetControlFlowInstructionsGenerator(function);
    new JetControlFlowProcessor(semanticServices,trace,instructionsGenerator).generate(function,bodyExpression);
    Pseudocode pseudocode=instructionsGenerator.getPseudocode();
    pseudocode.postProcess();
    if (!ApplicationManager.getApplication().isUnitTestMode()) {
      System.out.println("-------------");
      pseudocode.dumpInstructions(System.out);
      System.out.println("-------------");
      try {
        pseudocode.dumpGraph(new PrintStream("/Users/abreslav/work/cfg.dot"));
      }
 catch (      FileNotFoundException e) {
        e.printStackTrace();
      }
    }
  }
}
