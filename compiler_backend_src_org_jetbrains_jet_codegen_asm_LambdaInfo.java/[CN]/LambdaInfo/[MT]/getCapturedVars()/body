{
  int index=0;
  if (capturedVars == null) {
    capturedVars=new ArrayList<CapturedParamInfo>();
    if (closure.getCaptureThis() != null) {
      EnclosedValueDescriptor descriptor=new EnclosedValueDescriptor(AsmUtil.CAPTURED_THIS_FIELD,null,null,typeMapper.mapType(closure.getCaptureThis()));
      capturedVars.add(getCapturedParamInfo(descriptor,index));
      index+=descriptor.getType().getSize();
    }
    if (closure.getCaptureReceiverType() != null) {
      EnclosedValueDescriptor descriptor=new EnclosedValueDescriptor(AsmUtil.CAPTURED_RECEIVER_FIELD,null,null,typeMapper.mapType(closure.getCaptureReceiverType()));
      capturedVars.add(getCapturedParamInfo(descriptor,index));
      index+=descriptor.getType().getSize();
    }
    if (closure != null) {
      for (      EnclosedValueDescriptor descriptor : closure.getCaptureVariables().values()) {
        capturedVars.add(getCapturedParamInfo(descriptor,index));
        index+=descriptor.getType().getSize();
      }
    }
  }
  return capturedVars;
}
