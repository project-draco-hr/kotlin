{
  JetFile file=(JetFile)element.getContainingFile();
  if (file == null)   return null;
  if (!(element instanceof JetNamedFunction || element instanceof JetProperty))   return null;
  ResolveSession sessionForFile=WholeProjectAnalyzerFacade.getLazyResolveSessionForFile(file);
  BindingContext bindingContext;
  if ((element instanceof JetNamedFunction && ((JetNamedFunction)element).isLocal()) || element instanceof JetProperty && ((JetProperty)element).isLocal()) {
    bindingContext=ResolveSessionUtils.resolveToElement(sessionForFile,(JetElement)element);
  }
 else {
    try {
      sessionForFile.resolveToDescriptor((JetDeclaration)element);
      bindingContext=sessionForFile.getBindingContext();
    }
 catch (    IllegalStateException e) {
      return null;
    }
  }
  DeclarationDescriptor descriptor=bindingContext.get(BindingContext.DECLARATION_TO_DESCRIPTOR,element);
  if (!(descriptor instanceof CallableMemberDescriptor)) {
    return null;
  }
  Set<? extends CallableMemberDescriptor> overriddenMembers=((CallableMemberDescriptor)descriptor).getOverriddenDescriptors();
  if (overriddenMembers.size() == 0) {
    return null;
  }
  boolean allOverriddenAbstract=true;
  for (  CallableMemberDescriptor function : overriddenMembers) {
    allOverriddenAbstract&=function.getModality() == Modality.ABSTRACT;
  }
  return new LineMarkerInfo<PsiElement>(element,element.getTextOffset(),allOverriddenAbstract ? IMPLEMENTING_MARK : OVERRIDING_MARK,Pass.UPDATE_ALL,new Function<PsiElement,String>(){
    @Override public String fun(    PsiElement element){
      return calculateTooltipString(element);
    }
  }
,new GutterIconNavigationHandler<PsiElement>(){
    @Override public void navigate(    MouseEvent event,    PsiElement elt){
      iconNavigatorHandler(event,elt);
    }
  }
);
}
