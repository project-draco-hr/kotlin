{
  try {
    ByteArrayOutputStream outStream=new ByteArrayOutputStream();
    File kotlinCompilerJar=new File(PathUtil.getKotlinPathsForDistDirectory().getLibPath(),"kotlin-compiler.jar");
    URLClassLoader classLoader=new URLClassLoader(new URL[]{kotlinCompilerJar.toURI().toURL()},Object.class.getClassLoader());
    Class<?> compilerClass=classLoader.loadClass(K2JVMCompiler.class.getName());
    Object compilerObject=compilerClass.newInstance();
    Method execMethod=compilerClass.getMethod("exec",PrintStream.class,String[].class);
    Enum<?> invocationResult=(Enum<?>)execMethod.invoke(compilerObject,new PrintStream(outStream),new String[]{"-src",sourcesPath,"-output",outDir.getAbsolutePath()});
    assertEquals(new String(outStream.toByteArray()),ExitCode.OK.name(),invocationResult.name());
  }
 catch (  Throwable e) {
    throw ExceptionUtils.rethrow(e);
  }
}
