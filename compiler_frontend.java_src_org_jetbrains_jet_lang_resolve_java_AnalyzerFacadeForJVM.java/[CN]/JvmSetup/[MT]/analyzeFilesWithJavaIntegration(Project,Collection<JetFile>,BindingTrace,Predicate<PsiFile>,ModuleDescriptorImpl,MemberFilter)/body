{
  GlobalContext globalContext=ContextPackage.GlobalContext();
  TopDownAnalysisParameters topDownAnalysisParameters=TopDownAnalysisParameters.create(globalContext.getStorageManager(),globalContext.getExceptionTracker(),filesToAnalyzeCompletely,false,false);
  InjectorForTopDownAnalyzerForJvm injector=new InjectorForTopDownAnalyzerForJvm(project,topDownAnalysisParameters,trace,module,memberFilter);
  try {
    module.addFragmentProvider(DependencyKind.BINARIES,injector.getJavaDescriptorResolver().getPackageFragmentProvider());
    injector.getTopDownAnalyzer().analyzeFiles(topDownAnalysisParameters,files);
    return AnalyzeExhaust.success(trace.getBindingContext(),module);
  }
  finally {
    injector.destroy();
  }
}
