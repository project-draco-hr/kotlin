{
  String text=FileUtil.loadFile(new File(testFile),true);
  final ExpectedResolveData expectedResolveData=getExpectedResolveData();
  List<JetFile> files=JetTestUtils.createTestFiles("file.kt",text,new JetTestUtils.TestFileFactoryNoModules<JetFile>(){
    @Override public JetFile create(    String fileName,    String text,    Map<String,String> directives){
      return expectedResolveData.createFileFromMarkedUpText(fileName,text);
    }
  }
);
  KotlinCodeAnalyzer resolveSession=LazyResolveTestUtil.resolveLazilyWithSession(files,getEnvironment(),true);
  PackageViewDescriptor actual=resolveSession.getModuleDescriptor().getPackage(new FqName("test"));
  Assert.assertNotNull("Package 'test' was not found",actual);
  resolveSession.forceResolveAll();
  expectedResolveData.checkResult(resolveSession.getBindingContext());
}
