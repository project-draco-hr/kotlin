{
  final PsiClass containingClass=method.getContainingClass();
  String owner=jvmName(containingClass);
  Method signature=getMethodDescriptor(method);
  List<Type> valueParameterTypes=new ArrayList<Type>();
  Collections.addAll(valueParameterTypes,signature.getArgumentTypes());
  int opcode;
  if (method.isConstructor()) {
    opcode=Opcodes.INVOKESPECIAL;
  }
 else   if (method.hasModifierProperty(PsiModifier.STATIC)) {
    opcode=Opcodes.INVOKESTATIC;
  }
 else   if (containingClass.isInterface()) {
    opcode=Opcodes.INVOKEINTERFACE;
  }
 else {
    opcode=Opcodes.INVOKEVIRTUAL;
  }
  return new CallableMethod(owner,signature,opcode,valueParameterTypes);
}
