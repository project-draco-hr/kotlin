{
  if (file.exists()) {
    if (file.isDirectory()) {
      return VirtualFileManager.getInstance().findFileByUrl("file://" + FileUtil.toSystemIndependentName(file.getAbsolutePath()));
    }
 else {
      return VirtualFileManager.getInstance().findFileByUrl("jar://" + FileUtil.toSystemIndependentName(file.getAbsolutePath()) + "!/");
    }
  }
 else {
    throw new IllegalStateException("Path " + file + " does not exist.");
  }
}
