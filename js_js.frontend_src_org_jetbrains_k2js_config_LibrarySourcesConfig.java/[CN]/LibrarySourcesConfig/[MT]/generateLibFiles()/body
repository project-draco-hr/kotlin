{
  if (files.isEmpty()) {
    return Collections.emptyList();
  }
  List<JetFile> jetFiles=new ArrayList<JetFile>();
  VirtualFileSystem fileSystem=VirtualFileManager.getInstance().getFileSystem(StandardFileSystems.FILE_PROTOCOL);
  VirtualFileSystem jarFileSystem=VirtualFileManager.getInstance().getFileSystem(StandardFileSystems.JAR_PROTOCOL);
  PsiManager psiManager=PsiManager.getInstance(getProject());
  String moduleName=null;
  for (  String path : files) {
    VirtualFile file;
    String actualModuleName=moduleName;
    if (path.charAt(0) == '@') {
      moduleName=path.substring(1);
      continue;
    }
    if (path.endsWith(".jar") || path.endsWith(".zip")) {
      file=jarFileSystem.findFileByPath(path + URLUtil.JAR_SEPARATOR);
    }
 else {
      file=fileSystem.findFileByPath(path);
    }
    if (file == null) {
      LOG.error("File '" + path + "' not found.'");
    }
 else {
      File filePath=new File(path);
      if (isKotlinJavascriptLibrary(filePath)) {
        actualModuleName=LibraryUtils.getKotlinJsModuleName(filePath);
      }
      if (actualModuleName == null) {
        LOG.error("Could not find " + LibraryUtils.KOTLIN_JS_MODULE_NAME + " for "+ filePath);
      }
      JetFileCollector jetFileCollector=new JetFileCollector(jetFiles,actualModuleName,psiManager);
      VfsUtilCore.visitChildrenRecursively(file,jetFileCollector);
    }
    moduleName=null;
  }
  return jetFiles;
}
