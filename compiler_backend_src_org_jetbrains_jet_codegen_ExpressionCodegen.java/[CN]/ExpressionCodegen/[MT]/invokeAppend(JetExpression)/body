{
  if (expr instanceof JetBinaryExpression) {
    JetBinaryExpression binaryExpression=(JetBinaryExpression)expr;
    if (binaryExpression.getOperationToken() == JetTokens.PLUS) {
      JetExpression left=binaryExpression.getLeft();
      JetExpression right=binaryExpression.getRight();
      Type leftType=expressionType(left);
      if (leftType.equals(JAVA_STRING_TYPE)) {
        invokeAppend(left);
        invokeAppend(right);
        return;
      }
    }
  }
  Type exprType=expressionType(expr);
  gen(expr,exprType);
  genInvokeAppendMethod(v,exprType.getSort() == Type.ARRAY ? OBJECT_TYPE : exprType);
}
