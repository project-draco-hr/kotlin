{
  JetExpression returnedExpression=expression.getReturnedExpression();
  if (returnedExpression != null) {
    gen(returnedExpression,returnType);
    boolean hasFinallyBLocks=hasFinallyBLocks();
    if (hasFinallyBLocks) {
      int returnValIndex=myFrameMap.enterTemp(returnType);
      StackValue.local(returnValIndex,returnType).store(returnType,v);
      doFinallyOnReturn();
      StackValue.local(returnValIndex,returnType).put(returnType,v);
      myFrameMap.leaveTemp(returnType);
    }
    v.areturn(returnType);
  }
 else {
    doFinallyOnReturn();
    v.visitInsn(RETURN);
  }
  return StackValue.none();
}
