{
  JetExpression returnedExpression=expression.getReturnedExpression();
  if (returnedExpression != null) {
    if (returnedExpression instanceof JetCallExpression) {
      JetCallExpression callExpression=(JetCallExpression)returnedExpression;
      if (tailRecursionGeneratorUtil.isTailRecursion(callExpression) && callExpression.getCalleeExpression() != null) {
        ResolvedCall<? extends CallableDescriptor> resolvedCall=bindingContext.get(BindingContext.RESOLVED_CALL,callExpression.getCalleeExpression());
        if (resolvedCall != null) {
          return tailRecursionGeneratorUtil.generateTailRecursion(resolvedCall,callExpression);
        }
      }
    }
    gen(returnedExpression,returnType);
    doFinallyOnReturn();
    v.areturn(returnType);
  }
 else {
    doFinallyOnReturn();
    v.visitInsn(RETURN);
  }
  return StackValue.none();
}
