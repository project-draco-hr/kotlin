{
  JetExpression returnedExpression=expression.getReturnedExpression();
  if (returnedExpression != null) {
    if (returnedExpression instanceof JetCallExpression) {
      JetCallExpression callExpression=(JetCallExpression)returnedExpression;
      JetExpression calleeExpression=callExpression.getCalleeExpression();
      if (calleeExpression != null) {
        ResolvedCall<? extends CallableDescriptor> resolvedCall=bindingContext.get(BindingContext.RESOLVED_CALL,calleeExpression);
        if (resolvedCall != null && tailRecursionGeneratorUtil.isTailRecursion(resolvedCall)) {
          return tailRecursionGeneratorUtil.generateTailRecursion(resolvedCall,callExpression);
        }
      }
    }
    gen(returnedExpression,returnType);
    doFinallyOnReturn();
    v.areturn(returnType);
  }
 else {
    doFinallyOnReturn();
    v.visitInsn(RETURN);
  }
  return StackValue.none();
}
