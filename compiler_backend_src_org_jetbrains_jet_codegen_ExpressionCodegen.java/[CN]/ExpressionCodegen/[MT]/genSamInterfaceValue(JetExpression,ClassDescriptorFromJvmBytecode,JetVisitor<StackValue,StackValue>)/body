{
  if (expression instanceof JetFunctionLiteralExpression) {
    return genClosure(((JetFunctionLiteralExpression)expression).getFunctionLiteral(),samInterface);
  }
 else {
    JvmClassName className=state.getSamWrapperClasses().getSamWrapperClass(samInterface,(JetFile)expression.getContainingFile());
    v.anew(className.getAsmType());
    v.dup();
    Type functionType=typeMapper.mapType(samInterface.getFunctionTypeForSamInterface());
    expression.accept(visitor,StackValue.none()).put(functionType,v);
    Label ifNonNull=new Label();
    Label afterAll=new Label();
    v.dup();
    v.ifnonnull(ifNonNull);
    v.pop();
    v.pop2();
    v.aconst(null);
    v.goTo(afterAll);
    v.mark(ifNonNull);
    v.invokespecial(className.getInternalName(),"<init>",Type.getMethodDescriptor(Type.VOID_TYPE,functionType));
    v.mark(afterAll);
    return StackValue.onStack(className.getAsmType());
  }
}
