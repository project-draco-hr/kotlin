{
  ResolvedCall<?> resolvedCall=resolvedCall(expression.getOperationReference());
  FunctionDescriptor descriptor=(FunctionDescriptor)resolvedCall.getResultingDescriptor();
  JetExpression left=expression.getLeft();
  JetExpression right=expression.getRight();
  Callable callable=resolveToCallable(descriptor,false);
  Type type;
  if (callable instanceof IntrinsicMethod) {
    type=comparisonOperandType(expressionType(left),expressionType(right));
    StackValue recv=gen(left);
    recv.put(type,v);
    gen(right,type);
  }
 else {
    Call call=bindingContext.get(CALL,expression.getOperationReference());
    StackValue result=invokeFunction(call,receiver,resolvedCall);
    type=Type.INT_TYPE;
    result.put(type,v);
    v.iconst(0);
  }
  return StackValue.cmp(expression.getOperationToken(),type);
}
