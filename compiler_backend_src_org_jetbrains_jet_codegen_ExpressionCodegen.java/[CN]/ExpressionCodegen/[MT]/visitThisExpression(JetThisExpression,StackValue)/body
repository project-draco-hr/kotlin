{
  final DeclarationDescriptor descriptor=bindingContext.get(BindingContext.REFERENCE_TARGET,expression.getInstanceReference());
  if (descriptor instanceof ClassDescriptor) {
    return generateThisOrOuter((ClassDescriptor)descriptor);
  }
 else {
    if (descriptor instanceof FunctionDescriptor || descriptor instanceof PropertyDescriptor) {
      return generateReceiver(descriptor);
    }
    throw new UnsupportedOperationException();
  }
}
