{
  super.configureEnvironment(configuration,arguments);
  if (configuration.getEnvironment().getCompilerDependencies().getRuntimeJar() != null) {
    CompileEnvironmentUtil.addToClasspath(configuration.getEnvironment(),configuration.getEnvironment().getCompilerDependencies().getRuntimeJar());
  }
  if (arguments.classpath != null) {
    List<File> classpath=getClasspath(arguments);
    CompileEnvironmentUtil.addToClasspath(configuration.getEnvironment(),Iterables.toArray(classpath,File.class));
  }
  if (arguments.annotations != null) {
    for (    String root : Splitter.on(File.pathSeparatorChar).split(arguments.annotations)) {
      configuration.getEnvironment().addExternalAnnotationsRoot(PathUtil.jarFileOrDirectoryToVirtualFile(new File(root)));
    }
  }
}
