{
  Set<KotlinType> types=collectTypesFromMeAndParents(key);
  if (!enrichWithNotNull || getNullability(key).canBeNull()) {
    return types;
  }
  Set<KotlinType> enrichedTypes=Sets.newHashSetWithExpectedSize(types.size() + 1);
  KotlinType originalType=key.getType();
  if (originalType.isMarkedNullable()) {
    enrichedTypes.add(TypeUtils.makeNotNullable(originalType));
  }
  for (  KotlinType type : types) {
    enrichedTypes.add(TypeUtils.makeNotNullable(type));
  }
  return enrichedTypes;
}
