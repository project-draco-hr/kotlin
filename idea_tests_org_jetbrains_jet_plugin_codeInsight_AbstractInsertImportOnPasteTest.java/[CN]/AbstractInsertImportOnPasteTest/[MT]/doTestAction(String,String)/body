{
  myFixture.setTestDataPath(BASE_PATH);
  File testFile=new File(path);
  String testFileName=testFile.getName();
  configureByDependencyIfExists(testFileName.replace(".kt",".dependency.kt"));
  configureByDependencyIfExists(testFileName.replace(".kt",".dependency.java"));
  myFixture.configureByFile(testFileName);
  myFixture.performEditorAction(cutOrCopy);
  String toFileName=testFileName.replace(".kt",".to.kt");
  JetFile toFile=configureToFile(toFileName);
  performNotWriteEditorAction(IdeActions.ACTION_PASTE);
  myFixture.checkResultByFile(testFileName.replace(".kt",".expected.kt"));
  if (!InTextDirectivesUtils.isDirectiveDefined(FileUtil.loadFile(testFile,true),ALLOW_UNRESOLVED_DIRECTIVE)) {
    checkNoUnresolvedReferences(toFile);
  }
}
