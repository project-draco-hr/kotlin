{
  if (initialized) {
    throw new IllegalStateException("Cannot add class path when JetCoreEnvironment is already initialized");
  }
  if (path.isFile()) {
    projectEnvironment.addJarToClassPath(path);
  }
 else {
    final VirtualFile root=applicationEnvironment.getLocalFileSystem().findFileByPath(path.getAbsolutePath());
    if (root == null) {
      throw new IllegalArgumentException("trying to add non-existing file to classpath: " + path);
    }
    projectEnvironment.addSourcesToClasspath(root);
  }
}
