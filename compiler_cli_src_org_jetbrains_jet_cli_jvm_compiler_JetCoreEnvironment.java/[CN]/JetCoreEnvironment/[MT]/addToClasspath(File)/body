{
  if (initialized) {
    throw new IllegalStateException("Cannot add class path when JetCoreEnvironment is already initialized");
  }
  if (path.isFile()) {
    VirtualFile jarFile=applicationEnvironment.getJarFileSystem().findFileByPath(path + "!/");
    if (jarFile == null) {
      report(WARNING,"Classpath entry points to a file that is not a JAR archive: " + path);
      return;
    }
    projectEnvironment.addJarToClassPath(path);
  }
 else {
    final VirtualFile root=applicationEnvironment.getLocalFileSystem().findFileByPath(path.getAbsolutePath());
    if (root == null) {
      report(WARNING,"Classpath entry points to a non-existent location: " + path);
      return;
    }
    projectEnvironment.addSourcesToClasspath(root);
  }
}
