{
  JavaCoreApplicationEnvironment applicationEnvironment=new JavaCoreApplicationEnvironment(parentDisposable);
  applicationEnvironment.registerFileType(PlainTextFileType.INSTANCE,"xml");
  applicationEnvironment.registerFileType(JetFileType.INSTANCE,"kt");
  applicationEnvironment.registerFileType(JetFileType.INSTANCE,"kts");
  applicationEnvironment.registerFileType(JetFileType.INSTANCE,"ktm");
  applicationEnvironment.registerFileType(JetFileType.INSTANCE,JetParserDefinition.KTSCRIPT_FILE_SUFFIX);
  applicationEnvironment.registerParserDefinition(new JavaParserDefinition());
  applicationEnvironment.registerParserDefinition(new JetParserDefinition());
  applicationEnvironment.getApplication().registerService(OperationModeProvider.class,new CompilerModeProvider());
  applicationEnvironment.getApplication().registerService(KotlinBinaryClassCache.class,new KotlinBinaryClassCache());
  return applicationEnvironment;
}
