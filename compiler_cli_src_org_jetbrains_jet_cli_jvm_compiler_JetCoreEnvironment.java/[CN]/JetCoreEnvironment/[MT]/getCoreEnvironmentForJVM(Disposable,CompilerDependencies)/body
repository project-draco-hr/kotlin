{
  JetCoreEnvironment coreEnvironment=new JetCoreEnvironment(disposable);
  CompilerSpecialMode compilerSpecialMode=compilerDependencies.getCompilerSpecialMode();
  coreEnvironment.addToClasspath(compilerDependencies.getJdkJar());
  if (compilerSpecialMode.includeJdkHeaders()) {
    for (    VirtualFile root : compilerDependencies.getJdkHeaderRoots()) {
      coreEnvironment.addLibraryRoot(root);
    }
  }
  if (compilerSpecialMode.includeKotlinRuntime()) {
    for (    VirtualFile root : compilerDependencies.getRuntimeRoots()) {
      coreEnvironment.addLibraryRoot(root);
    }
  }
  return coreEnvironment;
}
