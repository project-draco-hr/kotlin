{
  super(parentDisposable);
  this.compilerDependencies=compilerDependencies;
  registerFileType(JetFileType.INSTANCE,"kt");
  registerFileType(JetFileType.INSTANCE,"kts");
  registerFileType(JetFileType.INSTANCE,"ktm");
  registerFileType(JetFileType.INSTANCE,JetParser.KTSCRIPT_FILE_SUFFIX);
  registerFileType(JetFileType.INSTANCE,"jet");
  registerParserDefinition(new JavaParserDefinition());
  registerParserDefinition(new JetParserDefinition());
  myProject.registerService(JetFilesProvider.class,new CliJetFilesProvider(this));
  Extensions.getArea(myProject).getExtensionPoint(PsiElementFinder.EP_NAME).registerExtension(new JavaElementFinder(myProject));
  CompilerSpecialMode compilerSpecialMode=compilerDependencies.getCompilerSpecialMode();
  if (compilerSpecialMode.includeJdk()) {
    addToClasspath(compilerDependencies.getJdkJar());
  }
  if (compilerSpecialMode.includeJdkHeaders()) {
    for (    VirtualFile root : compilerDependencies.getJdkHeaderRoots()) {
      addLibraryRoot(root);
    }
  }
  if (compilerSpecialMode.includeKotlinRuntime()) {
    addToClasspath(compilerDependencies.getRuntimeJar());
  }
  JetStandardLibrary.initialize(getProject());
}
