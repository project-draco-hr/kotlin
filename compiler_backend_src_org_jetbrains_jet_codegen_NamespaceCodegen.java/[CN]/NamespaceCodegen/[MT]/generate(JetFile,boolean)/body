{
  NamespaceDescriptor descriptor=state.getBindingContext().get(BindingContext.FILE_TO_NAMESPACE,file);
  for (  JetDeclaration declaration : file.getDeclarations()) {
    if (declaration instanceof JetProperty) {
      final CodegenContext context=CodegenContexts.STATIC.intoNamespace(descriptor,state.getInjector().getJetTypeMapper());
      state.getInjector().getMemberCodegen().generateFunctionOrProperty((JetTypeParameterListOwner)declaration,context,v.getClassBuilder());
    }
 else     if (declaration instanceof JetNamedFunction) {
      if (!multiFile) {
        final CodegenContext context=CodegenContexts.STATIC.intoNamespace(descriptor,state.getInjector().getJetTypeMapper());
        state.getInjector().getMemberCodegen().generateFunctionOrProperty((JetTypeParameterListOwner)declaration,context,v.getClassBuilder());
      }
    }
 else     if (declaration instanceof JetClassOrObject) {
      final CodegenContext context=CodegenContexts.STATIC.intoNamespace(descriptor,state.getInjector().getJetTypeMapper());
      state.getInjector().getClassCodegen().generate(context,(JetClassOrObject)declaration);
    }
 else     if (declaration instanceof JetScript) {
      state.getInjector().getScriptCodegen().generate((JetScript)declaration);
    }
  }
  if (multiFile) {
    int k=0;
    for (    JetDeclaration declaration : file.getDeclarations()) {
      if (declaration instanceof JetNamedFunction) {
        k++;
      }
    }
    if (k > 0) {
      PsiFile containingFile=file.getContainingFile();
      String namespaceInternalName=name.child(Name.identifier(JvmAbi.PACKAGE_CLASS)).getFqName().replace('.','/');
      String className=getMultiFileNamespaceInternalName(namespaceInternalName,containingFile);
      ClassBuilder builder=state.forNamespacepart(className);
      builder.defineClass(containingFile,V1_6,ACC_PUBLIC,className,null,"java/lang/Object",new String[0]);
      builder.visitSource(containingFile.getName(),null);
      for (      JetDeclaration declaration : file.getDeclarations()) {
        if (declaration instanceof JetNamedFunction) {
{
            final CodegenContext context=CodegenContexts.STATIC.intoNamespace(descriptor,state.getInjector().getJetTypeMapper());
            state.getInjector().getMemberCodegen().generateFunctionOrProperty((JetTypeParameterListOwner)declaration,context,builder);
          }
{
            final CodegenContext context=CodegenContexts.STATIC.intoNamespacePart(className,descriptor,state.getInjector().getJetTypeMapper());
            state.getInjector().getMemberCodegen().generateFunctionOrProperty((JetTypeParameterListOwner)declaration,context,v.getClassBuilder());
          }
        }
      }
      builder.done();
    }
  }
}
