{
  boolean generateSrcClass=false;
  FieldOwnerContext namespaceImpl=CodegenContext.STATIC.intoNamespace(descriptor);
  for (  JetDeclaration declaration : file.getDeclarations()) {
    if (declaration instanceof JetProperty || declaration instanceof JetNamedFunction) {
      generateSrcClass=true;
    }
 else     if (declaration instanceof JetClassOrObject) {
      if (state.isGenerateDeclaredClasses()) {
        generateClassOrObject((JetClassOrObject)declaration);
      }
    }
 else     if (declaration instanceof JetScript) {
      ScriptCodegen.createScriptCodegen((JetScript)declaration,state,namespaceImpl).generate();
    }
  }
  if (!generateSrcClass)   return null;
  Type namespacePartType=getNamespacePartType(getPackageClassFqName(name),file);
  ClassBuilder builder=state.getFactory().forNamespacePart(namespacePartType,file);
  NamespacePartCodegen namespacePartCodegen=new NamespacePartCodegen(builder,file,namespacePartType,namespaceImpl,state);
  namespacePartCodegen.generate();
  FieldOwnerContext nameSpacePart=CodegenContext.STATIC.intoNamespaceFacade(namespacePartType,descriptor);
  for (  JetDeclaration declaration : file.getDeclarations()) {
    if (declaration instanceof JetNamedFunction || declaration instanceof JetProperty) {
      genFunctionOrProperty(nameSpacePart,(JetTypeParameterListOwner)declaration,v.getClassBuilder());
    }
  }
  return builder;
}
