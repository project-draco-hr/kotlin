{
  boolean generateSrcClass=false;
  FieldOwnerContext packageFragmentContext=CodegenContext.STATIC.intoNamespace(descriptor);
  for (  JetDeclaration declaration : file.getDeclarations()) {
    if (declaration instanceof JetProperty || declaration instanceof JetNamedFunction) {
      generateSrcClass=true;
    }
 else     if (declaration instanceof JetClassOrObject) {
      if (state.isGenerateDeclaredClasses()) {
        generateClassOrObject((JetClassOrObject)declaration);
      }
    }
 else     if (declaration instanceof JetScript) {
      ScriptCodegen.createScriptCodegen((JetScript)declaration,state,packageFragmentContext).generate();
    }
  }
  if (!generateSrcClass)   return null;
  Type packageFragmentType=getNamespacePartType(getPackageClassFqName(name),file.getVirtualFile());
  ClassBuilder builder=state.getFactory().forPackageFragment(packageFragmentType,file);
  new NamespacePartCodegen(builder,file,packageFragmentType,packageFragmentContext,state).generate();
  FieldOwnerContext namespaceFacade=CodegenContext.STATIC.intoNamespaceFacade(packageFragmentType,descriptor);
  for (  JetDeclaration declaration : file.getDeclarations()) {
    if (declaration instanceof JetNamedFunction || declaration instanceof JetProperty) {
      genFunctionOrProperty(namespaceFacade,(JetTypeParameterListOwner)declaration,v.getClassBuilder());
    }
  }
  return builder;
}
