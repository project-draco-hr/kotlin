{
  boolean isWithRuntime=beforeFileName.endsWith("Runtime.kt");
  try {
    if (isWithRuntime) {
      ConfigLibraryUtil.configureKotlinRuntime(getModule(),getFullJavaJDK());
    }
    doSingleTest(getTestName(false) + ".kt");
    checkAvailableActionsAreExpected();
    checkForUnexpectedErrors();
  }
  finally {
    if (isWithRuntime) {
      ConfigLibraryUtil.unConfigureKotlinRuntime(getModule(),getProjectJDK());
    }
  }
}
