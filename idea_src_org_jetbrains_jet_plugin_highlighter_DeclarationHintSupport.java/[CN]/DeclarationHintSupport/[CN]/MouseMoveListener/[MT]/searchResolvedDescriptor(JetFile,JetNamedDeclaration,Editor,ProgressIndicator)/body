{
  runWithWriteActionPriority(indicator,new Runnable(){
    @Override public void run(){
      DeclarationDescriptor descriptor=null;
      try {
        BindingContext bindingContext=WholeProjectAnalyzerFacade.analyzeProjectWithCacheOnAFile(jetFile).getBindingContext();
        descriptor=bindingContext.get(BindingContext.DECLARATION_TO_DESCRIPTOR,declaration);
      }
  finally {
        final DeclarationDescriptor finalDescriptor=descriptor;
        ApplicationManager.getApplication().invokeLater(new Runnable(){
          @Override public void run(){
            onDescriptorReady(finalDescriptor,declaration,editor,jetFile,indicator);
          }
        }
);
      }
    }
  }
);
}
