{
  JavaClassifier classifier=type.getClassifier();
  if (classifier == null)   return "[UNRESOLVED: " + type + "]";
  if (classifier instanceof JavaTypeParameter) {
    return classifier.getName().asString();
  }
  StringBuilder buffer=new StringBuilder(((JavaClass)classifier).getFqName().asString());
  List<JavaType> typeArguments=type.getTypeArguments();
  if (!typeArguments.isEmpty()) {
    buffer.append("<");
    boolean firstArgument=true;
    for (    JavaType typeArgument : typeArguments) {
      if (!firstArgument)       buffer.append(",");
      firstArgument=false;
      buffer.append(formatType(typeArgument));
    }
    buffer.append(">");
  }
  return buffer.toString();
}
