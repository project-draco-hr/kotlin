{
  if (type instanceof JavaPrimitiveType) {
    return ((JavaPrimitiveType)type).getCanonicalText();
  }
 else   if (type instanceof JavaArrayType) {
    return formatType(((JavaArrayType)type).getComponentType()) + "[]";
  }
 else   if (type instanceof JavaClassifierType) {
    return formatClassifierType((JavaClassifierType)type);
  }
 else   if (type instanceof JavaWildcardType) {
    JavaWildcardType wildcardType=(JavaWildcardType)type;
    if (wildcardType.isExtends()) {
      return "? extends " + formatType(wildcardType.getBound());
    }
 else {
      return "?";
    }
  }
 else {
    throw new IllegalArgumentException("Wrong type: " + type);
  }
}
