{
  doTest();
  JpsModule module=myProject.getModules().get(0);
  assertFilesExistInOutput(module,"foo/FooPackage.class","boo/BooPackage.class","foo/Bar.class");
  checkPackageDeletedFromOutputWhen(Operation.CHANGE,"kotlinProject","src/main.kt","foo.FooPackage");
  checkPackageDeletedFromOutputWhen(Operation.CHANGE,"kotlinProject","src/boo.kt","boo.BooPackage");
  checkClassesDeletedFromOutputWhen(Operation.CHANGE,"kotlinProject","src/Bar.kt","foo.Bar");
  checkPackageDeletedFromOutputWhen(Operation.DELETE,"kotlinProject","src/main.kt","foo.FooPackage");
  assertFilesNotExistInOutput(module,"foo/FooPackage.class");
  checkPackageDeletedFromOutputWhen(Operation.CHANGE,"kotlinProject","src/boo.kt","boo.BooPackage");
  checkClassesDeletedFromOutputWhen(Operation.CHANGE,"kotlinProject","src/Bar.kt","foo.Bar");
}
