{
  if (diagnostic.getFactory() != this) {
    throw new IllegalArgumentException("Factory mismatch: expected " + this + " but was "+ diagnostic.getFactory());
  }
  return (D)diagnostic;
}
