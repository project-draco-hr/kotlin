{
  final File unpackedRuntimePath=CompileEnvironment.getUnpackedRuntimePath();
  if (unpackedRuntimePath != null) {
    addSources(new File(unpackedRuntimePath,"../../../stdlib/ktSrc").getAbsoluteFile(),!toModuleSources);
  }
 else {
    final File runtimeJarPath=CompileEnvironment.getRuntimeJarPath();
    if (runtimeJarPath != null && runtimeJarPath.exists()) {
      VirtualFile runtimeJar=myEnvironment.getLocalFileSystem().findFileByPath(runtimeJarPath.getAbsolutePath());
      VirtualFile jarRoot=myEnvironment.getJarFileSystem().findFileByPath(runtimeJar.getPath() + "!/stdlib/ktSrc");
      addSources(jarRoot,!toModuleSources);
    }
 else {
      return false;
    }
  }
  return true;
}
