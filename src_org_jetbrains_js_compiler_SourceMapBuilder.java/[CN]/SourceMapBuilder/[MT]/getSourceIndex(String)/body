{
  if (source.equals(lastSource)) {
    return lastSourceIndex;
  }
  int sourceIndex=sources.get(source);
  if (sourceIndex == -1) {
    sourceIndex=sources.put(source,orderedSources.size());
    orderedSources.add(source);
  }
  lastSource=source;
  lastSourceIndex=sourceIndex;
  return sourceIndex;
}
