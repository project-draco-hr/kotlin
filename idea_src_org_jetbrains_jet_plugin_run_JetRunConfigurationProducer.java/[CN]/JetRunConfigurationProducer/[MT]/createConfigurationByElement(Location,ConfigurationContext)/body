{
  JetClass containingClass=(JetClass)location.getParentElement(JetClass.class);
  if (containingClass != null && JetMainDetector.hasMain(containingClass.getDeclarations())) {
    mySourceElement=containingClass;
    return createConfigurationByQName(location.getModule(),configurationContext,JetPsiUtil.getFQName(containingClass));
  }
  PsiFile psiFile=location.getPsiElement().getContainingFile();
  if (psiFile instanceof JetFile) {
    JetNamespace namespace=((JetFile)psiFile).getRootNamespace();
    if (JetMainDetector.hasMain(namespace.getDeclarations())) {
      mySourceElement=namespace;
      String fqName=JetPsiUtil.getFQName(namespace);
      String className=fqName.length() == 0 ? "namespace" : fqName + ".namespace";
      return createConfigurationByQName(location.getModule(),configurationContext,className);
    }
  }
  return null;
}
