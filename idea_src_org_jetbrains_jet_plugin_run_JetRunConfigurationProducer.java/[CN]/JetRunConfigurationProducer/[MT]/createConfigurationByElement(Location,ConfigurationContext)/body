{
  JetClass containingClass=(JetClass)location.getParentElement(JetClass.class);
  if (containingClass != null && JetMainDetector.hasMain(containingClass.getDeclarations())) {
    mySourceElement=containingClass;
    return createConfigurationByQName(location.getModule(),configurationContext,getFQName(containingClass));
  }
  PsiFile psiFile=location.getPsiElement().getContainingFile();
  if (psiFile instanceof JetFile) {
    JetNamespace namespace=((JetFile)psiFile).getRootNamespace();
    if (JetMainDetector.hasMain(namespace.getDeclarations())) {
      mySourceElement=namespace;
      return createConfigurationByQName(location.getModule(),configurationContext,namespace.getFQName() + ".namespace");
    }
  }
  return null;
}
