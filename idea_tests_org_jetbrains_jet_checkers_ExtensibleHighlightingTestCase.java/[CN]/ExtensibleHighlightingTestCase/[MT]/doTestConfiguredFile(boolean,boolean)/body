{
  getJavaFacade().setAssertOnFileLoadingFilter(VirtualFileFilter.NONE);
  ExpectedHighlightingData expectedData=new ExpectedHighlightingData(getEditor().getDocument(),checkWarnings,checkInfos){
    @Override protected void initAdditionalHighlightingTypes(){
    }
  }
;
  PsiDocumentManager.getInstance(getProject()).commitAllDocuments();
  getFile().getText();
  myJavaFilesFilter.allowTreeAccessForFile(getVFile());
  getJavaFacade().setAssertOnFileLoadingFilter(myJavaFilesFilter);
  Collection<HighlightInfo> infos=doHighlighting();
  getJavaFacade().setAssertOnFileLoadingFilter(VirtualFileFilter.NONE);
  expectedData.checkResult(infos,getEditor().getDocument().getText());
}
