{
  this.state=state;
  this.v=v;
  this.files=packageFiles;
  this.packageFragment=getOnlyPackageFragment();
  this.compiledPackageFragment=getCompiledPackageFragment();
  final PsiFile sourceFile=packageFiles.size() == 1 && getPreviouslyCompiledCallables().isEmpty() ? packageFiles.iterator().next().getContainingFile() : null;
  v.addOptionalDeclaration(new ClassBuilderOnDemand.ClassBuilderCallback(){
    @Override public void doSomething(    @NotNull ClassBuilder v){
      v.defineClass(sourceFile,V1_6,ACC_PUBLIC | ACC_FINAL,JvmClassName.byFqNameWithoutInnerClasses(getPackageClassFqName(fqName)).getInternalName(),null,"java/lang/Object",ArrayUtil.EMPTY_STRING_ARRAY);
      if (sourceFile != null) {
        v.visitSource(sourceFile.getName(),null);
      }
    }
  }
);
}
