{
  super(c.getStorageManager(),containingDeclaration,name,KotlinSourceElementKt.toSourceElement(classLikeInfo.getCorrespondingClassOrObject()));
  this.c=c;
  JetClassOrObject classOrObject=classLikeInfo.getCorrespondingClassOrObject();
  if (classOrObject != null) {
    this.c.getTrace().record(BindingContext.CLASS,classOrObject,this);
  }
  this.c.getTrace().record(BindingContext.FQNAME_TO_CLASS_DESCRIPTOR,DescriptorUtils.getFqName(this),this);
  this.declarationProvider=c.getDeclarationProviderFactory().getClassMemberDeclarationProvider(classLikeInfo);
  this.unsubstitutedMemberScope=createMemberScope(c,this.declarationProvider);
  this.staticScope=new StaticScopeForKotlinClass(this);
  this.typeConstructor=new LazyClassTypeConstructor();
  final ClassKind syntaxKind=classLikeInfo.getClassKind();
  this.isCompanionObject=classLikeInfo instanceof JetObjectInfo && ((JetObjectInfo)classLikeInfo).isCompanionObject();
  final JetModifierList modifierList=classLikeInfo.getModifierList();
  if (syntaxKind.isSingleton()) {
    this.modality=Modality.FINAL;
  }
 else {
    Modality defaultModality=syntaxKind == ClassKind.INTERFACE ? Modality.ABSTRACT : Modality.FINAL;
    this.modality=resolveModalityFromModifiers(modifierList,defaultModality);
  }
  boolean isLocal=classOrObject != null && JetPsiUtil.isLocal(classOrObject);
  Visibility defaultVisibility;
  if (syntaxKind == ClassKind.ENUM_ENTRY || (syntaxKind == ClassKind.OBJECT && isCompanionObject)) {
    defaultVisibility=Visibilities.PUBLIC;
  }
 else {
    defaultVisibility=Visibilities.DEFAULT_VISIBILITY;
  }
  this.visibility=isLocal ? Visibilities.LOCAL : resolveVisibilityFromModifiers(modifierList,defaultVisibility);
  StorageManager storageManager=c.getStorageManager();
  final ClassDescriptor descriptor=this;
  this.isInner=storageManager.createLazyValue(new Function0<Boolean>(){
    @Override public Boolean invoke(){
      return isInnerClass(modifierList) && !ModifiersChecker.isIllegalInner(descriptor);
    }
  }
);
  this.isData=storageManager.createLazyValue(new Function0<Boolean>(){
    @Override public Boolean invoke(){
      return modifierList != null && modifierList.hasModifier(JetTokens.DATA_KEYWORD);
    }
  }
);
  this.kind=storageManager.createLazyValue(new Function0<ClassKind>(){
    @Override public ClassKind invoke(){
      return (syntaxKind == ClassKind.CLASS && KotlinBuiltIns.isAnnotation(descriptor)) ? ClassKind.ANNOTATION_CLASS : syntaxKind;
    }
  }
);
  if (modifierList != null) {
    LazyAnnotations classAnnotations=new LazyAnnotations(new LazyAnnotationsContext(c.getAnnotationResolver(),storageManager,c.getTrace()){
      @NotNull @Override public LexicalScope getScope(){
        return getOuterScope();
      }
    }
,modifierList.getAnnotationEntries());
    this.annotations=c.getAnnotationResolver().resolveAndAppendAnnotationsFromModifiers(classAnnotations,modifierList);
  }
 else {
    this.annotations=Annotations.Companion.getEMPTY();
  }
  List<JetAnnotationEntry> jetDanglingAnnotations=classLikeInfo.getDanglingAnnotations();
  if (jetDanglingAnnotations.isEmpty()) {
    this.danglingAnnotations=Annotations.Companion.getEMPTY();
  }
 else {
    this.danglingAnnotations=new LazyAnnotations(new LazyAnnotationsContext(c.getAnnotationResolver(),storageManager,c.getTrace()){
      @NotNull @Override public LexicalScope getScope(){
        return getScopeForMemberDeclarationResolution();
      }
    }
,jetDanglingAnnotations);
  }
  this.companionObjectDescriptor=storageManager.createNullableLazyValue(new Function0<LazyClassDescriptor>(){
    @Override public LazyClassDescriptor invoke(){
      return computeCompanionObjectDescriptor(getCompanionObjectIfAllowed());
    }
  }
);
  this.extraCompanionObjectDescriptors=storageManager.createMemoizedFunction(new Function1<JetObjectDeclaration,ClassDescriptor>(){
    @Override public ClassDescriptor invoke(    JetObjectDeclaration companionObject){
      return computeCompanionObjectDescriptor(companionObject);
    }
  }
);
  this.forceResolveAllContents=storageManager.createRecursionTolerantNullableLazyValue(new Function0<Void>(){
    @Override public Void invoke(){
      doForceResolveAllContents();
      return null;
    }
  }
,null);
  this.resolutionScopesSupport=new ClassResolutionScopesSupport(this,storageManager,new Function0<LexicalScope>(){
    @Override public LexicalScope invoke(){
      return getOuterScope();
    }
  }
,classLikeInfo.getPrimaryConstructorParameters());
}
