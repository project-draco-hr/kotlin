{
  GlobalSearchScope searchScope=GlobalSearchScope.allScope(getProject());
  PsiClass[] classes=finder.findClasses("test.TestPackage",searchScope);
  assertEquals(3,classes.length);
  assertInstanceOf(classes[0],KotlinLightClassForPackage.class);
  Set<JetFile> expectedFiles=Sets.newHashSet(CliLightClassGenerationSupport.getInstanceForCli(getProject()).findFilesForPackage(new FqName("test"),searchScope));
  Set<PsiFile> actualFiles=Sets.newHashSet();
  for (int i=1; i < classes.length; i++) {
    assertInstanceOf(classes[i],FakeLightClassForFileOfPackage.class);
    actualFiles.add(((FakeLightClassForFileOfPackage)classes[i]).getContainingFile());
  }
  assertEquals(expectedFiles,actualFiles);
}
